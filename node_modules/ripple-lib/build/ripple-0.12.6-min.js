var ripple=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){var r=e[t];i(r.prototype).forEach(function(t){var e=/([A-Z]{1})[a-z]+/g;if(e.test(t)){var n=t.replace(e,function(t){return"_"+t.toLowerCase()});r.prototype[n]=r.prototype[t]}})}var i=r(28)["default"];e.Remote=r(1).Remote,e.Request=r(2).Request,e.Amount=r(3).Amount,e.Account=r(4).Account,e.Transaction=r(5).Transaction,e.Currency=r(6).Currency,e.Base=r(7).Base,e.UInt128=r(8).UInt128,e.UInt160=r(9).UInt160,e.UInt256=r(10).UInt256,e.Seed=r(11).Seed,e.Meta=r(12).Meta,e.SerializedObject=r(13).SerializedObject,e.RippleError=r(14).RippleError,e.Message=r(15).Message,e.binformat=r(16),e.utils=r(17),e.Server=r(18).Server,e.Ledger=r(19).Ledger,e.TransactionQueue=r(20).TransactionQueue,e.RangeSet=r(21).RangeSet,e.convertBase=r(22),e._test={Log:r(23),PathFind:r(24).PathFind,TransactionManager:r(25).TransactionManager},e.sjcl=r(17).sjcl,e.Wallet=r(27)({sjcl:e.sjcl}),e.types=r(26),["Remote","Request","Transaction","Account","Server"].forEach(n)},function(t,e,r){"use strict";function n(){function t(t,e){if(h.contains(n.TRANSACTION_EVENTS,e))switch(t){case"add":1===++r._transaction_listeners&&r.requestSubscribe("transactions").request();break;case"remove":0===--r._transaction_listeners&&r.requestUnsubscribe("transactions").request()}}var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s.call(this);var r=this;if(h.merge(this,h.defaults(e,n.DEFAULTS)),this.state="offline",this._server_fatal=!1,this._stand_alone=void 0,this._testnet=void 0,this._ledger_current_index=void 0,this._ledger_hash=void 0,this._ledger_time=void 0,this._connection_count=0,this._connected=!1,this._should_connect=!0,this._transaction_listeners=0,this._received_tx=new c({max:100}),this._cur_path_find=null,this.local_signing&&(this.local_sequence=!0,this.local_fee=!0),this._servers=[],this._primary_server=void 0,this.accounts={},this._accounts={},this._books={},this.secrets={},this.ledgers={current:{account_root:{}}},"boolean"!=typeof this.trusted)throw new TypeError("trusted must be a boolean");if("boolean"!=typeof this.trace)throw new TypeError("trace must be a boolean");if("boolean"!=typeof this.allow_partial_history)throw new TypeError("allow_partial_history must be a boolean");if("number"!=typeof this.max_fee)throw new TypeError("max_fee must be a number");if("number"!=typeof this.max_attempts)throw new TypeError("max_attempts must be a number");if("number"!=typeof this.fee_cushion)throw new TypeError("fee_cushion must be a number");if("boolean"!=typeof this.local_signing)throw new TypeError("local_signing must be a boolean");if("boolean"!=typeof this.local_fee)throw new TypeError("local_fee must be a boolean");if("boolean"!=typeof this.local_sequence)throw new TypeError("local_sequence must be a boolean");if("boolean"!=typeof this.canonical_signing)throw new TypeError("canonical_signing must be a boolean");if("number"!=typeof this.submission_timeout)throw new TypeError("submission_timeout must be a number");if("number"!=typeof this.last_ledger_offset)throw new TypeError("last_ledger_offset must be a number");if(!Array.isArray(this.servers))throw new TypeError("servers must be an array");this.setMaxListeners(this.max_listeners),this.servers.forEach(function(t){var e=r.addServer(t);e.setMaxListeners(r.max_listeners)}),this.on("newListener",function(e){t("add",e)}),this.on("removeListener",function(e){t("remove",e)})}function i(t){var e=void 0;h.isPlainObject(t)?e=h.merge({},t):(B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties"),e={src_account:arguments[0],dst_account:arguments[1],dst_amount:arguments[2],src_currencies:arguments[3]});var r=new E(this,e.src_account,e.dst_account,e.dst_amount,e.src_currencies);return this._cur_path_find&&this._cur_path_find.notify_superceded(),r.create(),this._cur_path_find=r,r}var o=r(28)["default"],s=r(40).EventEmitter,a=r(41),u=r(38),c=r(50),f=r(51),h=r(42),l=r(18).Server,p=r(2).Request,d=r(3).Amount,_=r(6).Currency,g=r(9).UInt160,y=r(10).UInt256,v=r(5).Transaction,m=r(4).Account,b=r(12).Meta,w=r(29).OrderBook,E=r(24).PathFind,A=r(13).SerializedObject,x=r(14).RippleError,F=r(17),C=r(30),B=r(23).internal.sub("remote");a.inherits(n,s),n.DEFAULTS={trusted:!1,trace:!1,allow_partial_history:!0,local_sequence:!0,local_fee:!0,local_signing:!0,canonical_signing:!0,fee_cushion:1.2,max_fee:1e6,max_attempts:10,submission_timeout:2e4,last_ledger_offset:3,servers:[],max_listeners:0},n.TRANSACTION_EVENTS=["transaction","transaction_all"],n.flags={account_root:{PasswordSpent:65536,RequireDestTag:131072,RequireAuth:262144,DisallowXRP:524288,DisableMaster:1048576,DefaultRipple:8388608,NoFreeze:2097152,GlobalFreeze:4194304},offer:{Passive:65536,Sell:131072},state:{LowReserve:65536,HighReserve:131072,LowAuth:262144,HighAuth:524288,LowNoRipple:1048576,HighNoRipple:2097152}},n.isValidMessage=function(t){return"object"==typeof t&&"string"==typeof t.type},n.isValidLedgerData=function(t){return"object"==typeof t&&"number"==typeof t.fee_base&&"number"==typeof t.fee_ref&&"string"==typeof t.ledger_hash&&"number"==typeof t.ledger_index&&"number"==typeof t.ledger_time&&"number"==typeof t.reserve_base&&"number"==typeof t.reserve_inc},n.isValidLoadStatus=function(t){return"number"==typeof t.load_base&&"number"==typeof t.load_factor},n.isValidated=function(t){return t&&"object"==typeof t&&t.validated===!0},n.prototype._setState=function(t){if(this.state!==t)switch(this.trace&&B.info("set_state:",t),this.state=t,this.emit("state",t),t){case"online":this._online_state="open",this._connected=!0,this.emit("connect"),this.emit("connected");break;case"offline":this._online_state="closed",this._connected=!1,this.emit("disconnect"),this.emit("disconnected")}},n.prototype.setServerFatal=function(){this._server_fatal=!0},n.prototype.setTrace=function(t){return this.trace=void 0===t||t,this},n.prototype._trace=function(){this.trace&&B.info.apply(B,arguments)},n.prototype.setSecret=function(t,e){this.secrets[t]=e},n.prototype.addServer=function(t){function e(t){i._handleMessage(t,o)}function r(){i._connection_count+=1,t.primary&&i._setPrimaryServer(o),1===i._connection_count&&i._setState("online"),i._connection_count===i._servers.length&&i.emit("ready")}function n(){i._connection_count--,0===i._connection_count&&i._setState("offline")}var i=this,o=new l(this,t);return o.on("message",e),o.on("connect",r),o.on("disconnect",n),this._servers.push(o),o},n.prototype.reconnect=function(){this._should_connect&&(B.info("reconnecting"),this._servers.forEach(function(t){t.reconnect()}))},n.prototype.connect=function(t){if(!this._servers.length)throw new Error("No servers available.");return"function"==typeof t&&this.once("connect",t),this._should_connect=!0,this._servers.forEach(function(t){t.connect()}),this},n.prototype.disconnect=function(t){if(!this._servers.length)throw new Error("No servers available, not disconnecting");var e=h.isFunction(t)?t:function(){};return this._should_connect=!1,this.isConnected()?(this.once("disconnect",e),this._servers.forEach(function(t){t.disconnect()}),this._set_state("offline"),this):(e(),this)},n.prototype._handleMessage=function(t,e){if(!n.isValidMessage(t)){var r=new x("remoteUnexpected","Unexpected response from remote: "+JSON.stringify(t));return this.emit("error",r),void B.error(r)}switch(t.type){case"ledgerClosed":this._handleLedgerClosed(t,e);break;case"serverStatus":this._handleServerStatus(t,e);break;case"transaction":this._handleTransaction(t,e);break;case"path_find":this._handlePathFind(t,e);break;default:this.trace&&B.info(t.type+": ",t)}},n.prototype.getLedgerSequence=function(){if(!this._ledger_current_index)throw new Error("Ledger sequence has not yet been initialized");return this._ledger_current_index},n.prototype._handleLedgerClosed=function(t,e){var r=this;if(n.isValidLedgerData(t)){var i=t.ledger_index>=this._ledger_current_index;(isNaN(this._ledger_current_index)||i)&&(this._ledger_time=t.ledger_time,this._ledger_hash=t.ledger_hash,this._ledger_current_index=t.ledger_index+1,this.isConnected()?this.emit("ledger_closed",t,e):this.once("connect",function(){r.emit("ledger_closed",t,e)}))}},n.prototype._handleServerStatus=function(t,e){this.emit("server_status",t,e)},n.prototype._handleTransaction=function(t,e){var r=t.transaction.hash;if(!this._received_tx.get(r)){t.validated&&this._received_tx.set(r,!0),this.trace&&B.info("tx:",t);var n=t.meta||t.metadata;n?(t.mmeta=new b(n),t.mmeta.getAffectedAccounts().forEach(function(e){this._accounts[e]&&this._accounts[e].notify(t)},this),t.mmeta.getAffectedBooks().forEach(function(e){this._books[e]&&this._books[e].notify(t)},this)):["Account","Destination"].forEach(function(e){this._accounts[t.transaction[e]]&&this._accounts[t.transaction[e]].notify(t)},this),this.emit("transaction",t,e),this.emit("transaction_all",t,e)}},n.prototype._handlePathFind=function(t,e){this._cur_path_find&&this._cur_path_find.notify_update(t),this.emit("path_find_all",t,e)},n.prototype.getLedgerHash=function(){return this._ledger_hash},n.prototype._setPrimaryServer=n.prototype.setPrimaryServer=function(t){this._primary_server&&(this._primary_server._primary=!1),this._primary_server=t,this._primary_server._primary=!0},n.prototype.isConnected=function(){return this._connected},n.prototype.getConnectedServers=function(){return this._servers.filter(function(t){return t.isConnected()})},n.prototype._getServer=n.prototype.getServer=function(){if(this._primary_server&&this._primary_server.isConnected())return this._primary_server;if(!this._servers.length)return null;var t=this.getConnectedServers();if(0===t.length||!t[0])return null;for(var e=t[0],r=e._score+e._fee,n=1;n<t.length;n++){var i=t[n],o=i._score+i._fee;r>o&&(e=i,r=o)}return e},n.prototype.request=function(t){var e=t;if("string"==typeof e){if(/^request_/.test(e)||(e="request_"+e),"function"==typeof this[e]){var r=Array.prototype.slice.call(arguments,1);return this[e].apply(this,r)}throw new Error("Command does not exist: "+e)}if(!(e instanceof p))throw new Error("Argument is not a Request");if(!this._servers.length)return e.emit("error",new Error("No servers available"));if(!this.isConnected())return this.once("connect",this.request.bind(this,e));if(null===e.server)return e.emit("error",new Error("Server does not exist"));var n=e.server||this.getServer();n?n._request(e):e.emit("error",new Error("No servers available"))},n.prototype.ping=n.prototype.requestPing=function(t,e){var r=new p(this,"ping"),n=e;switch(typeof t){case"function":n=t;break;case"string":r.setServer(t)}var i=Date.now();return r.once("success",function(){r.emit("pong",Date.now()-i)}),r.callback(n,"pong"),r},n.prototype.requestServerInfo=function(t){return new p(this,"server_info").callback(t)},n.prototype.requestLedger=function(t,e){var r=new p(this,"ledger"),n=e;switch(typeof t){case"undefined":break;case"function":n=t;break;case"object":if(!t)break;o(t).forEach(function(e){switch(e){case"full":case"expand":case"transactions":case"accounts":r.message[e]=t[e]?!0:!1;break;case"ledger":r.selectLedger(t.ledger);break;case"ledger_index":case"ledger_hash":r.message[e]=t[e];break;case"closed":case"current":case"validated":r.message.ledger_index=e}},t);break;default:r.selectLedger(t)}return r.callback(n),r},n.prototype.requestLedgerClosed=n.prototype.requestLedgerHash=function(t){return new p(this,"ledger_closed").callback(t)},n.prototype.requestLedgerHeader=function(t){return new p(this,"ledger_header").callback(t)},n.prototype.requestLedgerCurrent=function(t){return new p(this,"ledger_current").callback(t)},n.prototype.requestLedgerData=function(t,e){var r=new p(this,"ledger_data");return r.message.binary=t.binary!==!1,r.selectLedger(t.ledger),r.message.limit=t.limit,r.once("success",function(e){function i(t,e){f.setImmediate(function(){e(null,n.parseBinaryLedgerData(t))})}function o(t,n){t?r.emit("error",t):(e.state=n,r.emit("state",e))}return t.binary===!1?void r.emit("state",e):void f.mapSeries(e.state,i,o)}),r.callback(e,"state"),r},n.prototype.requestLedgerEntry=function(t,e){var r=this,n=new p(this,"ledger_entry"),i=h.isFunction(t)?t:e;return"account_root"===t&&(n.request_default=n.request,n.request=function(){var e=!0;if(!r._ledger_hash&&"account_root"===t){var i=r.ledgers.current.account_root;i||(i=r.ledgers.current.account_root={});var o=r.ledgers.current.account_root[n.message.account_root];if(o)n.emit("success",{node:o}),e=!1;else switch(t){case"account_root":n.once("success",function(t){r.ledgers.current.account_root[t.node.Account]=t.node})}}e&&n.request_default()}),n.callback(i),n},n.prototype.requestSubscribe=function(t,e){var r=new p(this,"subscribe");return t&&(r.message.streams=Array.isArray(t)?t:[t]),r.callback(e),r},n.prototype.requestUnsubscribe=function(t,e){var r=new p(this,"unsubscribe");return t&&(r.message.streams=Array.isArray(t)?t:[t]),r.callback(e),r},n.prototype.requestTransactionEntry=function(t,e){var r=void 0,n=e;if(h.isPlainObject(t))r=h.merge({ledger:t.ledger_index||t.ledger_hash},t);else{B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties");var i=Array.prototype.slice.call(arguments);h.isFunction(h.last(i))&&(n=i.pop()),r={hash:i.shift(),ledger:i.shift()}}var o=new p(this,"transaction_entry");switch(o.txHash(r.hash),typeof r.ledger){case"string":case"number":o.selectLedger(r.ledger);break;case"undefined":o.ledgerIndex("validated");break;default:throw new Error("ledger must be a ledger index or hash")}return o.callback(n),o},n.prototype.requestTransaction=n.prototype.requestTx=function(t,e){var r=void 0,i=e;if(h.isPlainObject(t))r=h.merge({},t);else{B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties");var o=Array.prototype.slice.call(arguments);h.isFunction(h.last(o))&&(i=o.pop()),r={hash:o.shift(),binary:o.shift()}}var s=new p(this,"tx");return s.message.binary=r.binary!==!1,s.message.transaction=r.hash,s.once("success",function(t){return r.binary===!1?void s.emit("transaction",t):void s.emit("transaction",n.parseBinaryTransaction(t))}),s.callback(i,"transaction"),s},n.accountRequest=function(t,e,r){var n=void 0,i=r;if(h.isPlainObject(e))n=h.merge({},e);else{B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties");var o=Array.prototype.slice.call(arguments);h.isFunction(h.last(o))&&(i=o.pop()),n={account:o.shift(),peer:o.shift(),ledger:o.shift(),limit:o.shift(),marker:o.shift()}}var s=n,a=s.account,u=s.ledger,c=s.peer,f=s.limit,l=s.marker;if(l&&!(Number(u)>0||y.is_valid(u)))throw new Error("A ledger_index or ledger_hash must be provided when using a marker");var d=new p(this,t);return a&&(a=g.json_rewrite(a),d.message.account=a),d.selectLedger(u),g.is_valid(c)&&(d.message.peer=g.json_rewrite(c)),isNaN(f)||(f=Number(f),f>1e9&&(f=1e9),0>f&&(f=0),d.message.limit=f),l&&(d.message.marker=l),d.callback(i),d},n.prototype.requestAccountInfo=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];var i=["account_info"].concat(e);return n.accountRequest.apply(this,i)},n.prototype.requestAccountCurrencies=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];var i=["account_currencies"].concat(e);return n.accountRequest.apply(this,i)},n.prototype.requestAccountLines=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];var i=["account_lines"].concat(e);return n.accountRequest.apply(this,i)},n.prototype.requestAccountOffers=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];var i=["account_offers"].concat(e);return n.accountRequest.apply(this,i)},n.prototype.requestAccountTransactions=n.prototype.requestAccountTx=function(t,e){var r=new p(this,"account_tx");return t.binary=t.binary!==!1,void 0!==t.min_ledger&&(t.ledger_index_min=t.min_ledger),void 0!==t.max_ledger&&(t.ledger_index_max=t.max_ledger),t.binary&&void 0===t.parseBinary&&(t.parseBinary=!0),o(t).forEach(function(t){switch(t){case"account":case"ledger_index_min":case"ledger_index_max":case"binary":case"count":case"descending":case"offset":case"limit":case"forward":case"marker":r.message[t]=this[t]}},t),r.once("success",function(e){function i(t,e){f.setImmediate(function(){e(null,n.parseBinaryAccountTransaction(t))})}function o(t,n){t?r.emit("error",t):(e.transactions=n,r.emit("transactions",e))}return t.parseBinary?void f.mapSeries(e.transactions,i,o):void r.emit("transactions",e)}),r.callback(e,"transactions"),r},n.parseBinaryAccountTransaction=function(t){var e=new A(t.tx_blob),r=e.to_json(),n=new A(t.meta).to_json(),i={validated:t.validated};if(i.meta=n,i.tx=r,i.tx.hash=e.hash(C.HASH_TX_ID).to_hex(),i.tx.ledger_index=t.ledger_index,i.tx.inLedger=t.ledger_index,"object"==typeof n.DeliveredAmount)i.meta.delivered_amount=n.DeliveredAmount;else switch(typeof r.Amount){case"string":case"object":i.meta.delivered_amount=r.Amount}return i},n.parseBinaryTransaction=function(t){var e=new A(t.tx).to_json(),r=new A(t.meta).to_json(),n=e;switch(n.date=t.date,n.hash=t.hash,n.inLedger=t.inLedger,n.ledger_index=t.ledger_index,n.meta=r,n.validated=t.validated,typeof r.DeliveredAmount){case"string":case"object":n.meta.delivered_amount=r.DeliveredAmount;break;default:switch(typeof e.Amount){case"string":case"object":n.meta.delivered_amount=e.Amount}}return n},n.parseBinaryLedgerData=function(t){var e=new A(t.data).to_json();return e.index=t.index,e},n.prototype.requestTransactionHistory=n.prototype.requestTxHistory=function(t,e){var r=new p(this,"tx_history"),n=t,i=e;return h.isPlainObject(n)?n=n.start:B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties"),r.message.start=n,r.callback(i),r},n.prototype.requestBookOffers=function(t,e){var r=void 0,n=e;if(t.gets||t.taker_gets)r=h.merge({pays:t.taker_pays,gets:t.taker_gets},t);else{B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties");var i=Array.prototype.slice.call(arguments);h.isFunction(h.last(i))&&(n=i.pop()),r={gets:i.shift(),pays:i.shift(),taker:i.shift(),ledger:i.shift(),limit:i.shift()}}var o=r,s=o.gets,a=o.pays,u=o.taker,c=o.ledger,f=o.limit,l=new p(this,"book_offers");return l.message.taker_gets={currency:_.json_rewrite(s.currency,{force_hex:!0})},_.from_json(l.message.taker_gets.currency).is_native()||(l.message.taker_gets.issuer=g.json_rewrite(s.issuer)),l.message.taker_pays={currency:_.json_rewrite(a.currency,{force_hex:!0})},_.from_json(l.message.taker_pays.currency).is_native()||(l.message.taker_pays.issuer=g.json_rewrite(a.issuer)),l.message.taker=u?u:g.ACCOUNT_ONE,l.selectLedger(c),isNaN(f)||(f=Number(f),f>1e9&&(f=1e9),0>f&&(f=0),l.message.limit=f),l.callback(n),l},n.prototype.requestWalletAccounts=function(t,e){F.assert(this.trusted);var r=void 0,n=e;h.isPlainObject(t)?r=h.merge({},t):(B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties"),r={seed:arguments[0]});var i=new p(this,"wallet_accounts");return i.message.seed=r.seed,i.callback(n),i},n.prototype.requestSign=function(t,e){F.assert(this.trusted);var r=void 0,n=e;h.isPlainObject(t)?r=h.merge({},t):(B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties"),r={secret:arguments[0],tx_json:arguments[1]},n=arguments[2]);var i=new p(this,"sign");return i.message.secret=r.secret,i.message.tx_json=r.tx_json,i.callback(n),i},n.prototype.requestSubmit=function(t){return new p(this,"submit").callback(t)},n.prototype._serverPrepareSubscribe=function(t,e){function r(e){n._stand_alone=!!e.stand_alone,n._testnet=!!e.testnet,n._handleLedgerClosed(e,t),n.emit("subscribed")}var n=this,i=["ledger","server"],o=h.isFunction(t)?t:e;this._transaction_listeners&&i.push("transactions");var s=this.requestSubscribe(i);return s.on("error",function(t){n.trace&&B.info("Initial server subscribe failed",t)}),s.once("success",r),n.emit("prepare_subscribe",s),s.callback(o,"subscribed"),s},n.prototype.ledgerAccept=n.prototype.requestLedgerAccept=function(t){var e=new p(this,"ledger_accept");return this._stand_alone?(this.once("ledger_closed",function(t){e.emit("ledger_closed",t)}),e.callback(t,"ledger_closed"),e.request(),e):void this.emit("error",new x("notStandAlone"))},n.accountRootRequest=function(t,e,r,n){var i=void 0,o=n;if(h.isPlainObject(r))i=h.merge({},r);else{B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties");var s=Array.prototype.slice.call(arguments);h.isFunction(h.last(s))&&(o=s.pop()),i={account:s.shift(),ledger:s.shift()}}var a=this.requestLedgerEntry("account_root");return a.accountRoot(i.account),a.selectLedger(i.ledger),a.once("success",function(r){a.emit(t,e(r))}),a.callback(o,t),a},n.prototype.requestAccountBalance=function(){function t(t){return d.from_json(t.node.Balance)}for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var o=["account_balance",t].concat(r);return n.accountRootRequest.apply(this,o)},n.prototype.requestAccountFlags=function(){function t(t){return t.node.Flags}for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var o=["account_flags",t].concat(r);return n.accountRootRequest.apply(this,o)},n.prototype.requestOwnerCount=function(){function t(t){return t.node.OwnerCount}for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var o=["owner_count",t].concat(r);return n.accountRootRequest.apply(this,o)},n.prototype.getAccount=function(t){return this._accounts[g.json_rewrite(t)]},n.prototype.addAccount=function(t){var e=new m(this,t);return e.isValid()&&(this._accounts[t]=e),e},n.prototype.account=n.prototype.findAccount=function(t){var e=this.getAccount(t);return e?e:this.addAccount(t)},n.prototype.pathFind=n.prototype.createPathFind=i,n.prepareTrade=function(t,e){var r=_.from_json(t).is_native()?"":"/"+e;return t+r},n.prototype.book=n.prototype.createOrderBook=function(t){var e=void 0;1===arguments.length?e=h.merge({},t):(B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties"),e={currency_gets:arguments[0],issuer_gets:arguments[1],currency_pays:arguments[2],issuer_pays:arguments[3]});var r=n.prepareTrade(e.currency_gets,e.issuer_gets),i=n.prepareTrade(e.currency_pays,e.issuer_pays),o=r+":"+i;if(this._books.hasOwnProperty(o))return this._books[o];var s=new w(this,e.currency_gets,e.issuer_gets,e.currency_pays,e.issuer_pays,o);return s.is_valid()&&(this._books[o]=s),s},n.prototype.accountSeq=n.prototype.getAccountSequence=function(t,e){var r=g.json_rewrite(t),n=this.accounts[r];if(!n)return 0/0;var i=n.seq,o={ADVANCE:1,REWIND:-1}[e.toUpperCase()]||0;return n.seq+=o,i},n.prototype.setAccountSequence=n.prototype.setAccountSeq=function(t,e){var r=g.json_rewrite(t);this.accounts.hasOwnProperty(r)||(this.accounts[r]={}),this.accounts[r].seq=e},n.prototype.accountSeqCache=function(t,e){function r(t){delete a.caching_seq_request;var e=t.node.Sequence;a.seq=e,u.emit("success_cache",t)}function n(t){delete a.caching_seq_request,u.emit("error_cache",t)}var i=void 0,o=e;if(h.isPlainObject(t))i=h.merge({},t);else{B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties");var s=Array.prototype.slice.call(arguments);h.isFunction(h.last(s))&&(o=s.pop()),i={account:s.shift(),ledger:s.shift()}}this.accounts.hasOwnProperty(i.account)||(this.accounts[i.account]={});var a=this.accounts[i.account],u=a.caching_seq_request;return u||(u=this.requestLedgerEntry("account_root"),u.accountRoot(i.account),h.isUndefined(i.ledger)||u.selectLedger(i.ledger),u.once("success",r),u.once("error",n),a.caching_seq_request=u),u.callback(o,"success_cache","error_cache"),u},n.prototype.dirtyAccountRoot=function(t){var e=g.json_rewrite(t);delete this.ledgers.current.account_root[e]},n.prototype.requestOffer=function(t,e){var r=this.requestLedgerEntry("offer");return t.account&&t.sequence?r.offerId(t.account,t.sequence):t.index&&r.offerIndex(t.index),r.ledgerSelect(t.ledger),r.once("success",function(t){r.emit("offer",t)}),r.callback(e,"offer"),r},n.prototype.requestRippleBalance=function(t,e){function r(t){var e=t.node,r=d.from_json(e.LowLimit),i=d.from_json(e.HighLimit),o=d.from_json(e.Balance),a=g.from_json(n.account).equals(i.issuer());s.emit("ripple_state",{account_balance:(a?o.negate():o.clone()).parse_issuer(n.account),peer_balance:(a?o.clone():o.negate()).parse_issuer(n.issuer),account_limit:(a?i:r).clone().parse_issuer(n.issuer),peer_limit:(a?r:i).clone().parse_issuer(n.account),account_quality_in:a?e.HighQualityIn:e.LowQualityIn,peer_quality_in:a?e.LowQualityIn:e.HighQualityIn,account_quality_out:a?e.HighQualityOut:e.LowQualityOut,peer_quality_out:a?e.LowQualityOut:e.HighQualityOut})}var n=void 0,i=e;if(h.isPlainObject(t))n=h.merge({},t);else{B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties");var o=Array.prototype.slice.call(arguments);h.isFunction(h.last(o))&&(i=o.pop()),n={account:o.shift(),issuer:o.shift(),currency:o.shift(),ledger:o.shift()}}var s=this.requestLedgerEntry("ripple_state");return s.rippleState(n.account,n.issuer,n.currency),h.isUndefined(n.ledger)||s.selectLedger(n.ledger),s.once("success",r),s.callback(i,"ripple_state"),s},n.prepareCurrency=n.prepareCurrencies=function(t){var e={};return t.hasOwnProperty("issuer")&&(e.issuer=g.json_rewrite(t.issuer)),t.hasOwnProperty("currency")&&(e.currency=_.json_rewrite(t.currency,{force_hex:!0})),e},n.prototype.requestRipplePathFind=function(t,e){var r=void 0,i=e;if(h.isPlainObject(t))r=h.merge({source_account:t.src_account,destination_account:t.dst_account,destination_amount:t.dst_amount,source_currencies:t.src_currencies},t);else{B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties");var o=Array.prototype.slice.call(arguments);h.isFunction(h.last(o))&&(i=o.pop()),r={source_account:o.shift(),destination_account:o.shift(),destination_amount:o.shift(),source_currencies:o.shift()}}var s=new p(this,"ripple_path_find");return s.message.source_account=g.json_rewrite(r.source_account),s.message.destination_account=g.json_rewrite(r.destination_account),s.message.destination_amount=d.json_rewrite(r.destination_amount),Array.isArray(r.source_currencies)&&(s.message.source_currencies=r.source_currencies.map(n.prepareCurrency)),s.callback(i),s},n.prototype.requestPathFindCreate=function(t,e){var r=void 0,i=e;if(h.isPlainObject(t))r=h.merge({source_account:t.src_account,destination_account:t.dst_account,destination_amount:t.dst_amount,source_currencies:t.src_currencies},t);else{B.warn("DEPRECATED: First argument to request constructor should be an object containing request properties");var o=Array.prototype.slice.call(arguments);h.isFunction(h.last(o))&&(i=o.pop()),r={source_account:o.shift(),destination_account:o.shift(),destination_amount:o.shift(),source_currencies:o.shift()}}var s=new p(this,"path_find");return s.message.subcommand="create",s.message.source_account=g.json_rewrite(r.source_account),s.message.destination_account=g.json_rewrite(r.destination_account),s.message.destination_amount=d.json_rewrite(r.destination_amount),Array.isArray(r.source_currencies)&&(s.message.source_currencies=r.source_currencies.map(n.prepareCurrency)),s.callback(i),s},n.prototype.requestPathFindClose=function(t){var e=new p(this,"path_find");return e.message.subcommand="close",e.callback(t),e},n.prototype.requestUnlList=function(t){return new p(this,"unl_list").callback(t)},n.prototype.requestUnlAdd=function(t,e,r){var n=new p(this,"unl_add");return n.message.node=t,e&&(n.message.comment=void 0),n.callback(r),n},n.prototype.requestUnlDelete=function(t,e){var r=new p(this,"unl_delete");return r.message.node=t,r.callback(e),r},n.prototype.requestPeers=function(t){return new p(this,"peers").callback(t)},n.prototype.requestConnect=function(t,e,r){var n=new p(this,"connect");return n.message.ip=t,e&&(n.message.port=e),n.callback(r),n},n.prototype.transaction=n.prototype.createTransaction=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=new v(this);if(0===arguments.length)return r;u.strictEqual(typeof t,"string","TransactionType must be a string");var n={Payment:r.payment,AccountSet:r.accountSet,TrustSet:r.trustSet,OfferCreate:r.offerCreate,OfferCancel:r.offerCancel,SetRegularkey:r.setRegularKey},i=n[t];if(!i)throw new Error("TransactionType must be a valid transaction type");return i.call(r,e)},n.prototype.feeTx=function(t){var e=this.getServer();if(!e)throw new Error("No connected servers");return e._feeTx(t)},n.prototype.feeTxUnit=function(){var t=this.getServer();if(!t)throw new Error("No connected servers");return t._feeTxUnit()},n.prototype.reserve=function(t){var e=this.getServer();if(!e)throw new Error("No connected servers");return e._reserve(t)},e.Remote=n},function(t,e,r){"use strict";function n(t,e){i.call(this),this.remote=t,this.requested=!1,this.reconnectTimeout=3e3,this.successEvent="success",this.errorEvent="error",this.message={command:e,id:void 0}}var i=r(40).EventEmitter,o=r(41),s=r(51),a=r(9).UInt160,u=r(6).Currency,c=r(14).RippleError;o.inherits(n,i),n.prototype.request=function(t,e){return this.emit("before"),this.callback(e),this.requested?this:(this.requested=!0,this.on("error",function(){}),this.emit("request",this.remote),Array.isArray(t)?t.forEach(function(t){this.setServer(t),this.remote.request(this)},this):this.remote.request(this),this)},n.prototype.filter=n.prototype.addFilter=n.prototype.broadcast=function(){function t(e,s){function a(){clearTimeout(o[u]),o[u]=null,t(e,s)}if(e.isConnected())return n.once("proposed",function(t){i=t,s(r(t))}),e._request(n);var u=e.getServerID();o[u]=setTimeout(function(){e.removeListener("connect",a),s(!1)},n.reconnectTimeout),e.once("connect",a)}function e(t){a.call(n,t?"success":"error",i)}var r=arguments.length<=0||void 0===arguments[0]?Boolean:arguments[0],n=this;if(!this.requested)return this.once("before",function(){n.requested=!0,n.broadcast(r)}),this;var i=new Error("No servers available"),o={},a=this.emit;this.emit=function(t,e,r){switch(t){case"success":case"error":a.call(n,"proposed",e,r);break;default:a.apply(n,arguments)}};var u=this.remote._servers.filter(function(t){return!(!t.isConnected()&&!t._shouldConnect||n.message.hasOwnProperty("ledger_index")&&!t.hasLedger(n.message.ledger_index)||n.message.hasOwnProperty("ledger_index_min")&&-1!==n.message.ledger_index_min&&!t.hasLedger(n.message.ledger_index_min)||n.message.hasOwnProperty("ledger_index_max")&&-1!==n.message.ledger_index_max&&!t.hasLedger(n.message.ledger_index_max))});return s.some(u,t,e),this},n.prototype.cancel=function(){return this.removeAllListeners(),this.on("error",function(){}),this},n.prototype.setCallback=function(t){return"function"==typeof t&&this.callback(t),this},n.prototype.setReconnectTimeout=function(t){return"number"!=typeof t||isNaN(t)||(this.reconnectTimeout=t),this},n.prototype.callback=function(t,e,r){function n(e){s||(s=!0,t.call(o,null,e))}function i(e){s||(s=!0,e instanceof c?t.call(o,e):t.call(o,new c(e)))}var o=this;if("function"!=typeof t)return this;"string"==typeof e&&(this.successEvent=e),"string"==typeof r&&(this.errorEvent=r);var s=!1;return this.once(this.successEvent,n),this.once(this.errorEvent,i),this.request(),this},n.prototype.timeout=function(t,e){function r(){n.timeout(t,e)}var n=this;if(!this.requested)return this.once("request",r);var i=this.emit,o=!1,s=setTimeout(function(){o=!0,"function"==typeof e&&e(),i.call(n,"timeout"),n.cancel()},t);return this.emit=function(){o||(clearTimeout(s),i.apply(n,arguments))},this},n.prototype.setServer=function(t){var e=null;
switch(typeof t){case"object":e=t;break;case"string":for(var r=this.remote._servers,n=0,i=void 0;i=r[n];n++)if(i._url===t){e=i;break}}return this.server=e,this},n.prototype.buildPath=function(t){if(this.remote.local_signing)throw new Error("`build_path` is completely ignored when doing local signing as `Paths` is a component of the signed blob. The `tx_blob` is signed,sealed and delivered, and the txn unmodified after");return t?this.message.build_path=!0:delete this.message.build_path,this},n.prototype.ledgerChoose=function(t){return t?this.message.ledger_index=this.remote._ledger_current_index:this.message.ledger_hash=this.remote._ledger_hash,this},n.prototype.ledgerHash=function(t){return this.message.ledger_hash=t,this},n.prototype.ledgerIndex=function(t){return this.message.ledger_index=t,this},n.prototype.selectLedger=n.prototype.ledgerSelect=function(t){switch(t){case"current":case"closed":case"validated":this.message.ledger_index=t;break;default:Number(t)&&isFinite(Number(t))?this.message.ledger_index=Number(t):/^[A-F0-9]{64}$/.test(t)&&(this.message.ledger_hash=t)}return this},n.prototype.accountRoot=function(t){return this.message.account_root=a.json_rewrite(t),this},n.prototype.index=function(t){return this.message.index=t,this},n.prototype.offerId=function(t,e){return this.message.offer={account:a.json_rewrite(t),seq:e},this},n.prototype.offerIndex=function(t){return this.message.offer=t,this},n.prototype.secret=function(t){return t&&(this.message.secret=t),this},n.prototype.txHash=function(t){return this.message.tx_hash=t,this},n.prototype.txJson=function(t){return this.message.tx_json=t,this},n.prototype.txBlob=function(t){return this.message.tx_blob=t,this},n.prototype.rippleState=function(t,e,r){return this.message.ripple_state={currency:r,accounts:[a.json_rewrite(t),a.json_rewrite(e)]},this},n.prototype.setAccounts=n.prototype.accounts=function(t,e){var r=Array.isArray(t)?t:[t],n=r.map(function(t){return a.json_rewrite(t)});return e?this.message.accounts_proposed=n:this.message.accounts=n,this},n.prototype.addAccount=function(t,e){if(Array.isArray(t))return t.forEach(this.addAccount,this),this;var r=a.json_rewrite(t),n=e===!0?"accounts_proposed":"accounts";return this.message[n]=(this.message[n]||[]).concat(r),this},n.prototype.setAccountsProposed=n.prototype.rtAccounts=n.prototype.accountsProposed=function(t){return this.accounts(t,!0)},n.prototype.addAccountProposed=function(t){return Array.isArray(t)?(t.forEach(this.addAccountProposed,this),this):this.addAccount(t,!0)},n.prototype.setBooks=n.prototype.books=function(t,e){this.message.books=[];for(var r=0,n=t.length;n>r;r++){var i=t[r];this.addBook(i,e)}return this},n.prototype.addBook=function(t,e){function r(e){if(!t[e])throw new Error("Missing "+e);var r=n[e]={currency:u.json_rewrite(t[e].currency,{force_hex:!0})};u.from_json(r.currency).is_native()||(r.issuer=a.json_rewrite(t[e].issuer))}if(Array.isArray(t))return t.forEach(this.addBook,this),this;var n={};return["taker_gets","taker_pays"].forEach(r),"boolean"!=typeof e?n.snapshot=!0:e?n.snapshot=!0:delete n.snapshot,t.both&&(n.both=!0),this.message.books=(this.message.books||[]).concat(n),this},n.prototype.addStream=function(t,e){if(Array.isArray(e))switch(t){case"accounts":this.addAccount(e);break;case"accounts_proposed":this.addAccountProposed(e);break;case"books":this.addBook(e)}else if(arguments.length>1){for(var r in arguments)this.addStream(arguments[r]);return this}return Array.isArray(this.message.streams)||(this.message.streams=[]),-1===this.message.streams.indexOf(t)&&this.message.streams.push(t),this},e.Request=n},function(t,e,r){"use strict";function n(t){return new l(t).toPower(-1)}function i(){this._value=new l(0/0),this._is_native=!0,this._currency=new f,this._issuer=new u}var o=r(38),s=r(39),a=r(17),u=r(9).UInt160,c=r(11).Seed,f=r(6).Currency,h=r(49),l=h.another({ROUNDING_MODE:h.ROUND_HALF_UP,DECIMAL_PLACES:40});i.strict_mode=!0;var p={currency_xns:0,currency_one:1,xns_precision:6,bi_5:new l(5),bi_7:new l(7),bi_10:new l(10),bi_1e14:new l(1e14),bi_1e16:new l(1e16),bi_1e17:new l(1e17),bi_1e32:new l(1e32),bi_man_max_value:new l("9999999999999999"),bi_man_min_value:new l(1e15),bi_xns_max:new l(1e17),bi_xns_min:new l(-1e17),bi_xns_unit:new l(1e6),cMinOffset:-96,cMaxOffset:80,max_value:"9999999999999999e80",min_value:"-1000000000000000e-96"},d=new l(1e11),_=new l(p.max_value),g=new l(p.min_value).abs();s(i,p),e.consts=p,i.text_full_rewrite=function(t){return i.from_json(t).to_text_full()},i.json_rewrite=function(t){return i.from_json(t).to_json()},i.from_number=function(t){return(new i).parse_number(t)},i.from_json=function(t){return(new i).parse_json(t)},i.from_quality=function(t,e,r,n){return(new i).parse_quality(t,e,r,n)},i.from_human=function(t,e){return(new i).parse_human(t,e)},i.is_valid=function(t){return i.from_json(t).is_valid()},i.is_valid_full=function(t){return i.from_json(t).is_valid_full()},i.NaN=function(){var t=new i;return t._value=new l(0/0),t},i.prototype._set_value=function(t,e){o(t instanceof l),this._value=t.isZero()&&t.isNegative()?t.negated():t,this.canonicalize(e),this._check_limits()},i.prototype.abs=function(){return this.clone(this.is_negative())},i.prototype.add=function(t){var e=i.from_json(t);return this.is_comparable(e)?this._copy(this._value.plus(e._value)):new i(0/0)},i.prototype.subtract=function(t){return this.add(i.from_json(t).negate())},i.prototype.multiply=function(t){var e=i.from_json(t),r=e.is_native()?e._value.times(i.bi_xns_unit):e._value;return this._copy(this._value.times(r))},i.prototype.scale=function(t){return this._copy(this._value.times(t))},i.prototype.divide=function(t){var e=i.from_json(t);if(!this.is_valid())throw new Error("Invalid dividend");if(!e.is_valid())throw new Error("Invalid divisor");if(e.is_zero())throw new Error("divide by zero");var r=e.is_native()?e._value.times(i.bi_xns_unit):e._value;return this._copy(this._value.dividedBy(r))},i.prototype.ratio_human=function(t,e){e=s({},e);var r=this.clone();return t=i.from_json(t),r.is_valid()&&t.is_valid()?t.is_zero()?new i(0/0):(e.reference_date&&(t=t.applyInterest(e.reference_date)),t._is_native&&r._set_value(r._value.times(i.bi_xns_unit)),r.divide(t)):new i(0/0)},i.prototype.product_human=function(t,e){if(e=e||{},t=i.from_json(t),!this.is_valid()||!t.is_valid())return new i(0/0);e.reference_date&&(t=t.applyInterest(e.reference_date));var r=this.multiply(t);return t._is_native&&r._set_value(r._value.dividedBy(i.bi_xns_unit)),r},i.prototype._invert=function(){return this._set_value(n(this._value)),this},i.prototype.invert=function(){return this.clone()._invert()},i.prototype.canonicalize=function(t){this._value=this._is_native?this._value.round(6,l.ROUND_DOWN):new l(t?this._value.toPrecision(16,t):this._value.toPrecision(16))},i.prototype._check_limits=function(){if(!i.strict_mode)return this;if(this._value.isNaN()||this._value.isZero())return this;var t=this._value.absoluteValue();if(this._is_native){if(t.greaterThan(d))throw new Error("Exceeding max value of "+d.toString())}else{if(t.lessThan(g))throw new Error("Exceeding min value of "+g.toString());if(t.greaterThan(_))throw new Error("Exceeding max value of "+_.toString())}return this},i.prototype.clone=function(t){return this.copyTo(new i,t)},i.prototype._copy=function(t){var e=this.clone();return e._set_value(t),e},i.prototype.compareTo=function(t){var e=i.from_json(t);return this.is_comparable(e)?this._value.comparedTo(e._value):new i(0/0)},i.prototype.copyTo=function(t,e){return t._value=e?this._value.negated():this._value,t._is_native=this._is_native,t._currency=this._currency,t._issuer=this._issuer,t},i.prototype.currency=function(){return this._currency},i.prototype.equals=function(t,e){return t instanceof i?this.is_valid()&&t.is_valid()&&this._is_native===t._is_native&&this._value.equals(t._value)&&(this._is_native||this._currency.equals(t._currency)&&(e||this._issuer.equals(t._issuer))):this.equals(i.from_json(t))},i.prototype.is_comparable=function(t){return this.is_valid()&&t.is_valid()&&this._is_native===t._is_native},i.prototype.is_native=function(){return this._is_native},i.prototype.is_negative=function(){return this._value.isNegative()},i.prototype.is_positive=function(){return!this.is_zero()&&!this.is_negative()},i.prototype.is_valid=function(){return!this._value.isNaN()},i.prototype.is_valid_full=function(){return this.is_valid()&&this._currency.is_valid()&&this._issuer.is_valid()},i.prototype.is_zero=function(){return this._value.isZero()},i.prototype.issuer=function(){return this._issuer},i.prototype.negate=function(){return this.clone("NEGATE")},i.prototype.parse_human=function(t,e){function r(t){return isFinite(t)&&""!==t&&null!==t}e=e||{};var n,o,s=/^[a-fA-F0-9]{40}$/,a=/^([a-zA-Z]{3}|[0-9]{3})$/,u=t.split(" ").filter(function(t){return""!==t});if(1===u.length){if(r(u[0]))n=u[0],o="XRP";else if(n=u[0].slice(0,-3),o=u[0].slice(-3),!r(n)||!o.match(a))return new i(0/0)}else{if(2!==u.length)return new i(0/0);if(r(u[0])&&u[1].match(s))n=u[0],o=u[1];else if(u[0].match(a)&&r(u[1]))n=u[1],o=u[0];else{if(!r(u[0])||!u[1].match(a))return new i(0/0);n=u[0],o=u[1]}}if(o=o.toUpperCase(),this.set_currency(o),this._is_native="XRP"===o,this._set_value(new l(n)),e.reference_date&&this._currency.has_interest()){var c=this._currency.get_interest_at(e.reference_date);this._set_value(this._value.dividedBy(c.toString()))}return this},i.prototype.parse_issuer=function(t){return this._issuer=u.from_json(t),this},i.prototype.parse_quality=function(t,e,r,o){o=o||{};var s=f.from_json(o.base_currency),a=t.substring(t.length-14),c=t.substring(t.length-16,t.length-14),h=new l(a,16),p=parseInt(c,16)-100,d=new l(h.toString()+"e"+p.toString());if(this._currency=f.from_json(e),this._issuer=u.from_json(r),this._is_native=this._currency.is_native(),this._is_native&&s.is_native())throw new Error("XRP/XRP quality is not allowed");var _=o.inverse?n(d):d,g=_;if(o.xrp_as_drops||(this._is_native?g=_.div(i.bi_xns_unit):s.is_valid()&&s.is_native()&&(g=_.times(i.bi_xns_unit))),this._set_value(g),o.reference_date&&s.is_valid()&&s.has_interest()){var y=s.get_interest_at(o.reference_date);this._set_value(this._value.dividedBy(y.toString()))}return this},i.prototype.parse_number=function(t){return this._is_native=!1,this._currency=f.from_json(1),this._issuer=u.from_json(1),this._set_value(new l(t)),this},i.prototype.parse_json=function(t){switch(typeof t){case"string":var e=t.match(/^([^/]+)\/([^/]+)(?:\/(.+))?$/);e?(this._currency=f.from_json(e[2]),this._issuer=u.from_json(e[3]?e[3]:"1"),this.parse_value(e[1])):(this.parse_native(t),this._currency=f.from_json("0"),this._issuer=u.from_json("0"));break;case"number":this.parse_json(String(t));break;case"object":if(null===t)break;t instanceof i?t.copyTo(this):t.hasOwnProperty("value")&&(this._currency.parse_json(t.currency,!0),"string"==typeof t.issuer&&this._issuer.parse_json(t.issuer),this.parse_value(t.value));break;default:this._set_value(new l(0/0))}return this},i.prototype.parse_native=function(t){if(t&&"string"==typeof t&&!isNaN(t)){if(t.indexOf(".")>=0)throw new Error("Native amounts must be specified in integer drops");var e=new l(t);this._is_native=!0,this._set_value(e.dividedBy(i.bi_xns_unit))}else this._set_value(new l(0/0));return this},i.prototype.parse_value=function(t){return this._is_native=!1,this._set_value(new l(t),l.ROUND_DOWN),this},i.prototype.set_currency=function(t){return this._currency=f.from_json(t),this._is_native=this._currency.is_native(),this},i.prototype.set_issuer=function(t){return this._issuer=t instanceof u?t:u.from_json(t),this},i.prototype.to_number=function(){return Number(this.to_text())},i.prototype.to_text=function(){if(!this.is_valid())return"NaN";if(this._is_native)return this._value.times(i.bi_xns_unit).toString();var t=this._value.e-15,e=this._value.isNegative()?"-":"",r=a.getMantissaDecimalString(this._value.absoluteValue());if(0!==t&&(-25>t||t>-4))return e+r.toString()+"e"+t.toString();var n="000000000000000000000000000"+r.toString()+"00000000000000000000000",o=n.substring(0,t+43),s=n.substring(t+43),u=o.match(/[1-9].*$/),c=s.match(/[1-9]0*$/);return e+(u?u[0]:"0")+(c?"."+s.substring(0,1+s.length-c[0].length):"")},i.prototype.applyInterest=function(t){if(!this._currency.has_interest())return this;var e=this._currency.get_interest_at(t);return this._copy(this._value.times(e.toString()))},i.prototype.to_human=function(t){if(t=t||{},!this.is_valid())return"NaN";var e=this;t.reference_date&&(e=this.applyInterest(t.reference_date));var r=e._value.isNegative(),n=e._value.abs().toFixed(),i=n.split("."),o=i[0],s=2===i.length?i[1]:"";if(o=o.replace(/^0*/,""),s=s.replace(/0*$/,""),s.length||!t.skip_empty_fraction){if("number"==typeof t.precision){var u=Math.max(0,t.precision);u=Math.min(u,s.length);var c=Number("0."+s).toFixed(u);for(1>c?s=c.substring(2):(o=(Number(o)+1).toString(),s="");s.length<u;)s="0"+s}if("number"==typeof t.max_sig_digits){var f=0===Number(o),h=f?0:o.length,l=f?s.replace(/^0*/,""):s;h+=l.length;var p=h-t.max_sig_digits;p=Math.max(p,0),p=Math.min(p,s.length),p>0&&(s=s.slice(0,-p))}if("number"==typeof t.min_precision)for(t.min_precision=Math.max(0,t.min_precision);s.length<t.min_precision;)s+="0"}if(t.group_sep!==!1){var d="string"==typeof t.group_sep?t.group_sep:",",_=a.chunkString(o,t.group_width||3,!0);o=_.join(d)}var g="";return r&&t.signed!==!1&&(g+="-"),g+=o.length?o:"0",g+=s.length?"."+s:""},i.prototype.to_human_full=function(t){t=t||{};var e=this.to_human(t),r=this._currency.to_human(),n=this._issuer.to_json(t),i=e+"/"+r;return this.is_native()?i:i+"/"+n},i.prototype.to_json=function(){if(this._is_native)return this.to_text();var t={value:this.to_text(),currency:this._currency.has_interest()?this._currency.to_hex():this._currency.to_json()};return this._issuer.is_valid()&&(t.issuer=this._issuer.to_json()),t},i.prototype.to_text_full=function(t){return this.is_valid()?this._is_native?this.to_human()+"/XRP":this.to_text()+"/"+this._currency.to_json()+"/"+this._issuer.to_json(t):"NaN"},i.prototype.not_equals_why=function(t,e){if("string"==typeof t)return this.not_equals_why(i.from_json(t));if(!(t instanceof i))return"Not an Amount";if(!this.is_valid()||!t.is_valid())return"Invalid amount.";if(this._is_native!==t._is_native)return"Native mismatch.";var r=this._is_native?"XRP":"Non-XRP";if(!this._value.isZero()&&this._value.negated().equals(t._value))return r+" sign differs.";if(!this._value.equals(t._value))return r+" value differs.";if(!this._is_native){if(!this._currency.equals(t._currency))return"Non-XRP currency differs.";if(!e&&!this._issuer.equals(t._issuer))return"Non-XRP issuer differs: "+t._issuer.to_json()+"/"+this._issuer.to_json()}},e.Amount=i,e.Currency=f,e.Seed=c,e.UInt160=u},function(t,e,r){"use strict";function n(t,e){function r(t){~n.subscribeEvents.indexOf(t)&&(!h._subs&&h._remote._connected&&h._remote.request_subscribe().add_account(h._account_id).broadcast().request(),h._subs+=1)}function i(t){~n.subscribeEvents.indexOf(t)&&(h._subs-=1,!h._subs&&h._remote._connected&&h._remote.request_unsubscribe().add_account(h._account_id).broadcast().request())}function o(t){h._account.is_valid()&&h._subs&&t.add_account(h._account_id)}function f(t){if(t.mmeta){var e=!1;t.mmeta.each(function(t){var r=t.fields.Account===h._account_id,n=r&&"AccountRoot"===t.entryType;n&&(s(h._entry,t.fieldsNew,t.fieldsFinal),e=!0)}),e&&h.emit("entry",h._entry)}}a.call(this);var h=this;return this._remote=t,this._account=u.from_json(e),this._account_id=this._account.to_json(),this._subs=0,this._entry={},this.on("newListener",r),this.on("removeListener",i),this._remote.on("prepare_subscribe",o),this.on("transaction",f),this._transactionManager=new c(this),this}var i=r(51),o=r(41),s=r(39),a=r(40).EventEmitter,u=(r(3).Amount,r(9).UInt160),c=r(25).TransactionManager,f=r(17).sjcl,h=r(7).Base;o.inherits(n,a),n.subscribeEvents=["transaction","entry"],n.prototype.toJson=function(){return this._account.to_json()},n.prototype.isValid=function(){return this._account.is_valid()},n.prototype.getInfo=function(t){return this._remote.requestAccountInfo({account:this._account_id},t)},n.prototype.entry=function(t){function e(e,n){e?t(e):(s(r._entry,n.account_data),r.emit("entry",r._entry),t(null,n))}var r=this,t="function"==typeof t?t:function(){};return this.getInfo(e),this},n.prototype.getNextSequence=function(t){function e(t){return t&&"object"==typeof t&&"object"==typeof t.remote&&"actNotFound"===t.remote.error}function r(r,n){e(r)?t(null,1):r?t(r):t(null,n.account_data.Sequence)}var t="function"==typeof t?t:function(){};return this.getInfo(r),this},n.prototype.lines=function(t){function e(e,n){e?t(e):(r._lines=n.lines,r.emit("lines",r._lines),t(null,n))}var r=this,t="function"==typeof t?t:function(){};return this._remote.requestAccountLines({account:this._account_id},e),this},n.prototype.line=function(t,e,r){var n=this,r="function"==typeof r?r:function(){};return n.lines(function(n,i){if(n)return r(n);var o;t:for(var s=0;s<i.lines.length;s++){var a=i.lines[s];if(a.account===e&&a.currency===t){o=a;break t}}r(null,o)}),this},n.prototype.notify=n.prototype.notifyTx=function(t){if(this._subs){this.emit("transaction",t);var e=t.transaction.Account;if(e){var r=e===this._account_id;this.emit(r?"transaction-outbound":"transaction-inbound",t)}}},n.prototype.submit=function(t){this._transactionManager.submit(t)},n.prototype.publicKeyIsActive=function(t,e){function r(t){a.getInfo(function(e,r){e&&e.remote&&"actNotFound"===e.remote.error?t(null,null):t(e,r)})}function o(t,e){if(!t)return void(s===a._account_id?e(null,!0):e(null,!1));var r=t.account_data;r.RegularKey&&r.RegularKey===s?e(null,!0):r.Account===s&&0===(1048576&r.Flags)?e(null,!0):e(null,!1)}var s,a=this;try{s=n._publicKeyToAddress(t)}catch(u){return e(u)}var c=[r,o];i.waterfall(c,e)},n._publicKeyToAddress=function(t){function e(t){var e=f.codec.hex.toBits(t),r=f.hash.ripemd160.hash(f.hash.sha256.hash(e)),n=u.from_bits(r);return n.set_version(h.VER_ACCOUNT_ID),n.to_json()}if(u.is_valid(t))return t;if(/^[0-9a-fA-F]+$/.test(t))return e(t);throw new Error("Public key is invalid. Must be a UInt160 or a hex string")},e.Account=n},function(t,e,r){"use strict";function n(t){s.call(this);var e=this,r="object"==typeof t;this.remote=t,this.tx_json={Flags:0},this._secret=void 0,this._build_path=!1,this._maxFee=r?this.remote.max_fee:void 0,this.state="unsubmitted",this.finalized=!1,this.previousSigningHash=void 0,this.submitIndex=void 0,this.canonical=r?this.remote.canonical_signing:!0,this.submittedIDs=[],this.attempts=0,this.submissions=0,this.responses=0,this.once("success",function(t){e.setState("validated"),e.finalize(t),e._successHandler&&e._successHandler(t)}),this.once("error",function(t){e.setState("failed"),e.finalize(t),e._errorHandler&&e._errorHandler(t)}),this.once("submitted",function(){e.setState("submitted")}),this.once("proposed",function(){e.setState("pending")})}var i=r(41),o=r(42),s=r(40).EventEmitter,a=r(17),u=r(17).sjcl,c=r(3).Amount,f=r(3).Currency,h=r(3).UInt160,l=r(11).Seed,p=r(13).SerializedObject,d=r(14).RippleError,_=r(30),g=r(23).internal.sub("transaction");i.inherits(n,s),n.fee_units={"default":10},n.flags={Universal:{FullyCanonicalSig:2147483648},AccountSet:{RequireDestTag:65536,OptionalDestTag:131072,RequireAuth:262144,OptionalAuth:524288,DisallowXRP:1048576,AllowXRP:2097152},TrustSet:{SetAuth:65536,NoRipple:131072,SetNoRipple:131072,ClearNoRipple:262144,SetFreeze:1048576,ClearFreeze:2097152},OfferCreate:{Passive:65536,ImmediateOrCancel:131072,FillOrKill:262144,Sell:524288},Payment:{NoRippleDirect:65536,PartialPayment:131072,LimitQuality:262144}},n.set_clear_flags={AccountSet:{asfRequireDest:1,asfRequireAuth:2,asfDisallowXRP:3,asfDisableMaster:4,asfAccountTxnID:5,asfNoFreeze:6,asfGlobalFreeze:7,asfDefaultRipple:8}},n.MEMO_TYPES={},n.MEMO_REGEX=/^[0-9a-zA-Z-\.\_\~\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\%]+$/,n.formats=r(16).tx,n.prototype.consts={telLOCAL_ERROR:-399,temMALFORMED:-299,tefFAILURE:-199,terRETRY:-99,tesSUCCESS:0,tecCLAIMED:100},n.prototype.isTelLocal=function(t){return t>=this.consts.telLOCAL_ERROR&&t<this.consts.temMALFORMED},n.prototype.isTemMalformed=function(t){return t>=this.consts.temMALFORMED&&t<this.consts.tefFAILURE},n.prototype.isTefFailure=function(t){return t>=this.consts.tefFAILURE&&t<this.consts.terRETRY},n.prototype.isTerRetry=function(t){return t>=this.consts.terRETRY&&t<this.consts.tesSUCCESS},n.prototype.isTepSuccess=function(t){return t>=this.consts.tesSUCCESS},n.prototype.isTecClaimed=function(t){return t>=this.consts.tecCLAIMED},n.prototype.isRejected=function(t){return this.isTelLocal(t)||this.isTemMalformed(t)||this.isTefFailure(t)},n.from_json=function(t){return(new n).parseJson(t)},n.prototype.parseJson=function(t){return this.tx_json=t,this},n.prototype.setState=function(t){this.state!==t&&(this.state=t,this.emit("state",t))},n.prototype.finalize=function(t){return this.finalized=!0,this.result?(this.result.ledger_index=t.ledger_index,this.result.ledger_hash=t.ledger_hash):(this.result=t,this.result.tx_json=this.tx_json),this.emit("cleanup"),this.emit("final",t),this.remote&&this.remote.trace&&g.info("transaction finalized:",this.tx_json,this.getManager()._pending.getLength()),this},n.prototype.getAccount=function(){return this.tx_json.Account},n.prototype.getType=n.prototype.getTransactionType=function(){return this.tx_json.TransactionType},n.prototype.getManager=function(t){if(!this.remote)return void 0;var e=t||this.tx_json.Account;return this.remote.account(e)._transactionManager},n.prototype.getSecret=n.prototype._accountSecret=function(t){if(!this.remote)return void 0;var e=t||this.tx_json.Account;return this.remote.secrets[e]},n.prototype._getFeeUnits=n.prototype.feeUnits=function(){return n.fee_units["default"]},n.prototype._computeFee=function(){if(!this.remote)return void 0;for(var t=this.remote._servers,e=[],r=0;r<t.length;r++){var n=t[r];n.isConnected()&&e.push(Number(n._computeFee(this._getFeeUnits())))}switch(e.length){case 0:return void 0;case 1:return String(e[0])}e.sort(function(t,e){return t>e?1:e>t?-1:0});var i=Math.floor(e.length/2),o=e.length%2===0?Math.floor(.5+(e[i]+e[i-1])/2):e[i];return String(o)},n.prototype.complete=function(){if(this.remote&&!this.remote.trusted&&!this.remote.local_signing)return this.emit("error",new d("tejServerUntrusted","Attempt to give secret to untrusted server")),!1;if(this._secret||(this._secret=this.getSecret()),!this._secret)return this.emit("error",new d("tejSecretUnknown","Missing secret")),!1;if("undefined"==typeof this.tx_json.SigningPubKey)try{var t=l.from_json(this._secret),e=t.get_key(this.tx_json.Account);this.tx_json.SigningPubKey=e.to_hex_pub()}catch(r){return this.emit("error",new d("tejSecretInvalid","Invalid secret")),!1}return!this.remote||"undefined"!=typeof this.tx_json.Fee||!this.remote.local_fee&&this.remote.trusted||(this.tx_json.Fee=this._computeFee(),this.tx_json.Fee)?Number(this.tx_json.Fee)>this._maxFee?(this.emit("error",new d("tejMaxFeeExceeded","Max fee exceeded")),!1):(this.remote&&this.remote.local_signing&&this.canonical&&(this.tx_json.Flags|=n.flags.Universal.FullyCanonicalSig,this.tx_json.Flags=this.tx_json.Flags>>>0),this.tx_json):(this.emit("error",new d("tejUnconnected")),!1)},n.prototype.serialize=function(){return p.from_json(this.tx_json)},n.prototype.signingHash=function(t){return this.hash(t?"HASH_TX_SIGN_TESTNET":"HASH_TX_SIGN")},n.prototype.hash=function(t,e,r){var n=void 0;if("string"!=typeof t)n=_.HASH_TX_ID;else{if(!_.hasOwnProperty(t))throw new Error("Unknown hashing prefix requested: "+t);n=_[t]}var i=(r||this.serialize()).hash(n);return e?i:i.to_hex()},n.prototype.sign=function(t){var e=l.from_json(this._secret),r=this.tx_json.TxnSignature;delete this.tx_json.TxnSignature;var n=this.signingHash(t);if(r&&n===this.previousSigningHash)return this.tx_json.TxnSignature=r,this;var i=e.get_key(this.tx_json.Account),o=i.sign(n),s=u.codec.hex.fromBits(o).toUpperCase();return this.tx_json.TxnSignature=s,this.previousSigningHash=n,this},n.prototype.addId=function(t){o.contains(this.submittedIDs,t)||this.submittedIDs.unshift(t)},n.prototype.findId=function(t){var e=o.detect(this.submittedIDs,function(e){return t.hasOwnProperty(e)});return t[e]},n.prototype.setClientID=n.prototype.clientID=function(t){return"string"==typeof t&&(this._clientID=t),this},n.prototype.setLastLedgerSequence=n.prototype.setLastLedger=n.prototype.lastLedger=function(t){return this._setUInt32("LastLedgerSequence",t),this._setLastLedger=!0,this},n.prototype.setMaxFee=n.prototype.maxFee=function(t){return"number"==typeof t&&t>=0&&(this._setMaxFee=!0,this._maxFee=t),this},n.prototype.setFixedFee=function(t){return"number"==typeof t&&t>=0&&(this._setFixedFee=!0,this.tx_json.Fee=String(t)),this},n.prototype.setSecret=n.prototype.secret=function(t){return"string"==typeof t&&(this._secret=t),this},n.prototype.setType=function(t){if(o.isUndefined(n.formats,t))throw new Error("TransactionType must be a valid transaction type");return this.tx_json.TransactionType=t,this},n.prototype._setUInt32=function(t,e,r){var n=o.merge({},r),i="number"==typeof e&&e>=0&&e<Math.pow(256,4);if(!i)throw new Error(t+" must be a valid UInt32");if(!o.isUndefined(n.min_value)&&e<n.min_value)throw new Error(t+" must be >= "+n.min_value);return this.tx_json[t]=e,this},n.prototype.setSourceTag=n.prototype.sourceTag=function(t){return this._setUInt32("SourceTag",t)},n.prototype._setAccount=function(t,e){var r=h.from_json(e);if(!r.is_valid())throw new Error(t+" must be a valid account");return this.tx_json[t]=r.to_json(),this},n.prototype.setAccount=function(t){return this._setAccount("Account",t)},n.prototype._setAmount=function(t,e,r){var n=o.merge({no_native:!1},r),i=c.from_json(e);if(i.is_negative())throw new Error(t+" value must be non-negative");var s=i.currency().is_native();if(s&&n.no_native)throw new Error(t+" must be a non-native amount");if(!s&&!i.currency().is_valid())throw new Error(t+" must have a valid currency");if(!s&&!i.issuer().is_valid())throw new Error(t+" must have a valid issuer");return this.tx_json[t]=i.to_json(),this},n.prototype._setHash256=function(t,e,r){if("string"!=typeof e)throw new Error(t+" must be a valid Hash256");var n=o.merge({pad:!1},r),i=e;if(n.pad)for(;i.length<64;)i+="0";if(!/^[0-9A-Fa-f]{64}$/.test(i))throw new Error(t+" must be a valid Hash256");return this.tx_json[t]=i,this},n.prototype.setAccountTxnID=n.prototype.accountTxnID=function(t){return this._setHash256("AccountTxnID",t)},n.prototype.setFlags=function(t){if(void 0===t)return this;if("number"==typeof t)return this.tx_json.Flags=t,this;for(var e=n.flags[this.getType()]||{},r=Array.isArray(t)?t:[].slice.call(arguments),i=0,o=r.length;o>i;i++){var s=r[i];if(!e.hasOwnProperty(s))return this.emit("error",new d("tejInvalidFlag")),this;this.tx_json.Flags+=e[s]}return this},n.prototype.addMemo=function(t){function e(t){var e=u.codec.utf8String.toBits(t);return u.codec.hex.fromBits(e).toUpperCase()}var r=void 0;r="object"==typeof t?o.merge({},t):{memoType:arguments[0],memoFormat:arguments[1],memoData:arguments[2]};var i={},s=n.MEMO_REGEX,a=r.memoType,c=r.memoFormat,f=r.memoData;if(a){if(!o.isString(a)||!s.test(a))throw new Error("MemoType must be a string containing only valid URL characters");n.MEMO_TYPES[a]&&(a=n.MEMO_TYPES[a]),i.MemoType=e(a)}if(c){if(!o.isString(c)||!s.test(c))throw new Error("MemoFormat must be a string containing only valid URL characters");i.MemoFormat=e(c)}if(f){if("string"!=typeof f){if("json"!==c.toLowerCase())throw new Error("MemoData can only be a JSON object with a valid json MemoFormat");try{f=JSON.stringify(f)}catch(h){throw new Error("MemoFormat json with invalid JSON in MemoData field")}}i.MemoData=e(f)}return this.tx_json.Memos=(this.tx_json.Memos||[]).concat({Memo:i}),this},n.prototype.accountSet=function(t){var e=void 0;return"object"==typeof t?(e=o.merge({},t),o.isUndefined(e.account)&&(e.account=e.src),o.isUndefined(e.set_flag)&&(e.set_flag=e.set),o.isUndefined(e.clear_flag)&&(e.clear_flag=e.clear)):e={account:arguments[0],set_flag:arguments[1],clear_flag:arguments[2]},this.setType("AccountSet"),this.setAccount(e.account),o.isUndefined(e.set_flag)||this.setSetFlag(e.set_flag),o.isUndefined(e.clear_flag)||this.setClearFlag(e.clear_flag),this},n.prototype.setAccountSetFlag=function(t,e){var r=n.set_clear_flags.AccountSet,i=e;if("string"==typeof i&&(i=/^asf/.test(i)?r[i]:r["asf"+i]),!o.contains(o.values(r),i))throw new Error(t+" must be a valid AccountSet flag");return this.tx_json[t]=i,this},n.prototype.setSetFlag=function(t){return this.setAccountSetFlag("SetFlag",t)},n.prototype.setClearFlag=function(t){return this.setAccountSetFlag("ClearFlag",t)},n.prototype.setTransferRate=n.prototype.transferRate=function(t){var e=t;return 0===e?(this.tx_json.TransferRate=e,this):this._setUInt32("TransferRate",e,{min_value:1e9})},n.prototype.setRegularKey=function(t){var e=void 0;return"object"==typeof t?(e=o.merge({},t),o.isUndefined(e.account)&&(e.account=e.src)):e={account:arguments[0],regular_key:arguments[1]},this.setType("SetRegularKey"),this.setAccount(e.account),o.isUndefined(e.regular_key)||this._setAccount("RegularKey",e.regular_key),this},n.prototype.trustSet=n.prototype.rippleLineSet=function(t){var e=void 0;return"object"==typeof t?(e=o.merge({},t),o.isUndefined(e.account)&&(e.account=e.src)):e={account:arguments[0],limit:arguments[1],quality_in:arguments[2],quality_out:arguments[3]},this.setType("TrustSet"),this.setAccount(e.account),o.isUndefined(e.limit)||this.setLimit(e.limit),o.isUndefined(e.quality_in)||this.setQualityIn(e.quality_in),o.isUndefined(e.quality_out)||this.setQualityOut(e.quality_out),this},n.prototype.setLimit=function(t){return this._setAmount("LimitAmount",t,{no_native:!0})},n.prototype.setQualityIn=function(t){return this._setUInt32("QualityIn",t)},n.prototype.setQualityOut=function(t){return this._setUInt32("QualityOut",t)},n.prototype.payment=function(t){var e=void 0;return"object"==typeof t?(e=o.merge({},t),o.isUndefined(e.account)&&(e.account=e.src||e.from),o.isUndefined(e.destination)&&(e.destination=e.dst||e.to)):e={account:arguments[0],destination:arguments[1],amount:arguments[2]},this.setType("Payment"),this.setAccount(e.account),this.setDestination(e.destination),this.setAmount(e.amount),this},n.prototype.setAmount=function(t){return this._setAmount("Amount",t)},n.prototype.setDestination=function(t){return this._setAccount("Destination",t)},n.prototype.setSendMax=n.prototype.sendMax=function(t){return this._setAmount("SendMax",t)},n._rewritePath=function(t){var e=t.map(function(t){var e={};return t.hasOwnProperty("account")&&(e.account=h.json_rewrite(t.account)),t.hasOwnProperty("issuer")&&(e.issuer=h.json_rewrite(t.issuer)),t.hasOwnProperty("currency")&&(e.currency=f.json_rewrite(t.currency)),t.hasOwnProperty("type_hex")&&(e.type_hex=t.type_hex),e});return e},n.prototype.addPath=n.prototype.pathAdd=function(t){if(!Array.isArray(t))throw new Error("Path must be an array");return this.tx_json.Paths=this.tx_json.Paths||[],this.tx_json.Paths.push(n._rewritePath(t)),this},n.prototype.setPaths=n.prototype.paths=function(t){if(!Array.isArray(t))throw new Error("Paths must be an array");return this.tx_json.Paths=[],t.forEach(this.addPath,this),this},n.prototype.setBuildPath=n.prototype.buildPath=function(t){return this._build_path=void 0===t||t,this},n.prototype.setDestinationTag=n.prototype.destinationTag=function(t){return this._setUInt32("DestinationTag",t)},n.prototype.setInvoiceID=n.prototype.invoiceID=function(t){return this._setHash256("InvoiceID",t,{pad:!0})},n.prototype.offerCreate=function(t){var e=void 0;return"object"==typeof t?(e=o.merge({},t),o.isUndefined(e.account)&&(e.account=e.src),o.isUndefined(e.taker_pays)&&(e.taker_pays=e.buy),o.isUndefined(e.taker_gets)&&(e.taker_gets=e.sell),o.isUndefined(e.offer_sequence)&&(e.offer_sequence=e.cancel_sequence||e.sequence)):e={account:arguments[0],taker_pays:arguments[1],taker_gets:arguments[2],expiration:arguments[3],offer_sequence:arguments[4]},this.setType("OfferCreate"),this.setAccount(e.account),this.setTakerGets(e.taker_gets),this.setTakerPays(e.taker_pays),o.isUndefined(e.expiration)||this.setExpiration(e.expiration),o.isUndefined(e.offer_sequence)||this.setOfferSequence(e.offer_sequence),this
},n.prototype.setTakerGets=function(t){return this._setAmount("TakerGets",t)},n.prototype.setTakerPays=function(t){return this._setAmount("TakerPays",t)},n.prototype.setExpiration=function(t){var e=t instanceof Date?t.getTime():t;return this._setUInt32("Expiration",a.time.toRipple(e))},n.prototype.setOfferSequence=function(t){return this._setUInt32("OfferSequence",t)},n.prototype.offerCancel=function(t){var e=void 0;return"object"==typeof t?(e=o.merge({},t),o.isUndefined(e.account)&&(e.account=e.src),o.isUndefined(e.offer_sequence)&&(e.offer_sequence=e.sequence||e.cancel_sequence)):e={account:arguments[0],offer_sequence:arguments[1]},this.setType("OfferCancel"),this.setAccount(e.account),this.setOfferSequence(e.offer_sequence),this},n.prototype.submit=function(t){var e=this;return this.callback="function"==typeof t?t:function(){},this._errorHandler=function(t,r){var n=t;n instanceof d||(n=new d(n,r)),e.callback(n)},this._successHandler=function(t){e.callback(null,t)},this.remote?(this.getManager().submit(this),this):(this.emit("error",new Error("No remote found")),this)},n.prototype.abort=function(){return this.finalized||this.emit("error",new d("tejAbort","Transaction aborted")),this},n.prototype.getSummary=n.prototype.summary=function(){var t={tx_json:this.tx_json,clientID:this._clientID,submittedIDs:this.submittedIDs,submissionAttempts:this.attempts,submitIndex:this.submitIndex,initialSubmitIndex:this.initialSubmitIndex,lastLedgerSequence:this.lastLedgerSequence,state:this.state,finalized:this.finalized};if(this.result){var e=this.result.tx_json?this.result.tx_json.hash:void 0;t.result={engine_result:this.result.engine_result,engine_result_message:this.result.engine_result_message,ledger_hash:this.result.ledger_hash,ledger_index:this.result.ledger_index,transaction_hash:e}}return t},e.Transaction=n},function(t,e,r){"use strict";var n=r(39),i=r(9).UInt160,o=r(17),s=r(31).Float,a=n(function(){this._value=0/0,this._update()},i);a.prototype=n({},i.prototype),a.prototype.constructor=a,a.HEX_CURRENCY_BAD="0000000000000000000000005852500000000000",a.prototype.human_RE=/^\s*([a-zA-Z0-9\<\>\(\)\{\}\[\]\|\?\!\@\#\$\%\^\&]{3})(\s*-\s*[- \w]+)?(\s*\(-?\d+\.?\d*%pa\))?\s*$/,a.from_json=function(t,e){return(new a).parse_json(t,e)},a.from_human=function(t,e){return(new a).parse_human(t,e)},a.prototype.parse_json=function(t,e){if(this._value=0/0,t instanceof a)return this._value=t.copyTo({})._value,this._update(),this;switch(typeof t){case"number":isNaN(t)||this.parse_number(t);break;case"string":if(!t||"0"===t){this.parse_hex(e?a.HEX_CURRENCY_BAD:a.HEX_ZERO);break}if("1"===t){this.parse_hex(a.HEX_ONE);break}if(/^[A-F0-9]{40}$/.test(t)){this.parse_hex(t);break}var r=t.match(this.human_RE);if(r){var n=r[1];if(!n||/^(0|XRP)$/.test(n)){this.parse_hex(e?a.HEX_CURRENCY_BAD:a.HEX_ZERO);break}var i=r[3]||"",u=i.match(/(-?\d+\.?\d+)/);n=n.toUpperCase();var c=o.arraySet(20,0);if(u){c[0]=1,c[1]=255&n.charCodeAt(0),c[2]=255&n.charCodeAt(1),c[3]=255&n.charCodeAt(2),u=parseFloat(u[0]);for(var f=31536e3,h=f/Math.log(1+u/100),l=s.toIEEE754Double(h),p=0;p<=l.length;p++)c[8+p]=255&l[p]}else c[12]=255&n.charCodeAt(0),c[13]=255&n.charCodeAt(1),c[14]=255&n.charCodeAt(2);this.parse_bytes(c)}}return this},a.prototype.parse_human=function(t){return this.parse_json(t)},a.prototype._update=function(){var t=this.to_bytes(),e=!0;if(t){this._native=!1,this._type=-1,this._interest_start=0/0,this._interest_period=0/0,this._iso_code="";for(var r=0;20>r;r++)e=e&&(12===r||13===r||14===r||0===t[r]);e?(this._iso_code=String.fromCharCode(t[12])+String.fromCharCode(t[13])+String.fromCharCode(t[14]),"\x00\x00\x00"===this._iso_code&&(this._native=!0,this._iso_code="XRP"),this._type=0):1===t[0]&&(this._iso_code=String.fromCharCode(t[1])+String.fromCharCode(t[2])+String.fromCharCode(t[3]),this._type=1,this._interest_start=(t[4]<<24)+(t[5]<<16)+(t[6]<<8)+t[7],this._interest_period=s.fromIEEE754Double(t.slice(8,16)))}},a.prototype.is_native=function(){return this._native},a.prototype.has_interest=function(){return 1===this._type&&!isNaN(this._interest_start)&&!isNaN(this._interest_period)},a.prototype.get_interest_at=function(t){return this.has_interest()?(t||(t=this._interest_start+31536e3),t instanceof Date&&(t=o.fromTimestamp(t.getTime())),Math.exp((t-this._interest_start)/this._interest_period)):0},a.prototype.get_interest_percentage_at=function(t,e){var r=this.get_interest_at(t,e);r=100*r-100;var n=e?Math.pow(10,e):100;return Math.round(r*n)/n},a.prototype.to_json=function(t){if(!this.is_valid())return"XRP";t||(t={});var e,r=t&&t.full_name?" - "+t.full_name:"";if(t.show_interest=void 0!==t.show_interest?t.show_interest:this.has_interest(),!t.force_hex&&/^[A-Z0-9]{3}$/.test(this._iso_code)){if(e=this._iso_code+r,t.show_interest){var n=isNaN(t.decimals)?void 0:t.decimals,i=this.has_interest()?this.get_interest_percentage_at(this._interest_start+31536e3,n):0;e+=" ("+i+"%pa)"}}else e=this.to_hex(),e===a.HEX_ONE&&(e=1);return e},a.prototype.to_human=function(t){return this.to_json(t)},a.prototype.get_iso=function(){return this._iso_code},e.Currency=a},function(t,e,r){"use strict";function n(t){return c.codec.bytes.fromBits(c.hash.sha256.hash(c.codec.bytes.toBits(t)))}function i(t,e){if(0===e.length)return"";var r=u.takeWhile(e,function(t){return 0===t}),n=l(e,256,58).map(function(e){if(0>e||e>=t.length)throw new Error("Value "+e+" is out of bounds for encoding");return t[e]}),i=r.map(function(){return t[0]});return i.concat(n).join("")}function o(t,e){if(0===e.length)return[];var r=e.split("").map(function(e){var r=e.charCodeAt(0);if(r>=t.length||-1===t[r])throw new Error("Character "+e+" is not valid for encoding");return t[r]}),n=u.takeWhile(r,function(t){return 0===t}),i=l(r,58,256);return n.concat(i)}function s(t){for(var e=f.arraySet(128,-1),r=0;r<t.length;r++)e[t.charCodeAt(r)]=r;return{decode:o.bind(null,e),encode:i.bind(null,t)}}var a=r(28)["default"],u=r(42),c=r(17).sjcl,f=r(17),h=r(39),l=r(22),p={},d=p.alphabets={ripple:"rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz",tipple:"RPShNAF39wBUDnEGHJKLM4pQrsT7VWXYZ2bcdeCg65jkm8ofqi1tuvaxyz",bitcoin:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"};h(p,{VER_NONE:1,VER_NODE_PUBLIC:28,VER_NODE_PRIVATE:32,VER_ACCOUNT_ID:0,VER_ACCOUNT_PUBLIC:35,VER_ACCOUNT_PRIVATE:34,VER_FAMILY_GENERATOR:41,VER_FAMILY_SEED:33}),p.encoders={},a(d).forEach(function(t){p.encoders[t]=new s(d[t])}),p.encode=function(t,e){return this.encoders[e||"ripple"].encode(t)},p.decode=function(t,e){if("string"!=typeof t)return void 0;try{return this.encoders[e||"ripple"].decode(t)}catch(r){return void 0}},p.verify_checksum=function(t){var e=n(n(t.slice(0,-4))).slice(0,4),r=t.slice(-4);return u.isEqual(e,r)},p.encode_check=function(t,e,r){var i=[].concat(t,e),o=n(n(i)).slice(0,4);return p.encode([].concat(i,o),r)},p.decode_check=function(t,e,r){var n=p.decode(e,r);return!n||n.length<5?0/0:"number"==typeof t&&n[0]!==t?0/0:Array.isArray(t)&&u.every(t,function(t){return t!==n[0]})?0/0:p.verify_checksum(n)?(n[0]=0,c.bn.fromBits(c.codec.bytes.toBits(n.slice(0,-4)))):0/0},e.Base=p},function(t,e,r){"use strict";var n=r(17),i=r(39),o=r(32).UInt,s=i(function(){this._value=0/0},o);s.width=16,s.prototype=i({},o.prototype),s.prototype.constructor=s;var a=s.HEX_ZERO="00000000000000000000000000000000",u=s.HEX_ONE="00000000000000000000000000000000";s.STR_ZERO=n.hexToString(a),s.STR_ONE=n.hexToString(u),e.UInt128=s},function(t,e,r){"use strict";var n=r(17),i=r(39),o=r(32).UInt,s=r(7).Base,a=i(function(){this._value=0/0,this._version_byte=void 0,this._update()},o);a.width=20,a.prototype=i({},o.prototype),a.prototype.constructor=a;var u=a.HEX_ZERO="0000000000000000000000000000000000000000",c=a.HEX_ONE="0000000000000000000000000000000000000001";a.ACCOUNT_ZERO="rrrrrrrrrrrrrrrrrrrrrhoLvTp",a.ACCOUNT_ONE="rrrrrrrrrrrrrrrrrrrrBZbvji",a.STR_ZERO=n.hexToString(u),a.STR_ONE=n.hexToString(c),a.prototype.set_version=function(t){return this._version_byte=t,this},a.prototype.get_version=function(){return this._version_byte},a.prototype.parse_json=function(t){return"number"!=typeof t||isNaN(t)?"string"!=typeof t?this._value=0/0:"r"===t[0]?(this._value=s.decode_check(s.VER_ACCOUNT_ID,t),this._version_byte=s.VER_ACCOUNT_ID):this.parse_hex(t):(this.parse_number(t),this._version_byte=s.VER_ACCOUNT_ID),this._update(),this},a.prototype.parse_generic=function(t){return o.prototype.parse_generic.call(this,t),isNaN(this._value)&&"string"==typeof t&&"r"===t[0]&&(this._value=s.decode_check(s.VER_ACCOUNT_ID,t)),this._update(),this},a.prototype.to_json=function(t){if(t=t||{},this.is_valid()){if("number"==typeof this._version_byte){var e=s.encode_check(this._version_byte,this.to_bytes());return t.gateways&&e in t.gateways&&(e=t.gateways[e]),e}return this.to_hex()}return 0/0},e.UInt160=a},function(t,e,r){"use strict";var n=r(17),i=r(39),o=r(32).UInt,s=i(function(){this._value=0/0},o);s.width=32,s.prototype=i({},o.prototype),s.prototype.constructor=s;var a=s.HEX_ZERO="0000000000000000000000000000000000000000000000000000000000000000",u=s.HEX_ONE="0000000000000000000000000000000000000000000000000000000000000001";s.STR_ZERO=n.hexToString(a),s.STR_ONE=n.hexToString(u),e.UInt256=s},function(t,e,r){"use strict";function n(t,e){return[].concat(t,e>>24,e>>16&255,e>>8&255,255&e)}function i(t){return a.bitArray.bitSlice(a.hash.sha512.hash(a.codec.bytes.toBits(t)),0,256)}var o=r(39),s=r(17),a=s.sjcl,u=r(7).Base,c=r(32).UInt,f=r(9).UInt160,h=r(33).KeyPair,l=o(function(){this._curve=a.ecc.curves.k256,this._value=0/0},c);l.width=16,l.prototype=o({},c.prototype),l.prototype.constructor=l,l.prototype.parse_json=function(t){return"string"==typeof t&&t.length?"s"===t[0]?this._value=u.decode_check(u.VER_FAMILY_SEED,t):/^[0-9a-fA-f]{32}$/.test(t)?this.parse_hex(t):this.parse_passphrase(t):this._value=0/0,this},l.prototype.parse_passphrase=function(t){if("string"!=typeof t)throw new Error("Passphrase must be a string");var e=a.hash.sha512.hash(a.codec.utf8String.toBits(t)),r=a.bitArray.bitSlice(e,0,128);return this.parse_bits(r),this},l.prototype.to_json=function(){if(!this.is_valid())return 0/0;var t=u.encode_check(u.VER_FAMILY_SEED,this.to_bytes());return t},l.prototype.get_key=function(t,e){var r=0,o=void 0,s=e||1;if(!this.is_valid())throw new Error("Cannot generate keys from invalid seed!");t&&("number"==typeof t?(r=t,s=r+1):o=f.from_json(t));var u=void 0,c=void 0,l=this._curve,p=0;do u=a.bn.fromBits(i(n(this.to_bytes(),p))),p++;while(!l.r.greaterEquals(u));c=l.G.mult(u);var d=void 0,_=void 0;do{p=0;do d=a.bn.fromBits(i(n(n(c.toBytesCompressed(),r),p))),p++;while(!l.r.greaterEquals(d));if(r++,d=d.add(u).mod(l.r),_=h.from_bn_secret(d),s--<=0)throw new Error("Too many loops looking for KeyPair yielding "+o.to_json()+" from "+this.to_json())}while(o&&!_.get_address().equals(o));return _},e.Seed=l},function(t,e,r){"use strict";function n(t){if(this.nodes=[],"object"!=typeof t)throw new TypeError("Missing metadata");if(!Array.isArray(t.AffectedNodes))throw new TypeError("Metadata missing AffectedNodes");t.AffectedNodes.forEach(this.addNode,this)}var i=r(39),o=r(17),s=r(9).UInt160,a=r(3).Amount;n.NODE_TYPES=["CreatedNode","ModifiedNode","DeletedNode"],n.AMOUNT_FIELDS_AFFECTING_ISSUER=["LowLimit","HighLimit","TakerPays","TakerGets"],n.ACCOUNT_FIELDS=["Account","Owner","Destination","Issuer","Target"],n.prototype.getNodeType=function(t){for(var e=null,r=0;r<n.NODE_TYPES.length;r++){var i=n.NODE_TYPES[r];if(t.hasOwnProperty(i)){e=i;break}}return e},n.prototype.isAccountField=function(t){return-1!==n.ACCOUNT_FIELDS.indexOf(t)},n.prototype.addNode=function(t){this._affectedAccounts=void 0,this._affectedBooks=void 0;var e={};(e.nodeType=this.getNodeType(t))&&(t=t[e.nodeType],e.diffType=e.nodeType,e.entryType=t.LedgerEntryType,e.ledgerIndex=t.LedgerIndex,e.fields=i({},t.PreviousFields,t.NewFields,t.FinalFields),e.fieldsPrev=t.PreviousFields||{},e.fieldsNew=t.NewFields||{},e.fieldsFinal=t.FinalFields||{},this.nodes.push(e))},n.prototype.getNodes=function(t){return"object"==typeof t?this.nodes.filter(function(e){return t.nodeType&&t.nodeType!==e.nodeType?!1:t.entryType&&t.entryType!==e.entryType?!1:t.bookKey&&t.bookKey!==e.bookKey?!1:!0}):this.nodes},n.prototype.getAffectedAccounts=function(){if(this._affectedAccounts)return this._affectedAccounts;for(var t=[],e=0;e<this.nodes.length;e++){var r=this.nodes[e],i="CreatedNode"===r.nodeType?r.fieldsNew:r.fieldsFinal;for(var u in i){var c=i[u];if(this.isAccountField(u)&&s.is_valid(c))t.push(c);else if(~n.AMOUNT_FIELDS_AFFECTING_ISSUER.indexOf(u)){var f=a.from_json(c),h=f.issuer();h.is_valid()&&!h.is_zero()&&t.push(h.to_json())}}}return this._affectedAccounts=o.arrayUnique(t),this._affectedAccounts},n.prototype.getAffectedBooks=function(){if(this._affectedBooks)return this._affectedBooks;for(var t=[],e=0;e<this.nodes.length;e++){var r=this.nodes[e];if("Offer"===r.entryType){var n=a.from_json(r.fields.TakerGets),i=a.from_json(r.fields.TakerPays),s=n.currency().to_json(),u=i.currency().to_json();"XRP"!==s&&(s+="/"+n.issuer().to_json()),"XRP"!==u&&(u+="/"+i.issuer().to_json());var c=s+":"+u;r.bookKey=c,t.push(c)}}return this._affectedBooks=o.arrayUnique(t),this._affectedBooks},["forEach","map","filter","every","some","reduce"].forEach(function(t){n.prototype[t]=function(){return Array.prototype[t].apply(this.nodes,arguments)}}),n.prototype.each=n.prototype.forEach,e.Meta=n},function(t,e,r){(function(t){"use strict";function n(t){var e=t.slice(2),r=a.findIndex(e,function(t){return"0"!==t});return r>=0?e.slice(r):"0"}function i(e){if(Array.isArray(e)||t&&t.isBuffer(e))this.buffer=e;else if("string"==typeof e)this.buffer=d.codec.bytes.fromBits(d.codec.hex.toBits(e));else{if(e)throw new Error("Invalid buffer passed.");this.buffer=[]}this.pointer=0}function o(t){return function(e){var r=this.pointer,n=r+e;if(n>this.buffer.length)throw new Error("Buffer length exceeded");var i=this.buffer.slice(r,n);return t&&(this.pointer=n),i}}var s=r(28)["default"],a=r(42),u=r(38),c=r(39),f=r(16),h=r(26),l=r(17),p=r(10).UInt256,d=l.sjcl,_={};s(f.tx).forEach(function(t){_[f.tx[t][0]]=t});var g={};s(f.ledger).forEach(function(t){g[f.ledger[t][0]]=t});var y={};s(f.ter).forEach(function(t){y[f.ter[t]]=t}),i.from_json=function(t){var e=c(!0,{},t),r=new i,n=void 0;if("number"==typeof e.TransactionType&&(e.TransactionType=i.lookup_type_tx(e.TransactionType),!e.TransactionType))throw new Error("Transaction type ID is invalid.");if("number"==typeof e.LedgerEntryType&&(e.LedgerEntryType=i.lookup_type_le(e.LedgerEntryType),!e.LedgerEntryType))throw new Error("LedgerEntryType ID is invalid.");if("string"==typeof e.TransactionType){if(n=f.tx[e.TransactionType],!Array.isArray(n))throw new Error("Transaction type is invalid");n=n.slice(),e.TransactionType=n.shift()}else if("string"==typeof e.LedgerEntryType){if(n=f.ledger[e.LedgerEntryType],!Array.isArray(n))throw new Error("LedgerEntryType is invalid");n=n.slice(),e.LedgerEntryType=n.shift()}else{if("object"!=typeof e.AffectedNodes)throw new Error("Object to be serialized must contain either TransactionType, LedgerEntryType or AffectedNodes.");n=f.metadata}return i.check_fields(n,e),r.serialize(n,e),r},i.check_fields=function(t,e){var r=[],n=[],o={};if(t.forEach(function(t){var n=t[0],i=t[1]===f.REQUIRED;i&&void 0===e[n]?r.push(n):o[n]=!0}),s(e).forEach(function(t){!o[t]&&/^[A-Z]/.test(t)&&n.push(t)}),r.length||n.length){var a=void 0;throw a=void 0!==e.TransactionType?i.lookup_type_tx(e.TransactionType):void 0!==e.LedgerEntryType?i.lookup_type_le(e.LedgerEntryType):"TransactionMetaData",r.length>0&&(a+=" is missing fields: "+JSON.stringify(r)),n.length>0&&(a+=(r.length?" and":"")+" has unknown fields: "+JSON.stringify(n)),new Error(a)}},i.prototype.append=function(t){var e=t instanceof i?t.buffer:t;if(Array.isArray(this.buffer)&&Array.isArray(e))for(var r=0;r<e.length;r++)this.buffer.push(e[r]);else this.buffer=this.buffer.concat(e);this.pointer+=e.length},i.prototype.resetPointer=function(){this.pointer=0},i.prototype.read=o(!0),i.prototype.peek=o(!1),i.prototype.to_bits=function(){return d.codec.bytes.toBits(this.buffer)},i.prototype.to_hex=function(){return d.codec.hex.fromBits(this.to_bits()).toUpperCase()},i.prototype.to_json=function(){var t=this.pointer;this.resetPointer();for(var e={};this.pointer<this.buffer.length;){var r=h.parse(this),n=r[0],o=r[1];e[n]=i.jsonify_structure(o,n)}return this.pointer=t,e},i.jsonify_structure=function(t,e){var r=void 0;switch(typeof t){case"number":switch(e){case"LedgerEntryType":r=g[t];break;case"TransactionResult":r=y[t];break;case"TransactionType":r=_[t];break;default:r=t}break;case"object":if(null===t)break;if("function"==typeof t.to_json)r=t.to_json();else if(t instanceof d.bn)r=("0000000000000000"+n(t.toString()).toUpperCase()).slice(-16);else{r=new t.constructor;for(var o=s(t),a=0,u=o.length;u>a;a++){var c=o[a];r[c]=i.jsonify_structure(t[c],c)}}break;default:r=t}return r},i.prototype.serialize=function(t,e){h.Object.serialize(this,e,!0)},i.prototype.hash=function(t){var e=new i;"undefined"!=typeof t&&h.Int32.serialize(e,t),e.append(this.buffer);var r=d.codec.bytes.toBits(e.buffer),n=d.codec.hex.fromBits(d.hash.sha512.hash(r));return p.from_hex(n.substr(0,64))},i.prototype.signing_hash=i.prototype.hash,i.prototype.serialize_field=function(t,e){var r=t[0],n=t[1];if("undefined"!=typeof e[r])try{h.serialize(this,r,e[r])}catch(i){throw i.message='Error serializing "'+r+'": '+i.message,i}else if(n===f.REQUIRED)throw new Error("Missing required field "+r)},i.get_field_header=function(t,e){var r=[0];return t>15?r.push(255&t):r[0]+=(15&t)<<4,e>15?r.push(255&e):r[0]+=15&e,r},i.sort_typedef=function(t){function e(t,e){return t[3]!==e[3]?h[t[3]].id-h[e[3]].id:t[2]-e[2]}return u(Array.isArray(t)),t.sort(e)},i.lookup_type_tx=function(t){return u.strictEqual(typeof t,"number"),_[t]},i.lookup_type_le=function(t){return u("number"==typeof t),g[t]},e.SerializedObject=i}).call(e,r(43).Buffer)},function(t,e,r){"use strict";function n(t,e){switch(typeof t){case"object":o(this,t);break;case"string":this.result=t,this.result_message=e}this.engine_result=this.result=this.result||this.engine_result||this.error||"Error",this.engine_result_message=this.result_message=this.result_message||this.engine_result_message||this.error_message||"Error",this.result_message=this.message=this.result_message;var r;Error.captureStackTrace?Error.captureStackTrace(this,t||this):(r=(new Error).stack)&&(this.stack=r)}var i=r(41),o=r(39);i.inherits(n,Error),n.prototype.name="RippleError",e.RippleError=n},function(t,e,r){"use strict";var n=r(51),i=r(17).sjcl,o=r(1).Remote,s=r(11).Seed,a=r(33).KeyPair,u=r(4).Account,c=r(9).UInt160,f={};f.hashFunction=i.hash.sha512.hash,f.MAGIC_BYTES="Ripple Signed Message:\n";var h=/^[0-9a-fA-F]+$/,l=/^([A-Za-z0-9\+]{4})*([A-Za-z0-9\+]{2}==)|([A-Za-z0-9\+]{3}=)?$/;f.signMessage=function(t,e,r){return f.signHash(f.hashFunction(f.MAGIC_BYTES+t),e,r)},f.signHash=function(t,e,r){var n="string"==typeof t&&/^[0-9a-fA-F]+$/.test(t)?i.codec.hex.toBits(t):t;if("object"!=typeof n||"number"!=typeof n[0]||n.length<=0)throw new Error("Hash must be a bitArray or hex-encoded string");var o=e instanceof i.ecc.ecdsa.secretKey?e:s.from_json(e).get_key(r)._secret,a=6,u=o.signWithRecoverablePublicKey(n,a),c=i.codec.base64.fromBits(u);return c},f.verifyMessageSignature=function(t,e,r){return"string"!=typeof t.message?r(new Error("Data object must contain message field to verify signature")):(t.hash=f.hashFunction(f.MAGIC_BYTES+t.message),f.verifyHashSignature(t,e,r))},f.verifyHashSignature=function(t,e,r){function s(t){var e=void 0;try{e=i.ecc.ecdsa.publicKey.recoverFromSignature(p,g)}catch(r){return t(r)}e?t(null,e):t(new Error("Could not recover public key from signature"))}function f(t,r){var n=new a;n._pubkey=t;var i=n.to_hex_pub(),o=new u(e,d);o.publicKeyIsActive(i,r)}if("function"!=typeof r)throw new Error("Must supply callback function");var p=h.test(t.hash)?i.codec.hex.toBits(t.hash):t.hash;if("object"!=typeof p||p.length<=0||"number"!=typeof p[0])return r(new Error("Hash must be a bitArray or hex-encoded string"));var d=t.account||t.address;if(!d||!c.from_json(d).is_valid())return r(new Error("Account must be a valid ripple address"));var _=t.signature;if("string"!=typeof _||!l.test(_))return r(new Error("Signature must be a Base64-encoded string"));var g=i.codec.base64.toBits(_);if(!(e instanceof o)||"online"!==e.state)return r(new Error("Must supply connected Remote to verify signature"));var y=[s,f];n.waterfall(y,r)},e.Message=f},function(t,e,r){"use strict";var n=r(28)["default"];e.types=[void 0,"Int16","Int32","Int64","Hash128","Hash256","Amount","VL","Account",void 0,void 0,void 0,void 0,void 0,"Object","Array","Int8","Hash160","PathSet","Vector256"];var i=e.fields={1:{1:"LedgerEntryType",2:"TransactionType"},2:{2:"Flags",3:"SourceTag",4:"Sequence",5:"PreviousTxnLgrSeq",6:"LedgerSequence",7:"CloseTime",8:"ParentCloseTime",9:"SigningTime",10:"Expiration",11:"TransferRate",12:"WalletSize",13:"OwnerCount",14:"DestinationTag",16:"HighQualityIn",17:"HighQualityOut",18:"LowQualityIn",19:"LowQualityOut",20:"QualityIn",21:"QualityOut",22:"StampEscrow",23:"BondAmount",24:"LoadFee",25:"OfferSequence",26:"FirstLedgerSequence",27:"LastLedgerSequence",28:"TransactionIndex",29:"OperationLimit",30:"ReferenceFeeUnits",31:"ReserveBase",32:"ReserveIncrement",33:"SetFlag",34:"ClearFlag"},3:{1:"IndexNext",2:"IndexPrevious",3:"BookNode",4:"OwnerNode",5:"BaseFee",6:"ExchangeRate",7:"LowNode",8:"HighNode"},4:{1:"EmailHash"},5:{1:"LedgerHash",2:"ParentHash",3:"TransactionHash",4:"AccountHash",5:"PreviousTxnID",6:"LedgerIndex",7:"WalletLocator",8:"RootIndex",9:"AccountTxnID",16:"BookDirectory",17:"InvoiceID",18:"Nickname",19:"Amendment",20:"TicketID"},6:{1:"Amount",2:"Balance",3:"LimitAmount",4:"TakerPays",5:"TakerGets",6:"LowLimit",7:"HighLimit",8:"Fee",9:"SendMax",16:"MinimumOffer",17:"RippleEscrow",18:"DeliveredAmount"},7:{1:"PublicKey",2:"MessageKey",3:"SigningPubKey",4:"TxnSignature",5:"Generator",6:"Signature",7:"Domain",8:"FundCode",9:"RemoveCode",10:"ExpireCode",11:"CreateCode",12:"MemoType",13:"MemoData",14:"MemoFormat"},8:{1:"Account",2:"Owner",3:"Destination",4:"Issuer",7:"Target",8:"RegularKey"},14:{1:void 0,2:"TransactionMetaData",3:"CreatedNode",4:"DeletedNode",5:"ModifiedNode",6:"PreviousFields",7:"FinalFields",8:"NewFields",9:"TemplateEntry",10:"Memo"},15:{1:void 0,2:"SigningAccounts",3:"TxnSignatures",4:"Signatures",5:"Template",6:"Necessary",7:"Sufficient",8:"AffectedNodes",9:"Memos"},16:{1:"CloseResolution",2:"TemplateEntryType",3:"TransactionResult"},17:{1:"TakerPaysCurrency",2:"TakerPaysIssuer",3:"TakerGetsCurrency",4:"TakerGetsIssuer"},18:{1:"Paths"},19:{1:"Indexes",2:"Hashes",3:"Amendments"}},o=e.fieldsInverseMap={};n(i).forEach(function(t){n(i[t]).forEach(function(e){o[i[t][e]]=[Number(t),Number(e)]})});var s=e.REQUIRED=0,a=e.OPTIONAL=1,u=e.DEFAULT=2,c=[["TransactionType",s],["Flags",a],["SourceTag",a],["LastLedgerSequence",a],["Account",s],["Sequence",s],["Fee",s],["OperationLimit",a],["SigningPubKey",s],["TxnSignature",a],["AccountTxnID",a],["Memos",a]];e.tx={AccountSet:[3].concat(c,[["EmailHash",a],["WalletLocator",a],["WalletSize",a],["MessageKey",a],["Domain",a],["TransferRate",a],["SetFlag",a],["ClearFlag",a]]),TrustSet:[20].concat(c,[["LimitAmount",a],["QualityIn",a],["QualityOut",a]]),OfferCreate:[7].concat(c,[["TakerPays",s],["TakerGets",s],["Expiration",a],["OfferSequence",a]]),OfferCancel:[8].concat(c,[["OfferSequence",s]]),SetRegularKey:[5].concat(c,[["RegularKey",a]]),Payment:[0].concat(c,[["Destination",s],["Amount",s],["SendMax",a],["Paths",u],["InvoiceID",a],["DestinationTag",a]]),Contract:[9].concat(c,[["Expiration",s],["BondAmount",s],["StampEscrow",s],["RippleEscrow",s],["CreateCode",a],["FundCode",a],["RemoveCode",a],["ExpireCode",a]]),RemoveContract:[10].concat(c,[["Target",s]]),EnableFeature:[100].concat(c,[["Feature",s]]),EnableAmendment:[100].concat(c,[["Amendment",s]]),SetFee:[101].concat(c,[["BaseFee",s],["ReferenceFeeUnits",s],["ReserveBase",s],["ReserveIncrement",s]]),TicketCreate:[10].concat(c,[["Target",a],["Expiration",a]]),TicketCancel:[11].concat(c,[["TicketID",s]])};var f=[["LedgerIndex",a],["LedgerEntryType",s],["Flags",s]];e.ledger={AccountRoot:[97].concat(f,[["Sequence",s],["PreviousTxnLgrSeq",s],["TransferRate",a],["WalletSize",a],["OwnerCount",s],["EmailHash",a],["PreviousTxnID",s],["AccountTxnID",a],["WalletLocator",a],["Balance",s],["MessageKey",a],["Domain",a],["Account",s],["RegularKey",a]]),Contract:[99].concat(f,[["PreviousTxnLgrSeq",s],["Expiration",s],["BondAmount",s],["PreviousTxnID",s],["Balance",s],["FundCode",a],["RemoveCode",a],["ExpireCode",a],["CreateCode",a],["Account",s],["Owner",s],["Issuer",s]]),DirectoryNode:[100].concat(f,[["IndexNext",a],["IndexPrevious",a],["ExchangeRate",a],["RootIndex",s],["Owner",a],["TakerPaysCurrency",a],["TakerPaysIssuer",a],["TakerGetsCurrency",a],["TakerGetsIssuer",a],["Indexes",s]]),EnabledFeatures:[102].concat(f,[["Features",s]]),FeeSettings:[115].concat(f,[["ReferenceFeeUnits",s],["ReserveBase",s],["ReserveIncrement",s],["BaseFee",s],["LedgerIndex",a]]),GeneratorMap:[103].concat(f,[["Generator",s]]),LedgerHashes:[104].concat(f,[["LedgerEntryType",s],["Flags",s],["FirstLedgerSequence",a],["LastLedgerSequence",a],["LedgerIndex",a],["Hashes",s]]),Nickname:[110].concat(f,[["LedgerEntryType",s],["Flags",s],["LedgerIndex",a],["MinimumOffer",a],["Account",s]]),Offer:[111].concat(f,[["LedgerEntryType",s],["Flags",s],["Sequence",s],["PreviousTxnLgrSeq",s],["Expiration",a],["BookNode",s],["OwnerNode",s],["PreviousTxnID",s],["LedgerIndex",a],["BookDirectory",s],["TakerPays",s],["TakerGets",s],["Account",s]]),RippleState:[114].concat(f,[["LedgerEntryType",s],["Flags",s],["PreviousTxnLgrSeq",s],["HighQualityIn",a],["HighQualityOut",a],["LowQualityIn",a],["LowQualityOut",a],["LowNode",a],["HighNode",a],["PreviousTxnID",s],["LedgerIndex",a],["Balance",s],["LowLimit",s],["HighLimit",s]])},e.metadata=[["TransactionIndex",s],["TransactionResult",s],["AffectedNodes",s]],e.ter={tesSUCCESS:0,tecCLAIM:100,tecPATH_PARTIAL:101,tecUNFUNDED_ADD:102,tecUNFUNDED_OFFER:103,tecUNFUNDED_PAYMENT:104,tecFAILED_PROCESSING:105,tecDIR_FULL:121,tecINSUF_RESERVE_LINE:122,tecINSUF_RESERVE_OFFER:123,tecNO_DST:124,tecNO_DST_INSUF_XRP:125,tecNO_LINE_INSUF_RESERVE:126,tecNO_LINE_REDUNDANT:127,tecPATH_DRY:128,tecUNFUNDED:129,tecMASTER_DISABLED:130,tecNO_REGULAR_KEY:131,tecOWNERS:132,tecNO_ISSUER:133,tecNO_AUTH:134,tecNO_LINE:135,tecINSUFF_FEE:136,tecFROZEN:137,tecNO_TARGET:138,tecNO_PERMISSION:139,tecNO_ENTRY:140,tecINSUFFICIENT_RESERVE:141,tecNEED_MASTER_KEY:142,tecDST_TAG_NEEDED:143,tecINTERNAL:144}},function(t,e,r){"use strict";function n(t){for(var e=t.toPrecision(16).replace(/\./,"").replace(/e.*/,"").replace(/^0*/,"");e.length<16;)e+="0";return e}function i(t,e){return function(){console.log("%s: %s",i,arguments.toString),e(arguments)}}function o(t,e){for(var r=new Array(t),n=0;t>n;n++)r[n]=e;return r}function s(t){var e=[],r=0;for(t.length%2&&(e.push(String.fromCharCode(parseInt(t.substring(0,1),16))),r=1);r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substring(r,r+2),16)));return e.join("")}function a(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);e+=16>n?"0"+n.toString(16):n.toString(16)}return e}function u(t){for(var e=new Array(t.length),r=0;r<e.length;r+=1)e[r]=t.charCodeAt(r);return e}function c(t){return u(s(t))}function f(t){return t.map(function(t){var e=t.toString(16);return e.length>1?e:"0"+e}).join("")}function h(t,e,r){var n=[],i=0,o=t.length;for(r&&(i=t.length%e,i&&n.push(t.slice(0,i)));o>i;i+=e)n.push(t.slice(i,e+i));return n}function l(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:"."))}function p(t){for(var e={},r=[],n=0,i=t.length;i>n;n++){var o=t[n];e[o]||(r.push(o),e[o]=!0)}return r}function d(t){return 1e3*(t+946684800)}function _(t){var e=t instanceof Date?t.getTime():t;return Math.round(e/1e3)-946684800}e.time={fromRipple:d,toRipple:_},e.trace=i,e.arraySet=o,e.hexToString=s,e.hexToArray=c,e.stringToArray=u,e.stringToHex=a,e.arrayToHex=f,e.chunkString=h,e.assert=l,e.arrayUnique=p,e.toTimestamp=d,e.fromTimestamp=_,e.getMantissaDecimalString=n,e.sjcl=r(52),r(37)},function(t,e,r){"use strict";function n(t,e){function r(){var t=i._checkActivity.bind(i);i._activityInterval=setInterval(t,1e3)}u.call(this);var i=this,o=void 0;if("string"==typeof e){var c=s.parse(e);o={host:c.hostname,port:c.port,secure:"ws:"===c.protocol?!1:!0}}else o=e;if("object"!=typeof o)throw new TypeError("Server configuration is not an Object");if(!n.DOMAIN_RE.test(o.host))throw new Error('Server host is malformed, use "host" and "port" server configuration');if(o.port=Number(o.port),isNaN(o.port))throw new TypeError("Server port must be a number");if(o.port<1||o.port>65535)throw new TypeError('Server "port" must be an integer in range 1-65535');"boolean"!=typeof o.secure&&(o.secure=!0),this._remote=t,this._opts=o,this._ws=void 0,this._connected=!1,this._shouldConnect=!1,this._state="offline",this._ledgerRanges=new h,this._ledgerMap=new a({max:200}),this._id=0,this._retry=0,this._requests={},this._load_base=256,this._load_factor=256,this._fee=10,this._fee_ref=10,this._fee_base=10,this._reserve_base=void 0,this._reserve_inc=void 0,this._fee_cushion=this._remote.fee_cushion,this._lastLedgerIndex=0/0,this._lastLedgerClose=0/0,this._score=0,this._scoreWeights={ledgerclose:5,response:1},this._pubkey_node="",this._url=this._opts.url=(this._opts.secure?"wss://":"ws://")+this._opts.host+":"+this._opts.port,this.on("message",function(t){i._handleMessage(t)}),this.on("response_subscribe",function(t){i._handleResponseSubscribe(t)}),this.on("disconnect",function(){clearInterval(i._activityInterval),i.once("ledger_closed",r)}),this.once("ledger_closed",r),this._remote.on("ledger_closed",function(t){i._updateScore("ledgerclose",t)}),this.on("response_ping",function(t,e){i._updateScore("response",e)}),this.on("load_changed",function(t){i._updateScore("loadchange",t)}),this.on("connect",function(){i.requestServerID()})}var i=r(42),o=r(41),s=r(44),a=r(50),u=r(40).EventEmitter,c=r(14).RippleError,f=r(3).Amount,h=r(21).RangeSet,l=r(23).internal.sub("server");o.inherits(n,u),n.DOMAIN_RE=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|[-_]){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|[-_]){0,61}[0-9A-Za-z])?)*\.?$/,n.TLS_ERRORS=["UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"],n.onlineStates=["syncing","tracking","proposing","validating","full"],n.websocketConstructor=function(){return r(34)},n.prototype._setState=function(t){if(t!==this._state)switch(this._remote.trace&&l.info(this.getServerID(),"set_state:",t),this._state=t,this.emit("state",t),t){case"online":this._connected=!0,this._retry=0,this.emit("connect");break;case"offline":this._connected=!1,this.emit("disconnect")}},n.prototype._checkActivity=function(){if(this.isConnected()&&!isNaN(this._lastLedgerClose)){var t=Date.now()-this._lastLedgerClose;t>25e3&&(this._remote.trace&&l.info(this.getServerID(),"reconnect: activity delta:",t),this.reconnect())}},n.prototype.requestServerID=function(){var t=this;if(!this._pubkey_node){this.on("response_server_info",function(e){try{t._pubkey_node=e.info.pubkey_node}catch(r){l.warn("Failed to get server pubkey_node",e)}});var e=this._remote.requestServerInfo();e.on("error",function(){}),this._request(e)}},n.prototype._updateScore=function(t,e){if(this.isConnected()){var r=this._scoreWeights[t]||1,n=void 0;
switch(t){case"ledgerclose":n=e.ledger_index-this._lastLedgerIndex,n>0&&(this._score+=r*n);break;case"response":n=Math.floor((Date.now()-e.time)/200),this._score+=r*n;break;case"loadchange":this._fee=Number(this._computeFee(10))}this._score>1e3&&(this._remote.trace&&l.info(this.getServerID(),"reconnect: score:",this._score),this.reconnect())}},n.prototype.getRemoteAddress=n.prototype._remoteAddress=function(){try{return this._ws._socket.remoteAddress}catch(t){l.warn("Cannot get remote address. Does not work in browser")}},n.prototype.getHostID=n.prototype.getServerID=function(){return this._url+" ("+(this._pubkey_node?this._pubkey_node:"")+")"},n.prototype.disconnect=function(){var t=this;return this.isConnected()?(this._lastLedgerIndex=0/0,this._lastLedgerClose=0/0,this._score=0,this._shouldConnect=!1,this._ledgerRanges.reset(),this._ledgerMap.reset(),this._setState("offline"),void(this._ws&&this._ws.close())):void this.once("socket_open",function(){t.disconnect()})},n.prototype.reconnect=function(){function t(){e._shouldConnect=!0,e._retry=0,e.connect()}var e=this;this._ws&&this._shouldConnect&&(this.isConnected()?(this.once("disconnect",t),this.disconnect()):t())},n.prototype.connect=function(){var t=this,e=n.websocketConstructor();if(!e)throw new Error("No websocket support detected!");if(!this.isConnected()){this._ws&&this._ws.close(),this._remote.trace&&l.info(this.getServerID(),"connect");var r=this._ws=new e(this._opts.url);this._shouldConnect=!0,t.emit("connecting"),r.onmessage=function(e){var r=e.data;try{r=JSON.parse(r)}catch(n){var i=new c("unexpected","Unexpected response from server: "+JSON.stringify(r));return t.emit("unexpected",r),void l.error(i)}t.emit("message",r)},r.onopen=function(){r===t._ws&&(t.emit("socket_open"),t._request(t._remote._serverPrepareSubscribe(t)))},r.onerror=function(e){if(r===t._ws){if(t.emit("socket_error"),t._remote.trace&&l.info(t.getServerID(),"onerror:",e.data||e),-1!==n.TLS_ERRORS.indexOf(e.message))throw e;t._handleClose()}},r.onclose=function(){r===t._ws&&(t._remote.trace&&l.info(t.getServerID(),"onclose:",r.readyState),t._handleClose())}}},n.prototype._retryConnect=function(){function t(){e._shouldConnect&&(e._remote.trace&&l.info(e.getServerID(),"retry",e._retry),e.connect())}var e=this;this._retry+=1;var r=this._retry<40?50:this._retry<100?1e3:this._retry<160?1e4:3e4;this._retryTimer=setTimeout(t,r)},n.prototype._handleClose=function(){var t=this._ws;t.onopen=t.onerror=t.onclose=t.onmessage=i.noop,this.emit("socket_close"),this._setState("offline"),this._shouldConnect&&this._retryConnect()},n.prototype._handleMessage=function(t){if(!n.isValidMessage(t))return void this.emit("unexpected",t);switch(t.type){case"ledgerClosed":this._handleLedgerClosed(t);break;case"serverStatus":this._handleServerStatus(t);break;case"response":this._handleResponse(t);break;case"path_find":this._handlePathFind(t)}},n.prototype._handleLedgerClosed=function(t){this._lastLedgerIndex=t.ledger_index,this._lastLedgerClose=Date.now(),this._ledgerRanges.add(t.ledger_index),this._ledgerMap.set(t.ledger_hash,t.ledger_index),this.emit("ledger_closed",t)},n.prototype._handleServerStatus=function(t){var e=~n.onlineStates.indexOf(t.server_status);if(this._setState(e?"online":"offline"),n.isLoadStatus(t)){this.emit("load",t,this),this._remote.emit("load",t,this);var r=t.load_base!==this._load_base||t.load_factor!==this._load_factor;r&&(this._load_base=t.load_base,this._load_factor=t.load_factor,this.emit("load_changed",t,this),this._remote.emit("load_changed",t,this))}},n.prototype._handleResponse=function(t){var e=this,r=this._requests[t.id];return delete this._requests[t.id],r?void("success"===t.status?!function(){e._remote.trace&&l.info(e.getServerID(),"response:",t);var n=r.message.command,i=t.result,o="response_"+n;r.emit("success",i),[e,e._remote].forEach(function(e){e.emit(o,i,r,t)})}():t.error&&(this._remote.trace&&l.info(this.getServerID(),"error:",t),r.emit("error",{error:"remoteError",error_message:"Remote reported an error.",remote:t}))):void(this._remote.trace&&l.info(this.getServerID(),"UNEXPECTED:",t))},n.prototype._handlePathFind=function(t){this._remote.trace&&l.info(this.getServerID(),"path_find:",t)},n.prototype._handleResponseSubscribe=function(t){if(!this.isConnected()){if(!this._remote.allow_partial_history&&!n.hasFullLedgerHistory(t))return void this.reconnect();t.pubkey_node&&(this._pubkey_node=t.pubkey_node),n.isLoadStatus(t)&&(this._load_base=t.load_base||256,this._load_factor=t.load_factor||256,this._fee_ref=t.fee_ref||10,this._fee_base=t.fee_base||10,this._reserve_base=t.reserve_base,this._reserve_inc=t.reserve_inc),t.validated_ledgers&&this._ledgerRanges.add(t.validated_ledgers),~n.onlineStates.indexOf(t.server_status)&&this._setState("online")}},n.hasFullLedgerHistory=function(t){return"object"==typeof t&&"full"===t.server_status&&"string"==typeof t.validated_ledgers&&2===t.validated_ledgers.split("-").length},n.isValidMessage=function(t){return"object"==typeof t&&"string"==typeof t.type},n.isLoadStatus=function(t){return"object"==typeof t&&"number"==typeof t.load_base&&"number"==typeof t.load_factor},n.prototype._sendMessage=function(t){this._ws&&(this._remote.trace&&l.info(this.getServerID(),"request:",t),this._ws.send(JSON.stringify(t)))},n.prototype._request=function(t){function e(){r._sendMessage(t.message)}var r=this;if(!this._ws)return void(this._remote.trace&&l.info(this.getServerID(),"request: DROPPING:",t.message));t.server=this,t.message.id=this._id,t.time=Date.now(),this._requests[t.message.id]=t,this._id++;var n=1===this._ws.readyState,i=t&&"subscribe"===t.message.command;this.isConnected()||n&&i?e():this.once("connect",e)},n.prototype.isConnected=n.prototype._isConnected=function(){return this._connected},n.prototype._computeFee=function(t){if(isNaN(t))throw new Error("Invalid argument");return this._feeTx(Number(t)).to_json()},n.prototype._feeTx=function(t){var e=this._feeTxUnit();return f.from_json(String(Math.ceil(t*e)))},n.prototype._feeTxUnit=function(){var t=this._fee_base/this._fee_ref;return t*=this._load_factor/this._load_base,t*=this._fee_cushion},n.prototype._reserve=function(t){var e=f.from_json(String(this._reserve_base)),r=f.from_json(String(this._reserve_inc)),n=t||0;if(0>n)throw new Error("Owner count must not be negative.");return e.add(r.product_human(n))},n.prototype.hasLedger=function(t){var e=!1;return"string"==typeof t&&/^[A-F0-9]{64}$/.test(t)?e=this._ledgerMap.has(t):null===t||isNaN(t)||(e=this._ledgerRanges.has(t)),e},n.prototype.getLastLedger=n.prototype.getLastLedgerIndex=function(){return this._lastLedgerIndex},e.Server=n},function(t,e,r){"use strict";function n(){this.ledger_json={}}var i=r(5).Transaction,o=r(35).SHAMap,s=r(35).SHAMapTreeNode,a=r(13).SerializedObject,u=r(26),c=r(9).UInt160,f=r(6).Currency;n.from_json=function(t){var e=new n;return e.parse_json(t),e},n.space=r(36),n.calcAccountRootEntryHash=n.prototype.calcAccountRootEntryHash=function(t){t=c.from_json(t);var e=new a;return e.append([0,n.space.account.charCodeAt(0)]),e.append(t.to_bytes()),e.hash()},n.calcOfferEntryHash=n.prototype.calcOfferEntryHash=function(t,e){t=c.from_json(t),e=parseInt(e,10);var r=new a;return r.append([0,n.space.offer.charCodeAt(0)]),r.append(t.to_bytes()),u.Int32.serialize(r,e),r.hash()},n.calcRippleStateEntryHash=n.prototype.calcRippleStateEntryHash=function(t,e,r){if(r=f.from_json(r),t=c.from_json(t),e=c.from_json(e),!t.is_valid())throw new Error("Invalid first account");if(!e.is_valid())throw new Error("Invalid second account");if(!r.is_valid())throw new Error("Invalid currency");if(t.to_bn().greaterEquals(e.to_bn())){var i=e;e=t,t=i}var o=new a;return o.append([0,n.space.rippleState.charCodeAt(0)]),o.append(t.to_bytes()),o.append(e.to_bytes()),o.append(r.to_bytes()),o.hash()},n.prototype.parse_json=function(t){this.ledger_json=t},n.prototype.calc_tx_hash=function(){var t=new o;return this.ledger_json.transactions.forEach(function(e){var r=i.from_json(e),n=a.from_json(e.metaData),o=new a;u.VariableLength.serialize(o,r.serialize().to_hex()),u.VariableLength.serialize(o,n.to_hex()),t.add_item(r.hash(),o,s.TYPE_TRANSACTION_MD)}),t.hash()},n.prototype.calc_account_hash=function(t){var e,r=new o;if(this.ledger_json.accountState.forEach(function(n){var i,o=a.from_json(n);if(t&&t.sanity_test)try{i=o.to_json(),o=a.from_json(i)}catch(u){console.log("account state item: ",n),console.log("to_json() ",i),console.log("exception: ",u),e=!0}r.add_item(n.index,o,s.TYPE_ACCOUNT_STATE)}),e)throw new Error("There were errors with sanity_test");return r.hash()},e.Ledger=n},function(t,e,r){"use strict";function n(){this._queue=[],this._idCache=new o({max:200}),this._sequenceCache=new o({max:200})}var i=r(42),o=r(50),s=r(5).Transaction;n.prototype.addReceivedSequence=function(t){this._sequenceCache.set(String(t),!0)},n.prototype.hasSequence=function(t){return this._sequenceCache.has(String(t))},n.prototype.addReceivedId=function(t,e){this._idCache.set(t,e)},n.prototype.getReceived=function(t){return this._idCache.get(t)},n.prototype.getSubmission=function(t){return i.find(this._queue,function(e){return i.contains(e.submittedIDs,t)})},n.prototype.getMinLedger=function(){if(this.length()<1)return-1;for(var t=1/0,e=0;e<this.length();e++)this._queue[e].initialSubmitIndex<t&&(t=this._queue[e].initialSubmitIndex);return isFinite(t)||(t=-1),t},n.prototype.remove=function(t){var e=this._queue.length;if("string"==typeof t&&(t=this.getSubmission(t)),t instanceof s)for(;e--;)if(this._queue[e]===t){this._queue.splice(e,1);break}},n.prototype.push=function(t){this._queue.push(t)},n.prototype.forEach=function(t){this._queue.forEach(t)},n.prototype.length=n.prototype.getLength=function(){return this._queue.length},n.prototype.getQueue=function(){return this._queue},e.TransactionQueue=n},function(t,e,r){"use strict";function n(){this._ranges=[]}var i=r(38),o=r(42);n.prototype.add=function(t){if(i("number"!=typeof t||!isNaN(t),"Ledger range malformed"),t=String(t).split(","),t.length>1)return t.forEach(this.add,this);t=t[0].split("-").map(Number);var e={start:t[0],end:t[1===t.length?0:1]};i(e.start<=e.end,"Ledger range malformed");var r=o.sortedIndex(this._ranges,e,function(t){return t.start});this._ranges.splice(r,0,e)},n.prototype.has=n.prototype.contains=function(t){return i(null!=t&&!isNaN(t),"Ledger must be a number"),t=Number(t),this._ranges.some(function(e){return t>=e.start&&t<=e.end})},n.prototype.reset=function(){this._ranges=[]},e.RangeSet=n},function(t){"use strict";function e(t){for(;0===t[0];)t.shift();return t}function r(t,r,n){for(var i=0,o=[],s=0;s<t.length;s++){var a=i*r+parseInt(t[s],10);o.push(Math.floor(a/n)),i=a%n}return{quotient:e(o),remainder:i}}function n(t,n,i){for(var o=[],s=t;s.length>0;){var a=r(s,n,i);o.unshift(a.remainder),s=a.quotient}return e(o)}t.exports=n},function(t,e,r){"use strict";function n(t){this._namespace=t?Array.isArray(t)?t:[String(t)]:[],this._prefix=this._namespace.concat([""]).join(": ")}function i(t,e){var r=(new Error).stack;return["["+(new Date).toISOString()+"]",t,"--","string"==typeof r?r.split("\n")[4].replace(/^\s+/,""):"","\n"].concat(e)}function o(t,e){switch(t){case 1:case 2:console.log.apply(console,e);break;case 3:console.warn.apply(console,e);break;case 4:console.error.apply(console,e)}}var s=r(38);n.prototype.sub=function(t){var e=this._namespace.slice();t&&"string"==typeof t&&e.push(t);var r=new n(e);return r._setParent(this),r},n.prototype._setParent=function(t){this._parent=t},n.makeLevel=function(t){return function(){var e=Array.prototype.slice.apply(arguments);e[0]=this._prefix+e[0],n.engine.logObject.apply(n,[t].concat(e[0],[e.slice(2)]))}},n.prototype.debug=n.makeLevel(1),n.prototype.info=n.makeLevel(2),n.prototype.warn=n.makeLevel(3),n.prototype.error=n.makeLevel(4);var a={};a.basic={logObject:function(t,e,r){var n=r.map(function(t){return JSON.stringify(t,null,2)});o(t,i(e,n))}},a.interactive={logObject:function(t,e,r){var n=r.map(function(t){return/MSIE/.test(navigator.userAgent)?JSON.stringify(t,null,2):t});o(t,i(e,n))}},a.none={logObject:function(){}},n.getEngine=n.prototype.getEngine=function(){return n.engine},n.setEngine=n.prototype.setEngine=function(t){s.strictEqual(typeof t,"object"),s.strictEqual(typeof t.logObject,"function"),n.engine=t},n.setEngine("undefined"!=typeof window&&"undefined"!=typeof console?a.interactive:"undefined"!=typeof console&&console.log?a.basic:a.none),t.exports=new n,t.exports.internal=t.exports.sub(),t.exports.Log=n,t.exports.engines=a},function(t,e,r){"use strict";function n(t,e,r,n,o){i.call(this),this.remote=t,this.src_account=e,this.dst_account=r,this.dst_amount=n,this.src_currencies=o}{var i=r(40).EventEmitter,o=r(41),s=r(3).Amount;r(39)}o.inherits(n,i),n.prototype.create=function(){var t=this,e=this.remote.request_path_find_create(this.src_account,this.dst_account,this.dst_amount,this.src_currencies);e.once("error",function(e){t.emit("error",e)}),e.once("success",function(e){t.notify_update(e)}),e.broadcast().request()},n.prototype.close=function(){this.remote.request_path_find_close().broadcast().request(),this.emit("end"),this.emit("close")},n.prototype.notify_update=function(t){var e=t.source_account,r=t.destination_account,n=s.from_json(t.destination_amount);this.src_account===e&&this.dst_account===r&&this.dst_amount.equals(n)&&this.emit("update",t)},n.prototype.notify_superceded=function(){this.emit("end"),this.emit("superceded")},e.PathFind=n},function(t,e,r){"use strict";function n(t){function e(t){n._updatePendingStatus(t)}function r(){n._handleReconnect(function(){n._remote.on("ledger_closed",e)})}u.call(this);var n=this;this._account=t,this._accountID=t._account_id,this._remote=t._remote,this._nextSequence=void 0,this._maxFee=this._remote.max_fee,this._maxAttempts=this._remote.max_attempts,this._submissionTimeout=this._remote.submission_timeout,this._lastLedgerOffset=this._remote.last_ledger_offset,this._pending=new h,this._account.on("transaction-outbound",function(t){n._transactionReceived(t)}),this._remote.on("load_changed",function(t){n._adjustFees(t)}),this._remote.on("ledger_closed",e),this._remote.on("disconnect",function(){n._remote.removeListener("ledger_closed",e),n._remote.once("connect",r)}),this._loadSequence()}var i=r(28)["default"],o=r(41),s=r(38),a=r(51),u=r(40).EventEmitter,c=r(5).Transaction,f=r(14).RippleError,h=r(20).TransactionQueue,l=r(23).internal.sub("transactionmanager");o.inherits(n,u),n._isNoOp=function(t){return"object"==typeof t&&"object"==typeof t.tx_json&&"AccountSet"===t.tx_json.TransactionType&&0===t.tx_json.Flags},n._isRemoteError=function(t){return"object"==typeof t&&"remoteError"===t.error&&"object"==typeof t.remote},n._isNotFound=function(t){return n._isRemoteError(t)&&/^(txnNotFound|transactionNotFound)$/.test(t.remote.error)},n._isTooBusy=function(t){return n._isRemoteError(t)&&"tooBusy"===t.remote.error},n.normalizeTransaction=function(t){for(var e={},r=i(t),n=0;n<r.length;n++){var o=r[n];switch(o){case"transaction":e.tx_json=t[o];break;case"tx":e.engine_result=t.meta.TransactionResult,e.result=e.engine_result,e.tx_json=t[o],e.hash=t[o].hash,e.ledger_index=t[o].ledger_index,e.type="transaction",e.validated=t.validated;break;case"meta":case"metadata":e.metadata=t[o];break;case"mmeta":break;default:e[o]=t[o]}}return e},n.prototype._transactionReceived=function(t){var e=n.normalizeTransaction(t);if(e.validated&&e.tx_json.Account===this._accountID){this._remote.trace&&l.info("transaction received:",e.tx_json),this._pending.addReceivedSequence(e.tx_json.Sequence);var r=e.tx_json.hash,i=this._pending.getSubmission(r);if(!(i instanceof c))return void this._pending.addReceivedId(r,e);switch(e.engine_result){case"tesSUCCESS":i.emit("success",e);break;default:i.emit("error",e)}}},n.prototype._adjustFees=function(){function t(t){t.once("presubmit",function(){t.emit("error","tejMaxFeeExceeded")})}var e=this;this._remote.local_fee&&this._pending.forEach(function(r){if(!r._setFixedFee){var n=r.tx_json.Fee,i=r._computeFee();if(Number(i)>e._maxFee)return void t(r);r.tx_json.Fee=i,r.emit("fee_adjusted",n,i),e._remote.trace&&l.info("fee adjusted:",r.tx_json,n,i)}})},n.prototype.getPending=function(){return this._pending},n.prototype._updatePendingStatus=function(t){s.strictEqual(typeof t,"object"),s.strictEqual(typeof t.ledger_index,"number"),this._pending.forEach(function(e){if(!e.finalized){switch(t.ledger_index-e.submitIndex){case 4:e.emit("missing",t);break;case 8:e.emit("lost",t)}t.ledger_index>e.tx_json.LastLedgerSequence&&e.emit("error",new f("tejMaxLedger","Transaction LastLedgerSequence exceeded"))}})},n.prototype._fillSequence=function(t,e){function r(e,r){var n=i._remote.createTransaction("AccountSet",{account:i._accountID});n.tx_json.Sequence=e,t._secret&&n.secret(t._secret),n.once("submitted",r),n.submit()}function n(n,o){if("number"!=typeof o)return l.info("fill sequence: failed to fetch account transaction sequence"),e();var s=t.tx_json.Sequence-o,u=0;a.whilst(function(){return s>u},function(t){r(o,function(e){++u,"tesSUCCESS"===e.engine_result&&i.emit("sequence_filled",n),t()})},function(){e&&e()})}var i=this;this._loadSequence(n)},n.prototype._loadSequence=function(t){function e(t,e){return(t||"number"!=typeof e)&&r._remote.trace?void l.info("error requesting account transaction sequence",t):(r._nextSequence=e,r.emit("sequence_loaded",e),void n(t,e))}var r=this,n="function"==typeof t?t:function(){};this._account.getNextSequence(e)},n.prototype._handleReconnect=function(t){function e(t,e){return t||"object"!=typeof e?(r._remote.trace&&l.info("error requesting account_tx",t),void n()):(Array.isArray(e.transactions)&&e.transactions.forEach(r._transactionReceived,r),n(),void r._loadSequence(function(){r._resubmit()}))}var r=this,n="function"==typeof t?t:function(){};if(!this._pending.length())return void n();var i={account:this._accountID,ledger_index_min:this._pending.getMinLedger(),ledger_index_max:-1,binary:!0,parseBinary:!0,limit:20};this._remote.requestAccountTx(i,e)},n.prototype._waitLedgers=function(t,e){function r(){++i===t&&(n._remote.removeListener("ledger_closed",r),e())}if(s.strictEqual(typeof t,"number"),s.strictEqual(typeof e,"function"),1>t)return e();var n=this,i=0;this._remote.on("ledger_closed",r)},n.prototype._resubmit=function(t,e){function r(t,e){if(t&&!t.finalized){var r=t.findId(n._pending._idCache);if(r)switch(r.engine_result){case"tesSUCCESS":t.emit("success",r);break;default:t.emit("error",r)}for(;n._pending.hasSequence(t.tx_json.Sequence);)t.tx_json.Sequence+=1,n._remote.trace&&l.info("incrementing sequence:",t.tx_json);n._remote.trace&&l.info("resubmit:",t.tx_json),t.once("submitted",function(r){t.emit("resubmitted",r),e()}),n._request(t)}}var n=this,i=t,o=e;1===arguments.length&&(o=i,i=0),i=i||0,o=o instanceof c?[o]:this.getPending().getQueue(),this._waitLedgers(i,function(){a.eachSeries(o,r)})},n.prototype._prepareRequest=function(t){var e=this._remote.requestSubmit();if(this._remote.local_signing){t.sign();var r=t.serialize();e.tx_blob(r.to_hex());var n=t.hash(null,null,r);t.addId(n)}else e.build_path(t._build_path),e.secret(t._secret),e.tx_json(t.tx_json);return e},n.prototype._request=function(t){function e(e){"tefPAST_SEQ"===e.engine_result&&u._resubmit(1,t)}function r(){u._fillSequence(t,function(){u._resubmit(1,t)})}function i(e){"telINSUF_FEE_P"===e.engine_result&&u._resubmit(1,t)}function o(e){n._isTooBusy(e)?u._resubmit(1,t):(u._nextSequence--,t.emit("error",e))}function s(n){if(!t.finalized)switch(n.tx_json&&n.tx_json.hash&&t.addId(n.tx_json.hash),n.result=n.engine_result||"",t.result=n,t.responses+=1,c.trace&&l.info("submit response:",n),t.emit("submitted",n),n.result.slice(0,3)){case"tes":t.emit("proposed",n);break;case"tec":break;case"ter":r(n);break;case"tef":e(n);break;case"tel":i(n);break;default:o(n)}}function a(){t.finalized||(t.emit("timeout"),c.isConnected()&&(c.trace&&l.info("timeout:",t.tx_json),u._resubmit(1,t)))}var u=this,c=this._remote;if(!t.finalized){if(t.attempts>this._maxAttempts)return void t.emit("error",new f("tejAttemptsExceeded"));if(t.attempts>0&&!c.local_signing){var h="Automatic resubmission requires local signing";return void t.emit("error",new f("tejLocalSigningRequired",h))}c.trace&&l.info("submit transaction:",t.tx_json),t.submitIndex=this._remote._ledger_current_index,0===t.attempts&&(t.initialSubmitIndex=t.submitIndex),t._setLastLedger||(t.tx_json.LastLedgerSequence=t.initialSubmitIndex+this._lastLedgerOffset),t.lastLedgerSequence=t.tx_json.LastLedgerSequence,c.local_signing&&t.sign();var p=this._prepareRequest(t);p.once("error",s),p.once("success",s),t.emit("presubmit"),p.broadcast().request(),t.attempts++,t.emit("postsubmit"),p.timeout(u._submissionTimeout,a)}},n.prototype.submit=function(t){var e=this;if("number"!=typeof this._nextSequence)return void this.once("sequence_loaded",function(){e.submit(t)});if(!t.finalized){if("number"!=typeof t.tx_json.Sequence&&(t.tx_json.Sequence=this._nextSequence++),t.once("cleanup",function(){e.getPending().remove(t)}),!t.complete())return void this._nextSequence--;this._pending.push(t),this._request(t)}},e.TransactionManager=n},function(t,e,r){"use strict";function n(t){v(this,t)}function i(t){return"number"==typeof t&&isFinite(t)}function o(t){return"string"==typeof t}function s(t){return o(t)&&/^[0-9A-F]{0,16}$/i.test(t)}function a(t,e,r){var i=x.codec.bytes.fromBits(e);r||n.serialize_varint(t,i.length),t.append(i)}function u(t,e,r){a(t,x.codec.hex.toBits(e),r)}function c(t){return x.codec.hex.fromBits(x.codec.bytes.toBits(t)).toUpperCase()}function f(t){var e=x.codec.hex.toBits(t);return x.codec.utf8String.fromBits(e)}function h(t){function e(t,e){var r=E.fieldsInverseMap[t],n=r[0],i=r[1],o=E.fieldsInverseMap[e],s=o[0],a=o[1];return n!==s?n-s:i-a}return t.sort(e)}function l(t,e){if(!i(t))throw new Error("Value is not a number",e);if(0>t||t>=Math.pow(256,e))throw new Error("Value out of bounds ");for(var r=[],n=0;e>n;n++)r.unshift(t>>>8*n&255);return r}function p(t,e){var r=0;if(e>4)throw new Error("This function only supports up to four bytes.");for(var n=0;e>n;n++){var i=t.read(1)[0];r+=i<<8*(e-n-1)}return r>>>0}function d(t,r,n){var i=E.fieldsInverseMap[r],o=i[0],s=i[1],a=(16>o?o<<4:0)|(16>s?s:0);"LedgerEntryType"===r&&"string"==typeof n&&(n=E.ledger[n][0]),"TransactionResult"===r&&"string"==typeof n&&(n=E.ter[n]),k.serialize(t,a),o>=16&&k.serialize(t,o),s>=16&&k.serialize(t,s);var u;u="Memo"===r&&"object"==typeof n?e.STMemo:e[E.types[o]];try{u.serialize(t,n)}catch(c){throw c.message+=" ("+r+")",c}}function _(t){var r=t.read(1)[0],n=r>>4;0===n&&(n=t.read(1)[0]);var i=15&r,o=o=0===i?E.fields[n][t.read(1)[0]]:E.fields[n][i];y(o,"Unknown field - header byte is 0x"+r.toString(16));var s="Memo"===o?e.STMemo:e[E.types[n]];return y(s,"Unknown type - header byte is 0x"+r.toString(16)),[o,s.parse(t)]}var g=r(28)["default"],y=r(38),v=r(39),m=r(49),b=r(3).Amount,w=r(6).Currency,E=r(16),A=r(17),x=A.sjcl,F=x.bn,C=r(8).UInt128,B=r(9).UInt160,S=r(10).UInt256,D=r(7).Base,T=m.another({ROUNDING_MODE:m.ROUND_HALF_UP,DECIMAL_PLACES:40});n.serialize_varint=function(t,e){if(0>e)throw new Error("Variable integers are unsigned.");if(192>=e)t.append([e]);else if(12480>=e)e-=193,t.append([193+(e>>>8),255&e]);else{if(!(918744>=e))throw new Error("Variable integer overflow.");e-=12481,t.append([241+(e>>>16),e>>>8&255,255&e])}},n.prototype.parse_varint=function(t){var e,r,n,i=t.read(1)[0];if(i>254)throw new Error("Invalid varint length indicator");return 192>=i?n=i:240>=i?(e=t.read(1)[0],n=193+256*(i-193)+e):254>=i&&(e=t.read(1)[0],r=t.read(1)[0],n=12481+65536*(i-241)+256*e+r),n};var k=e.Int8=new n({serialize:function(t,e){t.append(l(e,1))},parse:function(t){return p(t,1)}});k.id=16,e.serialize=e.serialize_whatever=d,e.parse=e.parse_whatever=_;var O=e.Int16=new n({serialize:function(t,e){t.append(l(e,2))},parse:function(t){return p(t,2)}});O.id=1;var I=e.Int32=new n({serialize:function(t,e){t.append(l(e,4))},parse:function(t){return p(t,4)}});I.id=2;var R=e.Int64=new n({serialize:function(t,e){var r;if(i(e)){if(e=Math.floor(e),0>e)throw new Error("Negative value for unsigned Int64 is invalid.");r=new F(e,10)}else if(o(e)){if(!s(e))throw new Error("Not a valid hex Int64.");r=new F(e,16)}else{if(!(e instanceof F))throw new Error("Invalid type for Int64");if(!e.greaterEquals(0))throw new Error("Negative value for unsigned Int64 is invalid.");r=e}a(t,r.toBits(64),!0)},parse:function(t){var e=t.read(8);return F.fromBits(x.codec.bytes.toBits(e))}});R.id=3;var L=e.Hash128=new n({serialize:function(t,e){var r=C.from_json(e);if(!r.is_valid())throw new Error("Invalid Hash128");a(t,r.to_bits(),!0)},parse:function(t){return C.from_bytes(t.read(16))}});L.id=4;var j=e.Hash256=new n({serialize:function(t,e){var r=S.from_json(e);if(!r.is_valid())throw new Error("Invalid Hash256");a(t,r.to_bits(),!0)},parse:function(t){return S.from_bytes(t.read(32))}});j.id=5;var N=e.Hash160=new n({serialize:function(t,e){var r=B.from_json(e);if(!r.is_valid())throw new Error("Invalid Hash160");a(t,r.to_bits(),!0)},parse:function(t){return B.from_bytes(t.read(20))}});N.id=17;var q=new n({serialize:function(t,e){var r=e.to_bytes();if(!r)throw new Error("Tried to serialize invalid/unimplemented currency type.");t.append(r)},parse:function(t){var e=t.read(20),r=w.from_bytes(e);return r}});e.Quality=new n({serialize:function(t,e){var r=b.from_json(e);if(!r.is_valid())throw new Error("Not a valid Amount object.");var n=0,i=0,o=new T(r.to_text()),s=o.e-15;if(!r.is_zero()){n|=(100+s&255)<<24;var a=A.getMantissaDecimalString(o.abs()),u=new T(a).toString(16);y(u.length<=16,"Mantissa hex representation "+u+" exceeds the maximum length of 16"),n|=16777215&parseInt(u.slice(0,-8),16),i=parseInt(u.slice(-8),16)}var c=x.codec.bytes.fromBits([n,i]);t.append(c)}});var M=e.Amount=new n({serialize:function(t,e){var r=b.from_json(e);if(!r.is_valid())throw new Error("Not a valid Amount object.");var n=new T(r.to_text()),i=n.e-15,o=A.arraySet(8,0);if(r.is_native()){var s=n.abs().toString(16);if(b.strict_mode&&n.abs().greaterThan(b.bi_xns_max))throw new Error("Value out of bounds");if(b.strict_mode&&s.length>16)throw new Error("Value out of bounds");for(;s.length<16;)s="0"+s;o=x.codec.bytes.fromBits(x.codec.hex.toBits(s)),o[0]&=63,r.is_negative()||(o[0]|=64)}else{var a=0,u=0;if(a|=1<<31,!r.is_zero()){r.is_negative()||(a|=1<<30),a|=(97+i&255)<<22;var c=A.getMantissaDecimalString(n.abs()),f=new T(c).toString(16);y(f.length<=16,"Mantissa hex representation "+f+" exceeds the maximum length of 16"),a|=4194303&parseInt(f.slice(0,-8),16),u=parseInt(f.slice(-8),16)}o=x.codec.bytes.fromBits([a,u])}if(t.append(o),!r.is_native()){var h=r.currency();q.serialize(t,h,!0),t.append(r.issuer().to_bytes())}},parse:function(t){for(var e=t.read(8),r=!(127&e[0]),n=1;8>n;n++)r=r&&!e[n];var i=!(r||64&e[0]);if(128&e[0]){var o=q.parse(t),s=t.read(20),a=B.from_bytes(s);a.set_version(D.VER_ACCOUNT_ID);var u=((63&e[0])<<2)+(e[1]>>>6)-97,c=e.slice(1);c[0]&=63;var f=new T(A.arrayToHex(c),16),h=i?"-":"",l=h+f.toString()+"e"+u.toString();return b.from_json({currency:o,issuer:a.to_json(),value:l})}var p=e.slice();p[0]&=63;var d=A.arrayToHex(p),_=new T(d,16);return b.from_json((i?"-":"")+_.toString())}});M.id=6;var P=e.VariableLength=e.VL=new n({serialize:function(t,e){if("string"!=typeof e)throw new Error("Unknown datatype.");u(t,e)},parse:function(t){var e=this.parse_varint(t);return c(t.read(e))}});P.id=7;var U=e.Account=new n({serialize:function(t,e){var r=B.from_json(e);if(!r.is_valid())throw new Error("Invalid account!");a(t,r.to_bits())},parse:function(t){var e=this.parse_varint(t);if(20!==e)throw new Error("Non-standard-length account ID");var r=B.from_bytes(t.read(e));return r.set_version(D.VER_ACCOUNT_ID),r}});U.id=8;var z=e.PathSet=new n({typeBoundary:255,typeEnd:0,typeAccount:1,typeCurrency:16,typeIssuer:32,serialize:function(t,e){for(var r=0,n=e.length;n>r;r++){r&&k.serialize(t,this.typeBoundary);for(var i=0,o=e[r].length;o>i;i++){var s=e[r][i],a=0;if(s.account&&(a|=this.typeAccount),s.currency&&(a|=this.typeCurrency),s.issuer&&(a|=this.typeIssuer),k.serialize(t,a),s.account&&N.serialize(t,s.account),s.currency){var u=w.from_json(s.currency,s.non_native);q.serialize(t,u)}s.issuer&&N.serialize(t,s.issuer)}}k.serialize(t,this.typeEnd)},parse:function(t){for(var e,r=[],n=[];(e=t.read(1)[0])!==this.typeEnd;)if(e!==this.typeBoundary){var i={},o=0;if(e&this.typeAccount&&(i.account=N.parse(t),i.account.set_version(D.VER_ACCOUNT_ID),o|=this.typeAccount),e&this.typeCurrency&&(i.currency=q.parse(t),"XRP"!==i.currency.to_json()||i.currency.is_native()||(i.non_native=!0),o|=this.typeCurrency),e&this.typeIssuer&&(i.issuer=N.parse(t),i.issuer.set_version(D.VER_ACCOUNT_ID),o|=this.typeIssuer),!(i.account||i.currency||i.issuer))throw new Error("Invalid path entry");i.type=o,i.type_hex=("000000000000000"+o.toString(16)).slice(-16),n.push(i)}else n&&r.push(n),n=[];return n&&r.push(n),r}});z.id=18;var G=e.Vector256=new n({serialize:function(t,e){n.serialize_varint(t,32*e.length);for(var r=0,i=e.length;i>r;r++)j.serialize(t,e[r])},parse:function(t){for(var e=this.parse_varint(t),r=[],n=0;e/32>n;n++)r.push(j.parse(t));return r}});G.id=19,e.STMemo=new n({serialize:function(t,e,r){var n=[];g(e).forEach(function(t){if(t[0]!==t[0].toLowerCase()){if("undefined"==typeof E.fieldsInverseMap[t])throw new Error('JSON contains unknown field: "'+t+'"');n.push(t)}}),n=h(n),n.forEach(function(r){d(t,r,e[r])}),r||k.serialize(t,225)},parse:function(t){for(var e={};225!==t.peek(1)[0];){var r=_(t);e[r[0]]=r[1]}if(void 0!==e.MemoType)try{var n=f(e.MemoType);"unformatted_memo"!==n&&(e.parsed_memo_type=n)}catch(i){}if(void 0!==e.MemoFormat)try{e.parsed_memo_format=f(e.MemoFormat)}catch(i){}if(void 0!==e.MemoData)try{"json"===e.parsed_memo_format?e.parsed_memo_data=JSON.parse(f(e.MemoData)):"text"===e.parsed_memo_format&&(e.parsed_memo_data=f(e.MemoData))}catch(i){}return t.read(1),e}});var H=e.Object=new n({serialize:function(t,e,r){var n=[];g(e).forEach(function(t){if(t[0]!==t[0].toLowerCase()){if("undefined"==typeof E.fieldsInverseMap[t])throw new Error('JSON contains unknown field: "'+t+'"');n.push(t)}}),n=h(n);for(var i=0;i<n.length;i++)d(t,n[i],e[n[i]]);r||k.serialize(t,225)},parse:function(t){for(var e={};225!==t.peek(1)[0];){var r=_(t);e[r[0]]=r[1]}return t.read(1),e}});H.id=14;var V=e.Array=new n({serialize:function(t,e){for(var r=0,n=e.length;n>r;r++){var i=g(e[r]);if(1!==i.length)throw new Error("Cannot serialize an array containing non-single-key objects");var o=i[0],s=e[r][o];d(t,o,s)}k.serialize(t,241)},parse:function(t){for(var e=[];241!==t.peek(1)[0];){var r=_(t),n={};n[r[0]]=r[1],e.push(n)}return t.read(1),e}});V.id=15},function(t,e,r){t.exports=function(t){function e(t){return o.bitArray.bitSlice(o.hash.sha512.hash(o.codec.bytes.toBits(t)),0,256)}function n(t,e){return[].concat(t,e>>24,e>>16&255,e>>8&255,255&e)}function i(t){if(this.secret=t,!this.secret)throw"Invalid secret."}var o=t.sjcl,s=r(45)({sjcl:t.sjcl}),a=r(46)({sjcl:t.sjcl}),u=r(47)({sjcl:t.sjcl}),c=r(48)({sjcl:t.sjcl});return i.prototype={getPrivateKey:function(){var t=this;return s.decode_base_check(33,t.secret)},getPrivateGenerator:function(t){var r=0;do privateGenerator=o.bn.fromBits(e(n(t,r))),r++;while(!o.ecc.curves.c256.r.greaterEquals(privateGenerator));return privateGenerator},getPublicGenerator:function(){var t=this.getPrivateKey(this.secret),e=this.getPrivateGenerator(t);return c.fromPrivateGenerator(e)},getPublicKey:function(t){var r,i=0;do r=o.bn.fromBits(e(n(n(t.toBytesCompressed(),0),i))),i++;while(!o.ecc.curves.c256.r.greaterEquals(r));return o.ecc.curves.c256.G.mult(r).toJac().add(t).toAffine()},getAddress:function(){var t=this.getPrivateKey(this.secret),e=this.getPrivateGenerator(t),r=c.fromPrivateGenerator(e).value,n=this.getPublicKey(r);return u.fromPublicKey(n)}},i.getRandom=function(){var t=a.getRandom().value;return new i(t)},i.generate=function(){var t=a.getRandom().value,e=new i(t);return{address:e.getAddress().value,secret:t}
},i}},function(t,e,r){t.exports={"default":r(69),__esModule:!0}},function(t,e,r){"use strict";function n(t,e){c(!s.isNull(t)&&!isNaN(t),e)}function i(t,e,r,n,o,a){function u(){l.computeAutobridgedOffers(),l.mergeDirectAndAutobridgedBooks()}function c(t,e){if(s.contains(i.EVENTS,e))switch(t){case"add":1===++l._listeners&&l.subscribe();break;case"remove":0===--l._listeners&&l.unsubscribe()}}function f(t){l.updateFundedAmounts(t)}h.call(this);var l=this;return this._remote=t,this._currencyGets=d.from_json(e),this._issuerGets=r,this._currencyPays=d.from_json(n),this._issuerPays=o,this._key=a,this._subscribed=!1,this._shouldSubscribe=!0,this._listeners=0,this._offers=[],this._offersAutobridged=[],this._mergedOffers=[],this._offerCounts={},this._ownerFundsUnadjusted={},this._ownerFunds={},this._ownerOffersTotal={},this._synchronized=!1,this._issuerTransferRate=null,this._legOneBook=null,this._legTwoBook=null,this._isAutobridgeable=!this._currencyGets.is_native()&&!this._currencyPays.is_native(),this._isAutobridgeable&&(this._legOneBook=t.createOrderBook({currency_gets:"XRP",currency_pays:n,issuer_pays:o}),this._legOneBook.on("model",u),this._legTwoBook=t.createOrderBook({currency_gets:e,issuer_gets:r,currency_pays:"XRP"}),this._legTwoBook.on("model",u)),this.on("newListener",function(t){c("add",t)}),this.on("removeListener",function(t){c("remove",t)}),this._remote.on("transaction",f),this.on("unsubscribe",function(){l.resetCache(),l._remote.removeListener("transaction",f)}),this._remote.once("prepare_subscribe",function(){l.subscribe()}),this._remote.on("disconnect",function(){l.resetCache(),l._remote.once("prepare_subscribe",function(){l.subscribe()})}),this}var o=r(28)["default"],s=r(42),a=r(41),u=r(39),c=r(38),f=r(51),h=r(40).EventEmitter,l=r(3).Amount,p=r(9).UInt160,d=r(6).Currency,_=r(53),g=r(54),y=r(23).internal.sub("orderbook");a.inherits(i,h),i.EVENTS=["transaction","model","trade","offer_added","offer_removed","offer_changed","offer_funds_changed"],i.DEFAULT_TRANSFER_RATE=1e9,i.offerRewrite=function(t){for(var e={},r=o(t),n=0,i=r.length;i>n;n++){var s=r[n];switch(s){case"PreviousTxnID":case"PreviousTxnLgrSeq":break;default:e[s]=t[s]}}return e.Flags=e.Flags||0,e.OwnerNode=e.OwnerNode||new Array(17).join("0"),e.BookNode=e.BookNode||new Array(17).join("0"),e},i.prototype.subscribe=function(){var t=this;if(this._shouldSubscribe){this._remote.trace&&y.info("subscribing",this._key);var e=[function(e){t.requestTransferRate(e)},function(e){t.requestOffers(e)},function(e){t.subscribeTransactions(e)}];f.series(e)}},i.prototype.unsubscribe=function(){var t=this;this._remote.trace&&y.info("unsubscribing",this._key),this._subscribed=!1,this._shouldSubscribe=!1,i.EVENTS.forEach(function(e){t.listeners(e).length>0&&t.removeAllListeners(e)}),this.emit("unsubscribe")},i.prototype.requestOffers=function(t){function e(e){return Array.isArray(e.offers)?(n._remote.trace&&y.info("requested offers",n._key,"offers: "+e.offers.length),n.setOffers(e.offers),n._synchronized=!0,n.notifyDirectOffersChanged(),void t(null,n._offers)):t(new Error("Invalid response"))}function r(e){n._remote.trace&&y.info("failed to request offers",n._key,e),t(e)}var n=this;if(!this._shouldSubscribe)return t(new Error("Should not request offers"));this._remote.trace&&y.info("requesting offers",this._key);var i=this._remote.requestBookOffers(this.toJSON());return i.once("success",e),i.once("error",r),i.request(),i},i.prototype.requestTransferRate=function(t){function e(e,n){return e?t(e):(r._issuerTransferRate=n.account_data.TransferRate||i.DEFAULT_TRANSFER_RATE,void t(null,r._issuerTransferRate))}c.strictEqual(typeof t,"function");var r=this;return this._currencyGets.is_native()?(this._issuerTransferRate=i.DEFAULT_TRANSFER_RATE,t(null,i.DEFAULT_TRANSFER_RATE)):this._issuerTransferRate?t(null,this._issuerTransferRate):void this._remote.requestAccountInfo({account:this._issuerGets},e)},i.prototype.subscribeTransactions=function(t){function e(e){n._remote.trace&&y.info("subscribed to transactions"),n._subscribed=!0,t(null,e)}function r(e){n._remote.trace&&y.info("failed to subscribe to transactions",n._key,e),t(e)}var n=this;if(!this._shouldSubscribe)return t("Should not subscribe");this._remote.trace&&y.info("subscribing to transactions");var i=this._remote.requestSubscribe();return i.addStream("transactions"),i.once("success",e),i.once("error",r),i.request(),i},i.prototype.notifyDirectOffersChanged=function(){this._isAutobridgeable?this.mergeDirectAndAutobridgedBooks():this.emit("model",this._offers)},i.prototype.resetCache=function(){this._ownerFunds={},this._ownerOffersTotal={},this._offerCounts={},this._synchronized=!1},i.prototype.hasOwnerFunds=function(t){return c(p.is_valid(t),"Account is invalid"),void 0!==this._ownerFunds[t]},i.prototype.setOwnerFunds=function(t,e){c(p.is_valid(t),"Account is invalid"),c(!isNaN(e),"Funded amount is invalid"),this._ownerFundsUnadjusted[t]=e,this._ownerFunds[t]=this.applyTransferRate(e)},i.prototype.applyTransferRate=function(t){c(!isNaN(t),"Balance is invalid"),n(this._issuerTransferRate,"Transfer rate is invalid");var e=g.normalizeAmount(t).divide(this._issuerTransferRate).multiply(l.from_json(i.DEFAULT_TRANSFER_RATE)).to_json().value;return e},i.prototype.getOwnerFunds=function(t){return c(p.is_valid(t),"Account is invalid"),this.hasOwnerFunds(t)?this._currencyGets.is_native()?l.from_json(this._ownerFunds[t]):g.normalizeAmount(this._ownerFunds[t]):void 0},i.prototype.getUnadjustedOwnerFunds=function(t){return c(p.is_valid(t),"Account is invalid"),this._ownerFundsUnadjusted[t]},i.prototype.deleteOwnerFunds=function(t){c(p.is_valid(t),"Account is invalid"),this._ownerFunds[t]=void 0},i.prototype.getOwnerOfferCount=function(t){return c(p.is_valid(t),"Account is invalid"),this._offerCounts[t]||0},i.prototype.incrementOwnerOfferCount=function(t){c(p.is_valid(t),"Account is invalid");var e=(this._offerCounts[t]||0)+1;return this._offerCounts[t]=e,e},i.prototype.decrementOwnerOfferCount=function(t){c(p.is_valid(t),"Account is invalid");var e=(this._offerCounts[t]||1)-1;return this._offerCounts[t]=e,1>e&&this.deleteOwnerFunds(t),e},i.prototype.addOwnerOfferTotal=function(t,e){c(p.is_valid(t),"Account is invalid");var r=this.getOwnerOfferTotal(t),n=r.add(l.from_json(e));return this._ownerOffersTotal[t]=n,n},i.prototype.subtractOwnerOfferTotal=function(t,e){c(p.is_valid(t),"Account is invalid");var r=this.getOwnerOfferTotal(t),n=r.subtract(l.from_json(e));return this._ownerOffersTotal[t]=n,c(!n.is_negative(),"Offer total cannot be negative"),n},i.prototype.getOwnerOfferTotal=function(t){c(p.is_valid(t),"Account is invalid");var e=this._ownerOffersTotal[t];return e?e:this._currencyGets.is_native()?l.from_json("0"):g.normalizeAmount("0")},i.prototype.resetOwnerOfferTotal=function(t){c(p.is_valid(t),"Account is invalid"),this._ownerOffersTotal[t]=this._currencyGets.is_native()?l.from_json("0"):g.normalizeAmount("0")},i.prototype.setOfferFundedAmount=function(t){c.strictEqual(typeof t,"object","Offer is invalid");var e=this.getOwnerFunds(t.Account),r=this.getOwnerOfferTotal(t.Account),n=r.add(l.from_json(t.TakerGets));if(t.owner_funds=this.getUnadjustedOwnerFunds(t.Account),t.is_fully_funded=e.compareTo(n)>=0,t.is_fully_funded)t.taker_gets_funded=l.from_json(t.TakerGets).to_text(),t.taker_pays_funded=l.from_json(t.TakerPays).to_text();else if(r.compareTo(e)<0){t.taker_gets_funded=e.subtract(r).to_text();var i=g.getOfferQuality(t,this._currencyGets),o=i.multiply(g.getOfferTakerGetsFunded(t));t.taker_pays_funded=this._currencyPays.is_native()?String(Math.floor(o.to_number())):o.to_json().value}else t.taker_gets_funded="0",t.taker_pays_funded="0";return t},i.prototype.parseAccountBalanceFromNode=function(t){var e={account:void 0,balance:void 0};switch(t.entryType){case"AccountRoot":e.account=t.fields.Account,e.balance=t.fieldsFinal.Balance;break;case"RippleState":t.fields.HighLimit.issuer===this._issuerGets?(e.account=t.fields.LowLimit.issuer,e.balance=t.fieldsFinal.Balance.value):t.fields.LowLimit.issuer===this._issuerGets&&(e.account=t.fields.HighLimit.issuer,e.balance=l.from_json(t.fieldsFinal.Balance).negate().to_json().value)}return c(!isNaN(e.balance),"node has an invalid balance"),c(p.is_valid(e.account),"node has an invalid account"),e},i.prototype.isBalanceChangeNode=function(t){return t.fields&&t.fields.Balance&&t.fieldsPrev&&t.fieldsFinal&&t.fieldsPrev.Balance&&t.fieldsFinal.Balance?this._currencyGets.is_native()?!isNaN(t.fields.Balance):t.fields.Balance.currency!==this._currencyGets.to_json()?!1:t.fields.HighLimit.issuer!==this._issuerGets&&t.fields.LowLimit.issuer!==this._issuerGets?!1:!0:!1},i.prototype.updateFundedAmounts=function(t){var e=this;if(!this._currencyGets.is_native()&&!this._issuerTransferRate)return this._remote.trace&&y.info("waiting for transfer rate"),void this.requestTransferRate(function(){e.updateFundedAmounts(t)});var r=t.mmeta.getNodes({nodeType:"ModifiedNode",entryType:this._currencyGets.is_native()?"AccountRoot":"RippleState"});s.each(r,function(t){if(e.isBalanceChangeNode(t)){var r=e.parseAccountBalanceFromNode(t);e.hasOwnerFunds(r.account)&&(e.setOwnerFunds(r.account,r.balance),e.updateOwnerOffersFundedAmount(r.account))}})},i.prototype.updateOwnerOffersFundedAmount=function(t){c(p.is_valid(t),"Account is invalid");var e=this;if(this._remote.trace){var r=this.getOwnerFunds(t);y.info("updating offer funds",this._key,t,r?r.to_text():"undefined")}this.resetOwnerOfferTotal(t),s.each(this._offers,function(r){if(r.Account===t){var n=u({},r),i=void 0;s.isString(r.taker_gets_funded)&&(i=g.getOfferTakerGetsFunded(r)),e.setOfferFundedAmount(r),e.addOwnerOfferTotal(r.Account,r.TakerGets);var o=g.getOfferTakerGetsFunded(r),a=i&&!o.equals(i);a&&(e.emit("offer_changed",n,r),e.emit("offer_funds_changed",r,n.taker_gets_funded,r.taker_gets_funded))}})},i.prototype.notify=function(t){function e(t){switch(t.nodeType){case"DeletedNode":r.deleteOffer(t,a),a||(i=i.add(t.fieldsFinal.TakerGets),o=o.add(t.fieldsFinal.TakerPays));break;case"ModifiedNode":r.modifyOffer(t),i=i.add(t.fieldsPrev.TakerGets).subtract(t.fieldsFinal.TakerGets),o=o.add(t.fieldsPrev.TakerPays).subtract(t.fieldsFinal.TakerPays);break;case"CreatedNode":var e=void 0!==u?u:1/0;r.setOwnerFunds(t.fields.Account,e),r.insertOffer(t)}}var r=this;if(this._subscribed){this._remote.trace&&y.info("notifying",this._key,t.transaction.hash);var n=t.mmeta.getNodes({entryType:"Offer",bookKey:this._key});if(!(n.length<1)){var i=l.from_json("0"+(d.from_json(this._currencyGets).is_native()?"":"/"+this._currencyGets.to_human()+"/"+this._issuerGets)),o=l.from_json("0"+(d.from_json(this._currencyPays).is_native()?"":"/"+this._currencyPays.to_human()+"/"+this._issuerPays)),a="OfferCancel"===t.transaction.TransactionType,u=t.transaction.owner_funds;s.each(n,e),this.emit("transaction",t),this.notifyDirectOffersChanged(),i.is_zero()||this.emit("trade",o,i)}}},i.prototype.insertOffer=function(t){this._remote.trace&&y.info("inserting offer",this._key,t.fields);var e=i.offerRewrite(t.fields),r=this.normalizeAmount(this._currencyGets,e.TakerGets),n=this.normalizeAmount(this._currencyPays,e.TakerPays);e.LedgerEntryType=t.entryType,e.index=t.ledgerIndex,e.quality=n.divide(r).to_text();for(var o=this._offers.length,s=0;o>s;s++){var a=g.getOfferQuality(e,this._currencyGets),u=g.getOfferQuality(this._offers[s],this._currencyGets);if(a.compareTo(u)<=0){this._offers.splice(s,0,e);break}}this._offers.length===o&&this._offers.push(e),this.incrementOwnerOfferCount(e.Account),this.updateOwnerOffersFundedAmount(e.Account),this.emit("offer_added",e)},i.prototype.normalizeAmount=function(t,e){var r=t.is_native()?e:e.value;return g.normalizeAmount(r)},i.prototype.modifyOffer=function(t){this._remote.trace&&y.info("modifying offer",this._key,t.fields);for(var e=0;e<this._offers.length;e++){var r=this._offers[e];if(r.index===t.ledgerIndex){u(r,t.fieldsFinal);break}}this.updateOwnerOffersFundedAmount(t.fields.Account)},i.prototype.deleteOffer=function(t,e){this._remote.trace&&y.info("deleting offer",this._key,t.fields);for(var r=0;r<this._offers.length;r++){var n=this._offers[r];if(n.index===t.ledgerIndex){this.subtractOwnerOfferTotal(n.Account,n.TakerGets),this._offers.splice(r,1),this.decrementOwnerOfferCount(n.Account),this.emit("offer_removed",n);break}}e&&this.updateOwnerOffersFundedAmount(t.fields.Account)},i.prototype.setOffers=function(t){c(Array.isArray(t),"Offers is not an array");var e=this;this.resetCache();var r=s.map(t,function(t){var r=i.offerRewrite(t);return r.hasOwnProperty("owner_funds")&&e.setOwnerFunds(r.Account,r.owner_funds),e.incrementOwnerOfferCount(r.Account),e.setOfferFundedAmount(r),e.addOwnerOfferTotal(r.Account,r.TakerGets),r});this._offers=r},i.prototype.offers=i.prototype.getOffers=function(t){return c.strictEqual(typeof t,"function","Callback missing"),this._synchronized?t(null,this._offers):this.once("model",function(e){t(null,e)}),this},i.prototype.offersSync=i.prototype.getOffersSync=function(){return this._offers},i.prototype.toJSON=i.prototype.to_json=function(){var t={taker_gets:{currency:this._currencyGets.to_hex()},taker_pays:{currency:this._currencyPays.to_hex()}};return this._currencyGets.is_native()||(t.taker_gets.issuer=this._issuerGets),this._currencyPays.is_native()||(t.taker_pays.issuer=this._issuerPays),t},i.prototype.isValid=i.prototype.is_valid=function(){return this._currencyPays&&this._currencyPays.is_valid()&&(this._currencyPays.is_native()||p.is_valid(this._issuerPays))&&this._currencyGets&&this._currencyGets.is_valid()&&(this._currencyGets.is_native()||p.is_valid(this._issuerGets))&&!(this._currencyPays.is_native()&&this._currencyGets.is_native())},i.prototype.computeAutobridgedOffers=function(){c(!this._currencyGets.is_native()&&!this._currencyPays.is_native(),"Autobridging is only for IOU:IOU orderbooks");var t=new _(this._currencyGets,this._currencyPays,this._legOneBook.getOffersSync(),this._legTwoBook.getOffersSync(),this._issuerGets,this._issuerPays);this._offersAutobridged=t.calculate()},i.prototype.mergeDirectAndAutobridgedBooks=function(){var t=this;s.isEmpty(this._offers)&&s.isEmpty(this._offersAutobridged)||(this._mergedOffers=this._offers.concat(this._offersAutobridged).sort(function(e,r){var n=g.getOfferQuality(e,t._currencyGets),i=g.getOfferQuality(r,t._currencyGets);return n.compareTo(i)}),this.emit("model",this._mergedOffers))},e.OrderBook=i},function(t,e){"use strict";e.HASH_TX_ID=1415073280,e.HASH_TX_NODE=1397638144,e.HASH_INNER_NODE=1296649728,e.HASH_LEAF_NODE=1296846336,e.HASH_TX_SIGN=1398036480,e.HASH_TX_SIGN_TESTNET=1937012736},function(t,e){"use strict";var r=e.Float={};r.toIEEE754=function(t,e,r){var n,i,o,s=(1<<e-1)-1;if(isNaN(t))i=(1<<s)-1,o=1,n=0;else if(1/0===t||t===-1/0)i=(1<<s)-1,o=0,n=0>t?1:0;else if(0===t)i=0,o=0,n=1/t===-1/0?1:0;else if(n=0>t,t=Math.abs(t),t>=Math.pow(2,1-s)){var a=Math.min(Math.floor(Math.log(t)/Math.LN2),s);i=a+s,o=t*Math.pow(2,r-a)-Math.pow(2,r)}else i=0,o=t/Math.pow(2,1-s-r);var u,c=[];for(u=r;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(n?1:0),c.reverse();for(var f=c.join(""),h=[];f.length;)h.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return h},r.fromIEEE754=function(t,e,r){for(var n=[],i=t.length;i;i-=1)for(var o=t[i-1],s=8;s;s-=1)n.push(o%2?1:0),o>>=1;n.reverse();var a=n.join(""),u=(1<<e-1)-1,c=parseInt(a.substring(0,1),2)?-1:1,f=parseInt(a.substring(1,1+e),2),h=parseInt(a.substring(1+e),2);return f===(1<<e)-1?0!==h?0/0:1/0*c:f>0?c*Math.pow(2,f-u)*(1+h/Math.pow(2,r)):0!==h?c*Math.pow(2,-(u-1))*(h/Math.pow(2,r)):0*c},r.fromIEEE754Double=function(t){return r.fromIEEE754(t,11,52)},r.toIEEE754Double=function(t){return r.toIEEE754(t,11,52)},r.fromIEEE754Single=function(t){return r.fromIEEE754(t,8,23)},r.toIEEE754Single=function(t){return r.toIEEE754(t,8,23)},r.toIEEE754DoubleString=function(t){return e.toIEEE754Double(t).map(function(t){for(t=t.toString(2);t.length<8;t="0"+t);return t}).join("").replace(/(.)(.{11})(.{52})/,"$1 $2 $3")}},function(t,e,r){"use strict";function n(){this._value=0/0,this._update()}var i=r(17),o=i.sjcl;n.json_rewrite=function(t,e){return this.from_json(t).to_json(e)},n.from_generic=function(t){return t instanceof this?t.clone():(new this).parse_generic(t)},n.from_hex=function(t){return t instanceof this?t.clone():(new this).parse_hex(t)},n.from_json=function(t){return t instanceof this?t.clone():(new this).parse_json(t)},n.from_bits=function(t){return t instanceof this?t.clone():(new this).parse_bits(t)},n.from_bytes=function(t){return t instanceof this?t.clone():(new this).parse_bytes(t)},n.from_bn=function(t){return t instanceof this?t.clone():(new this).parse_bn(t)},n.from_number=function(t){return t instanceof this?t.clone():(new this).parse_number(t)},n.is_valid=function(t){return this.from_json(t).is_valid()},n.prototype.clone=function(){return this.copyTo(new this.constructor)},n.prototype.copyTo=function(t){return t._value=this._value,void 0!==this._version_byte&&(t._version_byte=this._version_byte),"function"==typeof t._update&&t._update(),t},n.prototype.equals=function(t){return this.is_valid()&&t.is_valid()&&this._value.equals(t._value)},n.prototype.is_valid=function(){return this._value instanceof o.bn},n.prototype.is_zero=function(){return this.is_valid()&&this._value.equals(new o.bn(0))},n.prototype._update=function(){},n.prototype.parse_generic=function(t){switch(t){case void 0:case"0":case this.constructor.STR_ZERO:case this.constructor.ACCOUNT_ZERO:case this.constructor.HEX_ZERO:this._value=new o.bn(0);break;case"1":case this.constructor.STR_ONE:case this.constructor.ACCOUNT_ONE:case this.constructor.HEX_ONE:this._value=new o.bn(1);break;default:if("string"!=typeof t)this._value=0/0;else if(this.constructor.width===t.length){var e=i.arrayToHex(i.stringToArray(t));this._value=new o.bn(e,16)}else this._value=2*this.constructor.width===t.length?new o.bn(t,16):0/0}return this._update(),this},n.prototype.parse_hex=function(t){return this._value="string"==typeof t&&t.length===2*this.constructor.width?new o.bn(t,16):0/0,this._update(),this},n.prototype.parse_bits=function(t){return this._value=o.bitArray.bitLength(t)!==8*this.constructor.width?0/0:o.bn.fromBits(t),this._update(),this},n.prototype.parse_bytes=function(t){if(Array.isArray(t)&&t.length===this.constructor.width){var e=o.codec.bytes.toBits(t);this._value=o.bn.fromBits(e)}else this._value=0/0;return this._update(),this},n.prototype.parse_json=n.prototype.parse_hex,n.prototype.parse_bn=function(t){return this._value=t instanceof o.bn&&t.bitLength()<=8*this.constructor.width?new o.bn(t):0/0,this._update(),this},n.prototype.parse_number=function(t){return this._value=0/0,"number"==typeof t&&isFinite(t)&&t>=0&&(this._value=new o.bn(t)),this._update(),this},n.prototype.to_bytes=function(){return this.is_valid()?o.codec.bytes.fromBits(this.to_bits()):null},n.prototype.to_hex=function(){return this.is_valid()?o.codec.hex.fromBits(this.to_bits()).toUpperCase():null},n.prototype.to_json=n.prototype.to_hex,n.prototype.to_bits=function(){return this.is_valid()?this._value.toBits(8*this.constructor.width):null},n.prototype.to_bn=function(){if(!this.is_valid())return null;var t=this.to_bits();return o.bn.fromBits(t)},e.UInt=n},function(t,e,r){"use strict";function n(){this._curve=o.ecc.curves.k256,this._secret=null,this._pubkey=null}function i(t){return o.hash.ripemd160.hash(o.hash.sha256.hash(t))}var o=r(17).sjcl,s=r(9).UInt160,a=r(10).UInt256,u=r(7).Base;n.from_bn_secret=function(t){return t instanceof this?t.clone():(new this).parse_bn_secret(t)},n.prototype.parse_bn_secret=function(t){return this._secret=new o.ecc.ecdsa.secretKey(o.ecc.curves.k256,t),this},n.prototype._pub=function(){var t=this._curve;if(!this._pubkey&&this._secret){var e=this._secret._exponent;this._pubkey=new o.ecc.ecdsa.publicKey(t,t.G.mult(e))}return this._pubkey},n.prototype._pub_bits=function(){var t=this._pub();if(!t)return null;var e=t._point,r=e.y.mod(2).equals(0);return o.bitArray.concat([o.bitArray.partial(8,r?2:3)],e.x.toBits(this._curve.r.bitLength()))},n.prototype.to_hex_pub=function(){var t=this._pub_bits();return t?o.codec.hex.fromBits(t).toUpperCase():null},n.prototype.get_address=function(){var t=this._pub_bits();if(!t)return null;var e=i(t),r=s.from_bits(e);return r.set_version(u.VER_ACCOUNT_ID),r},n.prototype.sign=function(t){var e=6;t=a.from_json(t);var r=this._secret.sign(t.to_bits(),e);return r=this._secret.canonicalizeSignature(r),this._secret.encodeDER(r)},e.KeyPair=n},function(t){"use strict";try{t.exports=WebSocket}catch(e){t.exports=MozWebSocket}var r,n=/Version\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//;"object"==typeof navigator&&"string"==typeof navigator.userAgent&&(r=n.exec(navigator.userAgent))&&2===window.WebSocket.CLOSED&&(/iP(hone|od|ad)/.test(navigator.platform)?+r[1]<5&&(t.exports=void 0):-1!==navigator.appVersion.indexOf("Mac")&&+r[1]<6&&(t.exports=void 0))},function(t,e,r){"use strict";function n(){}function i(t){n.call(this),this.leaves={},this.type=n.INNER,this.depth=void 0===t?0:t,this.empty=!0}function o(t,e,r){if(n.call(this),"string"!=typeof t)throw new Error("Tag is unexpected type.");this.tag=t,this.tag_bytes=c.from_hex(this.tag).to_bytes(),this.type=r,this.node=e}function s(){this.root=new i(0)}var a=r(41),u=r(30),c=r(10).UInt256,f=r(13).SerializedObject;n.TYPE_INNER=1,n.TYPE_TRANSACTION_NM=2,n.TYPE_TRANSACTION_MD=3,n.TYPE_ACCOUNT_STATE=4,n.prototype.add_item=function(){throw new Error("Called unimplemented virtual method SHAMapTreeNode#add_item.")},n.prototype.hash=function(){throw new Error("Called unimplemented virtual method SHAMapTreeNode#hash.")},a.inherits(i,n),i.prototype.add_item=function(t,e){var r=this.depth,n=this.get_node(t[r]);if(n)if(n instanceof i)n.add_item(t,e);else{if(n.tag===t)throw new Error("Tried to add a node to a SHAMap that was already in there.");var o=new i(r+1);o.add_item(n.tag,n),o.add_item(t,e),this.set_node(t[r],o)}else this.set_node(t[r],e)},i.prototype.set_node=function(t,e){this.leaves[t]=e,this.empty=!1},i.prototype.get_node=function(t){return this.leaves[t]},i.prototype.hash=function(){if(this.empty)return c.from_hex(c.HEX_ZERO);for(var t=new f,e=0;16>e;e++){var r=c.from_hex(c.HEX_ZERO),n=e.toString(16).toUpperCase();"object"==typeof this.leaves[n]&&(r=this.leaves[n].hash()),t.append(r.to_bytes())}var i=t.hash(u.HASH_INNER_NODE);return c.from_bits(i)},a.inherits(o,n),o.prototype.hash=function(){var t=new f;switch(this.type){case n.TYPE_ACCOUNT_STATE:return t.append(this.node),t.append(this.tag_bytes),t.hash(u.HASH_LEAF_NODE);case n.TYPE_TRANSACTION_NM:return this.tag_bytes;case n.TYPE_TRANSACTION_MD:return t.append(this.node),t.append(this.tag_bytes),t.hash(u.HASH_TX_NODE);default:throw new Error("Tried to hash a SHAMap node of unknown type.")}},s.prototype.add_item=function(t,e,r){e=new o(t,e,r),this.root.add_item(t,e)},s.prototype.hash=function(){return this.root.hash()},e.SHAMap=s,e.SHAMapTreeNode=n,e.SHAMapTreeNodeInner=i,e.SHAMapTreeNodeLeaf=o},function(t){"use strict";t.exports={account:"a",dirNode:"d",generatorMap:"g",nickname:"n",rippleState:"r",offer:"o",ownerDir:"O",bookDir:"B",contract:"c",skipList:"s",amendment:"f",feeSettings:"e"}},function(t,e,r){"use strict";r(55),r(56),r(57),r(58),r(59),r(60),r(61)},function(t,e,r){function n(t,e){return p.isUndefined(e)?""+e:p.isNumber(e)&&!isFinite(e)?e.toString():p.isFunction(e)||p.isRegExp(e)?e.toString():e}function i(t,e){return p.isString(t)?t.length<e?t:t.slice(0,e):t}function o(t){return i(JSON.stringify(t.actual,n),128)+" "+t.operator+" "+i(JSON.stringify(t.expected,n),128)}function s(t,e,r,n,i){throw new g.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function a(t,e){t||s(t,!0,e,"==",g.ok)}function u(t,e){if(t===e)return!0;if(p.isBuffer(t)&&p.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return p.isDate(t)&&p.isDate(e)?t.getTime()===e.getTime():p.isRegExp(t)&&p.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:p.isObject(t)||p.isObject(e)?f(t,e):t==e}function c(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function f(t,e){if(p.isNullOrUndefined(t)||p.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(p.isPrimitive(t)||p.isPrimitive(e))return t===e;var r=c(t),n=c(e);if(r&&!n||!r&&n)return!1;if(r)return t=d.call(t),e=d.call(e),u(t,e);var i,o,s=y(t),a=y(e);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),o=s.length-1;o>=0;o--)if(s[o]!=a[o])return!1;for(o=s.length-1;o>=0;o--)if(i=s[o],!u(t[i],e[i]))return!1;return!0}function h(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function l(t,e,r,n){var i;p.isString(r)&&(n=r,r=null);try{e()}catch(o){i=o}if(n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&s(i,r,"Missing expected exception"+n),!t&&h(i,r)&&s(i,r,"Got unwanted exception"+n),t&&i&&r&&!h(i,r)||!t&&i)throw i}var p=r(41),d=Array.prototype.slice,_=Object.prototype.hasOwnProperty,g=t.exports=a;g.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var e=t.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=e.name,a=n.indexOf("\n"+i);if(a>=0){var u=n.indexOf("\n",a+1);n=n.substring(u+1)}this.stack=n}}},p.inherits(g.AssertionError,Error),g.fail=s,g.ok=a,g.equal=function(t,e,r){t!=e&&s(t,e,r,"==",g.equal)},g.notEqual=function(t,e,r){t==e&&s(t,e,r,"!=",g.notEqual)},g.deepEqual=function(t,e,r){u(t,e)||s(t,e,r,"deepEqual",g.deepEqual)},g.notDeepEqual=function(t,e,r){u(t,e)&&s(t,e,r,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(t,e,r){t!==e&&s(t,e,r,"===",g.strictEqual)},g.notStrictEqual=function(t,e,r){t===e&&s(t,e,r,"!==",g.notStrictEqual)},g["throws"]=function(){l.apply(this,[!0].concat(d.call(arguments)))},g.doesNotThrow=function(){l.apply(this,[!1].concat(d.call(arguments)))},g.ifError=function(t){if(t)throw t};var y=Object.keys||function(t){var e=[];for(var r in t)_.call(t,r)&&e.push(r);return e}},function(t){function e(t){if(!t||"[object Object]"!==n.call(t)||t.nodeType||t.setInterval)return!1;var e=r.call(t,"constructor"),i=r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!i)return!1;var o;for(o in t);return void 0===o||r.call(t,o)}var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function i(){var t,r,n,o,s,a,u=arguments[0]||{},c=1,f=arguments.length,h=!1;for("boolean"==typeof u&&(h=u,u=arguments[1]||{},c=2),"object"!=typeof u&&"function"!=typeof u&&(u={});f>c;c++)if(null!=(t=arguments[c]))for(r in t)n=u[r],o=t[r],u!==o&&(h&&o&&(e(o)||(s=Array.isArray(o)))?(s?(s=!1,a=n&&Array.isArray(n)?n:[]):a=n&&e(n)?n:{},u[r]=i(h,a,o)):void 0!==o&&(u[r]=o));return u}},function(t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function n(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!n(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,n,s,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,a=new Array(s-1),u=1;s>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(i(n)){for(s=arguments.length,a=new Array(s-1),u=1;s>u;u++)a[u-1]=arguments[u];for(c=n.slice(),s=c.length,u=0;s>u;u++)c[u].apply(this,a)}return!0},e.prototype.addListener=function(t,n){var s;if(!r(n))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(n.listener)?n.listener:n),this._events[t]?i(this._events[t])?this._events[t].push(n):this._events[t]=[this._events[t],n]:this._events[t]=n,i(this._events[t])&&!this._events[t].warned){var s;s=o(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},e.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?r(t._events[e])?1:t._events[e].length:0}},function(t,e,r){(function(t,n){function i(t,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(r)?n.showHidden=r:r&&e._extend(n,r),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t){return t}function a(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function u(t,r,n){if(t.customInspect&&r&&C(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return m(i)||(i=u(t,i,n)),i}var o=c(t,r);if(o)return o;var s=Object.keys(r),_=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),F(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(r);if(0===s.length){if(C(r)){var g=r.name?": "+r.name:"";return t.stylize("[Function"+g+"]","special")}if(E(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return t.stylize(Date.prototype.toString.call(r),"date");if(F(r))return f(r)}var y="",v=!1,b=["{","}"];if(d(r)&&(v=!0,b=["[","]"]),C(r)){var w=r.name?": "+r.name:"";y=" [Function"+w+"]"}if(E(r)&&(y=" "+RegExp.prototype.toString.call(r)),x(r)&&(y=" "+Date.prototype.toUTCString.call(r)),F(r)&&(y=" "+f(r)),0===s.length&&(!v||0==r.length))return b[0]+y+b[1];
if(0>n)return E(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r);var A;return A=v?h(t,r,n,_,s):s.map(function(e){return l(t,r,n,_,e,v)}),t.seen.pop(),p(A,y,b)}function c(t,e){if(w(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return v(e)?t.stylize(""+e,"number"):_(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,r,n,i){for(var o=[],s=0,a=e.length;a>s;++s)o.push(k(e,String(s))?l(t,e,r,n,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,r,n,i,!0))}),o}function l(t,e,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),k(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=g(r)?u(t,c.value,null):u(t,c.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return null==t}function v(t){return"number"==typeof t}function m(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function w(t){return void 0===t}function E(t){return A(t)&&"[object RegExp]"===S(t)}function A(t){return"object"==typeof t&&null!==t}function x(t){return A(t)&&"[object Date]"===S(t)}function F(t){return A(t)&&("[object Error]"===S(t)||t instanceof Error)}function C(t){return"function"==typeof t}function B(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function S(t){return Object.prototype.toString.call(t)}function D(t){return 10>t?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,e=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),L[t.getMonth()],e].join(" ")}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var O=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(O,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),a=n[r];o>r;a=n[++r])s+=g(a)||!A(a)?" "+a:" "+i(a);return s},e.deprecate=function(r,i){function o(){if(!s){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),s=!0}return r.apply(this,arguments)}if(w(t.process))return function(){return e.deprecate(r,i).apply(this,arguments)};if(n.noDeprecation===!0)return r;var s=!1;return o};var I,R={};e.debuglog=function(t){if(w(I)&&(I=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!R[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var r=n.pid;R[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else R[t]=function(){};return R[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=_,e.isNull=g,e.isNullOrUndefined=y,e.isNumber=v,e.isString=m,e.isSymbol=b,e.isUndefined=w,e.isRegExp=E,e.isObject=A,e.isDate=x,e.isError=F,e.isFunction=C,e.isPrimitive=B,e.isBuffer=r(62);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",T(),e.format.apply(e,arguments))},e.inherits=r(72),e._extend=function(t,e){if(!e||!A(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(e,function(){return this}(),r(63))},function(t,e,r){var n;(function(t,i){(function(){function o(t,e){if(t!==e){var r=null===t,n=t===B,i=t===t,o=null===e,s=e===B,a=e===e;if(t>e&&!o||!i||r&&!s&&a||n&&a)return 1;if(e>t&&!r||!a||o&&!n&&i||s&&i)return-1}return 0}function s(t,e,r){for(var n=t.length,i=r?n:-1;r?i--:++i<n;)if(e(t[i],i,t))return i;return-1}function a(t,e,r){if(e!==e)return v(t,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function u(t){return"function"==typeof t||!1}function c(t){return null==t?"":t+""}function f(t,e){for(var r=-1,n=t.length;++r<n&&e.indexOf(t.charAt(r))>-1;);return r}function h(t,e){for(var r=t.length;r--&&e.indexOf(t.charAt(r))>-1;);return r}function l(t,e){return o(t.criteria,e.criteria)||t.index-e.index}function p(t,e,r){for(var n=-1,i=t.criteria,s=e.criteria,a=i.length,u=r.length;++n<a;){var c=o(i[n],s[n]);if(c){if(n>=u)return c;var f=r[n];return c*("asc"===f||f===!0?1:-1)}}return t.index-e.index}function d(t){return Ke[t]}function _(t){return Ye[t]}function g(t,e,r){return e?t=We[t]:r&&(t=Je[t]),"\\"+t}function y(t){return"\\"+Je[t]}function v(t,e,r){for(var n=t.length,i=e+(r?0:-1);r?i--:++i<n;){var o=t[i];if(o!==o)return i}return-1}function m(t){return!!t&&"object"==typeof t}function b(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function w(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;)t[r]===e&&(t[r]=K,o[++i]=r);return o}function E(t,e){for(var r,n=-1,i=t.length,o=-1,s=[];++n<i;){var a=t[n],u=e?e(a,n,t):a;n&&r===u||(r=u,s[++o]=a)}return s}function A(t){for(var e=-1,r=t.length;++e<r&&b(t.charCodeAt(e)););return e}function x(t){for(var e=t.length;e--&&b(t.charCodeAt(e)););return e}function F(t){return Xe[t]}function C(t){function e(t){if(m(t)&&!Du(t)&&!(t instanceof i)){if(t instanceof n)return t;if(ea.call(t,"__chain__")&&ea.call(t,"__wrapped__"))return pi(t)}return new n(t)}function r(){}function n(t,e,r){this.__wrapped__=t,this.__actions__=r||[],this.__chain__=!!e}function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Sa,this.__views__=[]}function b(){var t=new i(this.__wrapped__);return t.__actions__=tr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=tr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=tr(this.__views__),t}function Z(){if(this.__filtered__){var t=new i(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function ne(){var t=this.__wrapped__.value(),e=this.__dir__,r=Du(t),n=0>e,i=r?t.length:0,o=Kn(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=n?a:s-1,f=this.__iteratees__,h=f.length,l=0,p=Aa(u,this.__takeCount__);if(!r||z>i||i==u&&p==u)return rn(n&&r?t.reverse():t,this.__actions__);var d=[];t:for(;u--&&p>l;){c+=e;for(var _=-1,g=t[c];++_<h;){var y=f[_],v=y.iteratee,m=y.type,b=v(g);if(m==H)g=b;else if(!b){if(m==G)continue t;break t}}d[l++]=g}return d}function oe(){this.__data__={}}function Ke(t){return this.has(t)&&delete this.__data__[t]}function Ye(t){return"__proto__"==t?B:this.__data__[t]}function Xe(t){return"__proto__"!=t&&ea.call(this.__data__,t)}function $e(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function We(t){var e=t?t.length:0;for(this.data={hash:ya(null),set:new ha};e--;)this.push(t[e])}function Je(t,e){var r=t.data,n="string"==typeof e||Lo(e)?r.set.has(e):r.hash[e];return n?0:-1}function Qe(t){var e=this.data;"string"==typeof t||Lo(t)?e.set.add(t):e.hash[t]=!0}function Ze(t,e){for(var r=-1,n=t.length,i=-1,o=e.length,s=Us(n+o);++r<n;)s[r]=t[r];for(;++i<o;)s[r++]=e[i];return s}function tr(t,e){var r=-1,n=t.length;for(e||(e=Us(n));++r<n;)e[r]=t[r];return e}function er(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function rr(t,e){for(var r=t.length;r--&&e(t[r],r,t)!==!1;);return t}function or(t,e){for(var r=-1,n=t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function sr(t,e,r,n){for(var i=-1,o=t.length,s=n,a=s;++i<o;){var u=t[i],c=+e(u);r(c,s)&&(s=c,a=u)}return a}function ar(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[++i]=s)}return o}function ur(t,e){for(var r=-1,n=t.length,i=Us(n);++r<n;)i[r]=e(t[r],r,t);return i}function cr(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function fr(t,e,r,n){var i=-1,o=t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function hr(t,e,r,n){var i=t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function lr(t,e){for(var r=-1,n=t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function pr(t,e){for(var r=t.length,n=0;r--;)n+=+e(t[r])||0;return n}function dr(t,e){return t===B?e:t}function _r(t,e,r,n){return t!==B&&ea.call(n,r)?t:e}function gr(t,e,r){for(var n=-1,i=Pu(e),o=i.length;++n<o;){var s=i[n],a=t[s],u=r(a,e[s],s,t,e);(u===u?u===a:a!==a)&&(a!==B||s in t)||(t[s]=u)}return t}function yr(t,e){return null==e?t:mr(e,Pu(e),t)}function vr(t,e){for(var r=-1,n=null==t,i=!n&&Jn(t),o=i?t.length:0,s=e.length,a=Us(s);++r<s;){var u=e[r];a[r]=i?Qn(u,o)?t[u]:B:n?B:t[u]}return a}function mr(t,e,r){r||(r={});for(var n=-1,i=e.length;++n<i;){var o=e[n];r[o]=t[o]}return r}function br(t,e,r){var n=typeof t;return"function"==n?e===B?t:sn(t,e,r):null==t?Ss:"object"==n?Mr(t):e===B?Rs(t):Pr(t,e)}function wr(t,e,r,n,i,o,s){var a;if(r&&(a=i?r(t,n,i):r(t)),a!==B)return a;if(!Lo(t))return t;var u=Du(t);if(u){if(a=Yn(t),!e)return tr(t,a)}else{var c=na.call(t),f=c==Q;if(c!=ee&&c!=Y&&(!f||i))return Ve[c]?$n(t,c,e):i?t:{};if(a=Xn(f?{}:t),!e)return yr(a,t)}o||(o=[]),s||(s=[]);for(var h=o.length;h--;)if(o[h]==t)return s[h];return o.push(t),s.push(a),(u?er:kr)(t,function(n,i){a[i]=wr(n,e,r,i,t,o,s)}),a}function Er(t,e,r){if("function"!=typeof t)throw new Ws(V);return la(function(){t.apply(B,r)},e)}function Ar(t,e){var r=t?t.length:0,n=[];if(!r)return n;var i=-1,o=Gn(),s=o==a,u=s&&e.length>=z?_n(e):null,c=e.length;u&&(o=Je,s=!1,e=u);t:for(;++i<r;){var f=t[i];if(s&&f===f){for(var h=c;h--;)if(e[h]===f)continue t;n.push(f)}else o(e,f,0)<0&&n.push(f)}return n}function xr(t,e){var r=!0;return ja(t,function(t,n,i){return r=!!e(t,n,i)}),r}function Fr(t,e,r,n){var i=n,o=i;return ja(t,function(t,s,a){var u=+e(t,s,a);(r(u,i)||u===n&&u===o)&&(i=u,o=t)}),o}function Cr(t,e,r,n){var i=t.length;for(r=null==r?0:+r||0,0>r&&(r=-r>i?0:i+r),n=n===B||n>i?i:+n||0,0>n&&(n+=i),i=r>n?0:n>>>0,r>>>=0;i>r;)t[r++]=e;return t}function Br(t,e){var r=[];return ja(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function Sr(t,e,r,n){var i;return r(t,function(t,r,o){return e(t,r,o)?(i=n?r:t,!1):void 0}),i}function Dr(t,e,r,n){n||(n=[]);for(var i=-1,o=t.length;++i<o;){var s=t[i];m(s)&&Jn(s)&&(r||Du(s)||Co(s))?e?Dr(s,e,r,n):cr(n,s):r||(n[n.length]=s)}return n}function Tr(t,e){return qa(t,e,es)}function kr(t,e){return qa(t,e,Pu)}function Or(t,e){return Ma(t,e,Pu)}function Ir(t,e){for(var r=-1,n=e.length,i=-1,o=[];++r<n;){var s=e[r];Ro(t[s])&&(o[++i]=s)}return o}function Rr(t,e,r){if(null!=t){r!==B&&r in hi(t)&&(e=[r]);for(var n=0,i=e.length;null!=t&&i>n;)t=t[e[n++]];return n&&n==i?t:B}}function Lr(t,e,r,n,i,o){return t===e?!0:null==t||null==e||!Lo(t)&&!m(e)?t!==t&&e!==e:jr(t,e,Lr,r,n,i,o)}function jr(t,e,r,n,i,o,s){var a=Du(t),u=Du(e),c=X,f=X;a||(c=na.call(t),c==Y?c=ee:c!=ee&&(a=Ho(t))),u||(f=na.call(e),f==Y?f=ee:f!=ee&&(u=Ho(e)));var h=c==ee,l=f==ee,p=c==f;if(p&&!a&&!h)return Mn(t,e,c);if(!i){var d=h&&ea.call(t,"__wrapped__"),_=l&&ea.call(e,"__wrapped__");if(d||_)return r(d?t.value():t,_?e.value():e,n,i,o,s)}if(!p)return!1;o||(o=[]),s||(s=[]);for(var g=o.length;g--;)if(o[g]==t)return s[g]==e;o.push(t),s.push(e);var y=(a?qn:Pn)(t,e,r,n,i,o,s);return o.pop(),s.pop(),y}function Nr(t,e,r){var n=e.length,i=n,o=!r;if(null==t)return!i;for(t=hi(t);n--;){var s=e[n];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++n<i;){s=e[n];var a=s[0],u=t[a],c=s[1];if(o&&s[2]){if(u===B&&!(a in t))return!1}else{var f=r?r(u,c,a):B;if(!(f===B?Lr(c,u,r,!0):f))return!1}}return!0}function qr(t,e){var r=-1,n=Jn(t)?Us(t.length):[];return ja(t,function(t,i,o){n[++r]=e(t,i,o)}),n}function Mr(t){var e=Hn(t);if(1==e.length&&e[0][2]){var r=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[r]===n&&(n!==B||r in hi(t))}}return function(t){return Nr(t,e)}}function Pr(t,e){var r=Du(t),n=ti(t)&&ni(e),i=t+"";return t=li(t),function(o){if(null==o)return!1;var s=i;if(o=hi(o),!(!r&&n||s in o)){if(o=1==t.length?o:Rr(o,Xr(t,0,-1)),null==o)return!1;s=Ci(t),o=hi(o)}return o[s]===e?e!==B||s in o:Lr(e,o[s],B,!0)}}function Ur(t,e,r,n,i){if(!Lo(t))return t;var o=Jn(e)&&(Du(e)||Ho(e)),s=o?B:Pu(e);return er(s||e,function(a,u){if(s&&(u=a,a=e[u]),m(a))n||(n=[]),i||(i=[]),zr(t,e,u,Ur,r,n,i);else{var c=t[u],f=r?r(c,a,u,t,e):B,h=f===B;h&&(f=a),f===B&&(!o||u in t)||!h&&(f===f?f===c:c!==c)||(t[u]=f)}}),t}function zr(t,e,r,n,i,o,s){for(var a=o.length,u=e[r];a--;)if(o[a]==u)return void(t[r]=s[a]);var c=t[r],f=i?i(c,u,r,t,e):B,h=f===B;h&&(f=u,Jn(u)&&(Du(u)||Ho(u))?f=Du(c)?c:Jn(c)?tr(c):[]:Uo(u)||Co(u)?f=Co(c)?$o(c):Uo(c)?c:{}:h=!1),o.push(u),s.push(f),h?t[r]=n(f,u,i,o,s):(f===f?f!==c:c===c)&&(t[r]=f)}function Gr(t){return function(e){return null==e?B:e[t]}}function Hr(t){var e=t+"";return t=li(t),function(r){return Rr(r,t,e)}}function Vr(t,e){for(var r=t?e.length:0;r--;){var n=e[r];if(n!=i&&Qn(n)){var i=n;pa.call(t,n,1)}}return t}function Kr(t,e){return t+va(Ca()*(e-t+1))}function Yr(t,e,r,n,i){return i(t,function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)}),r}function Xr(t,e,r){var n=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),r=r===B||r>i?i:+r||0,0>r&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Us(i);++n<i;)o[n]=t[n+e];return o}function $r(t,e){var r;return ja(t,function(t,n,i){return r=e(t,n,i),!r}),!!r}function Wr(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function Jr(t,e,r){var n=Un(),i=-1;e=ur(e,function(t){return n(t)});var o=qr(t,function(t){var r=ur(e,function(e){return e(t)});return{criteria:r,index:++i,value:t}});return Wr(o,function(t,e){return p(t,e,r)})}function Qr(t,e){var r=0;return ja(t,function(t,n,i){r+=+e(t,n,i)||0}),r}function Zr(t,e){var r=-1,n=Gn(),i=t.length,o=n==a,s=o&&i>=z,u=s?_n():null,c=[];u?(n=Je,o=!1):(s=!1,u=e?[]:c);t:for(;++r<i;){var f=t[r],h=e?e(f,r,t):f;if(o&&f===f){for(var l=u.length;l--;)if(u[l]===h)continue t;e&&u.push(h),c.push(f)}else n(u,h,0)<0&&((e||s)&&u.push(h),c.push(f))}return c}function tn(t,e){for(var r=-1,n=e.length,i=Us(n);++r<n;)i[r]=t[e[r]];return i}function en(t,e,r,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&e(t[o],o,t););return r?Xr(t,n?0:o,n?o+1:i):Xr(t,n?o+1:0,n?i:o)}function rn(t,e){var r=t;r instanceof i&&(r=r.value());for(var n=-1,o=e.length;++n<o;){var s=e[n];r=s.func.apply(s.thisArg,cr([r],s.args))}return r}function nn(t,e,r){var n=0,i=t?t.length:n;if("number"==typeof e&&e===e&&ka>=i){for(;i>n;){var o=n+i>>>1,s=t[o];(r?e>=s:e>s)&&null!==s?n=o+1:i=o}return i}return on(t,e,Ss,r)}function on(t,e,r,n){e=r(e);for(var i=0,o=t?t.length:0,s=e!==e,a=null===e,u=e===B;o>i;){var c=va((i+o)/2),f=r(t[c]),h=f!==B,l=f===f;if(s)var p=l||n;else p=a?l&&h&&(n||null!=f):u?l&&(n||h):null==f?!1:n?e>=f:e>f;p?i=c+1:o=c}return Aa(o,Ta)}function sn(t,e,r){if("function"!=typeof t)return Ss;if(e===B)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)};case 5:return function(r,n,i,o,s){return t.call(e,r,n,i,o,s)}}return function(){return t.apply(e,arguments)}}function an(t){var e=new sa(t.byteLength),r=new da(e);return r.set(new da(t)),e}function un(t,e,r){for(var n=r.length,i=-1,o=Ea(t.length-n,0),s=-1,a=e.length,u=Us(a+o);++s<a;)u[s]=e[s];for(;++i<n;)u[r[i]]=t[i];for(;o--;)u[s++]=t[i++];return u}function cn(t,e,r){for(var n=-1,i=r.length,o=-1,s=Ea(t.length-i,0),a=-1,u=e.length,c=Us(s+u);++o<s;)c[o]=t[o];for(var f=o;++a<u;)c[f+a]=e[a];for(;++n<i;)c[f+r[n]]=t[o++];return c}function fn(t,e){return function(r,n,i){var o=e?e():{};if(n=Un(n,i,3),Du(r))for(var s=-1,a=r.length;++s<a;){var u=r[s];t(o,u,n(u,s,r),r)}else ja(r,function(e,r,i){t(o,e,n(e,r,i),i)});return o}}function hn(t){return vo(function(e,r){var n=-1,i=null==e?0:r.length,o=i>2?r[i-2]:B,s=i>2?r[2]:B,a=i>1?r[i-1]:B;for("function"==typeof o?(o=sn(o,a,5),i-=2):(o="function"==typeof a?a:B,i-=o?1:0),s&&Zn(r[0],r[1],s)&&(o=3>i?B:o,i=1);++n<i;){var u=r[n];u&&t(e,u,o)}return e})}function ln(t,e){return function(r,n){var i=r?za(r):0;if(!ri(i))return t(r,n);for(var o=e?i:-1,s=hi(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}function pn(t){return function(e,r,n){for(var i=hi(e),o=n(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var u=o[a];if(r(i[u],u,i)===!1)break}return e}}function dn(t,e){function r(){var i=this&&this!==nr&&this instanceof r?n:t;return i.apply(e,arguments)}var n=yn(t);return r}function _n(t){return ya&&ha?new We(t):null}function gn(t){return function(e){for(var r=-1,n=Fs(hs(e)),i=n.length,o="";++r<i;)o=t(o,n[r],r);return o}}function yn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=La(t.prototype),n=t.apply(r,e);return Lo(n)?n:r}}function vn(t){function e(r,n,i){i&&Zn(r,n,i)&&(n=B);var o=Nn(r,t,B,B,B,B,B,n);return o.placeholder=e.placeholder,o}return e}function mn(t,e){return vo(function(r){var n=r[0];return null==n?n:(r.push(e),t.apply(B,r))})}function bn(t,e){return function(r,n,i){if(i&&Zn(r,n,i)&&(n=B),n=Un(n,i,3),1==n.length){r=Du(r)?r:fi(r);var o=sr(r,n,t,e);if(!r.length||o!==e)return o}return Fr(r,n,t,e)}}function wn(t,e){return function(r,n,i){if(n=Un(n,i,3),Du(r)){var o=s(r,n,e);return o>-1?r[o]:B}return Sr(r,n,t)}}function En(t){return function(e,r,n){return e&&e.length?(r=Un(r,n,3),s(e,r,t)):-1}}function An(t){return function(e,r,n){return r=Un(r,n,3),Sr(e,r,t,!0)}}function xn(t){return function(){for(var e,r=arguments.length,i=t?r:-1,o=0,s=Us(r);t?i--:++i<r;){var a=s[o++]=arguments[i];if("function"!=typeof a)throw new Ws(V);!e&&n.prototype.thru&&"wrapper"==zn(a)&&(e=new n([],!0))}for(i=e?-1:r;++i<r;){a=s[i];var u=zn(a),c="wrapper"==u?Ua(a):B;e=c&&ei(c[0])&&c[1]==(j|O|R|N)&&!c[4].length&&1==c[9]?e[zn(c[0])].apply(e,c[3]):1==a.length&&ei(a)?e[u]():e.thru(a)}return function(){var t=arguments,n=t[0];if(e&&1==t.length&&Du(n)&&n.length>=z)return e.plant(n).value();for(var i=0,o=r?s[i].apply(this,t):n;++i<r;)o=s[i].call(this,o);return o}}}function Fn(t,e){return function(r,n,i){return"function"==typeof n&&i===B&&Du(r)?t(r,n):e(r,sn(n,i,3))}}function Cn(t){return function(e,r,n){return("function"!=typeof r||n!==B)&&(r=sn(r,n,3)),t(e,r,es)}}function Bn(t){return function(e,r,n){return("function"!=typeof r||n!==B)&&(r=sn(r,n,3)),t(e,r)}}function Sn(t){return function(e,r,n){var i={};return r=Un(r,n,3),kr(e,function(e,n,o){var s=r(e,n,o);n=t?s:n,e=t?e:s,i[n]=e}),i}}function Dn(t){return function(e,r,n){return e=c(e),(t?e:"")+In(e,r,n)+(t?"":e)}}function Tn(t){var e=vo(function(r,n){var i=w(n,e.placeholder);return Nn(r,t,B,n,i)});return e}function kn(t,e){return function(r,n,i,o){var s=arguments.length<3;return"function"==typeof n&&o===B&&Du(r)?t(r,n,i,s):Yr(r,Un(n,o,4),i,s,e)}}function On(t,e,r,n,i,o,s,a,u,c){function f(){for(var v=arguments.length,m=v,b=Us(v);m--;)b[m]=arguments[m];if(n&&(b=un(b,n,i)),o&&(b=cn(b,o,s)),d||g){var E=f.placeholder,A=w(b,E);if(v-=A.length,c>v){var x=a?tr(a):B,F=Ea(c-v,0),C=d?A:B,S=d?B:A,k=d?b:B,O=d?B:b;e|=d?R:L,e&=~(d?L:R),_||(e&=~(D|T));var I=[t,e,r,k,C,O,S,x,u,F],j=On.apply(B,I);return ei(t)&&Ga(j,I),j.placeholder=E,j}}var N=l?r:this,q=p?N[t]:t;return a&&(b=ui(b,a)),h&&u<b.length&&(b.length=u),this&&this!==nr&&this instanceof f&&(q=y||yn(t)),q.apply(N,b)}var h=e&j,l=e&D,p=e&T,d=e&O,_=e&k,g=e&I,y=p?B:yn(t);return f}function In(t,e,r){var n=t.length;if(e=+e,n>=e||!ba(e))return"";var i=e-n;return r=null==r?" ":r+"",ys(r,ga(i/r.length)).slice(0,i)}function Rn(t,e,r,n){function i(){for(var e=-1,a=arguments.length,u=-1,c=n.length,f=Us(c+a);++u<c;)f[u]=n[u];for(;a--;)f[u++]=arguments[++e];var h=this&&this!==nr&&this instanceof i?s:t;return h.apply(o?r:this,f)}var o=e&D,s=yn(t);return i}function Ln(t){var e=Vs[t];return function(t,r){return r=r===B?0:+r||0,r?(r=ca(10,r),e(t*r)/r):e(t)}}function jn(t){return function(e,r,n,i){var o=Un(n);return null==n&&o===br?nn(e,r,t):on(e,r,o(n,i,1),t)}}function Nn(t,e,r,n,i,o,s,a){var u=e&T;if(!u&&"function"!=typeof t)throw new Ws(V);var c=n?n.length:0;if(c||(e&=~(R|L),n=i=B),c-=i?i.length:0,e&L){var f=n,h=i;n=i=B}var l=u?B:Ua(t),p=[t,e,r,n,i,f,h,o,s,a];if(l&&(ii(p,l),e=p[1],a=p[9]),p[9]=null==a?u?0:t.length:Ea(a-c,0)||0,e==D)var d=dn(p[0],p[2]);else d=e!=R&&e!=(D|R)||p[4].length?On.apply(B,p):Rn.apply(B,p);var _=l?Pa:Ga;return _(d,p)}function qn(t,e,r,n,i,o,s){var a=-1,u=t.length,c=e.length;if(u!=c&&!(i&&c>u))return!1;for(;++a<u;){var f=t[a],h=e[a],l=n?n(i?h:f,i?f:h,a):B;if(l!==B){if(l)continue;return!1}if(i){if(!lr(e,function(t){return f===t||r(f,t,n,i,o,s)}))return!1}else if(f!==h&&!r(f,h,n,i,o,s))return!1}return!0}function Mn(t,e,r){switch(r){case $:case W:return+t==+e;case J:return t.name==e.name&&t.message==e.message;case te:return t!=+t?e!=+e:t==+e;case re:case ie:return t==e+""}return!1}function Pn(t,e,r,n,i,o,s){var a=Pu(t),u=a.length,c=Pu(e),f=c.length;if(u!=f&&!i)return!1;for(var h=u;h--;){var l=a[h];if(!(i?l in e:ea.call(e,l)))return!1}for(var p=i;++h<u;){l=a[h];var d=t[l],_=e[l],g=n?n(i?_:d,i?d:_,l):B;if(!(g===B?r(d,_,n,i,o,s):g))return!1;p||(p="constructor"==l)}if(!p){var y=t.constructor,v=e.constructor;if(y!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v))return!1}return!0}function Un(t,r,n){var i=e.callback||Cs;return i=i===Cs?br:i,n?i(t,r,n):i}function zn(t){for(var e=t.name,r=Ra[e],n=r?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e}function Gn(t,r,n){var i=e.indexOf||xi;return i=i===xi?a:i,t?i(t,r,n):i}function Hn(t){for(var e=rs(t),r=e.length;r--;)e[r][2]=ni(e[r][1]);return e}function Vn(t,e){var r=null==t?B:t[e];return qo(r)?r:B}function Kn(t,e,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Aa(e,t+s);break;case"takeRight":t=Ea(t,e-s)}}return{start:t,end:e}}function Yn(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&ea.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Xn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ys),new e}function $n(t,e,r){var n=t.constructor;switch(e){case se:return an(t);case $:case W:return new n(+t);case ae:case ue:case ce:case fe:case he:case le:case pe:case de:case _e:var i=t.buffer;return new n(r?an(i):i,t.byteOffset,t.length);case te:case ie:return new n(t);case re:var o=new n(t.source,Re.exec(t));o.lastIndex=t.lastIndex}return o}function Wn(t,e,r){null==t||ti(e,t)||(e=li(e),t=1==e.length?t:Rr(t,Xr(e,0,-1)),e=Ci(e));var n=null==t?t:t[e];return null==n?B:n.apply(t,r)}function Jn(t){return null!=t&&ri(za(t))}function Qn(t,e){return t="number"==typeof t||Ne.test(t)?+t:-1,e=null==e?Oa:e,t>-1&&t%1==0&&e>t}function Zn(t,e,r){if(!Lo(r))return!1;var n=typeof e;if("number"==n?Jn(r)&&Qn(e,r.length):"string"==n&&e in r){var i=r[e];return t===t?t===i:i!==i}return!1}function ti(t,e){var r=typeof t;if("string"==r&&Be.test(t)||"number"==r)return!0;if(Du(t))return!1;var n=!Ce.test(t);return n||null!=e&&t in hi(e)}function ei(t){var r=zn(t);if(!(r in i.prototype))return!1;var n=e[r];if(t===n)return!0;var o=Ua(n);return!!o&&t===o[0]}function ri(t){return"number"==typeof t&&t>-1&&t%1==0&&Oa>=t}function ni(t){return t===t&&!Lo(t)}function ii(t,e){var r=t[1],n=e[1],i=r|n,o=j>i,s=n==j&&r==O||n==j&&r==N&&t[7].length<=e[8]||n==(j|N)&&r==O;if(!o&&!s)return t;n&D&&(t[2]=e[2],i|=r&D?0:k);var a=e[3];if(a){var u=t[3];t[3]=u?un(u,a,e[4]):tr(a),t[4]=u?w(t[3],K):tr(e[4])}return a=e[5],a&&(u=t[5],t[5]=u?cn(u,a,e[6]):tr(a),t[6]=u?w(t[5],K):tr(e[6])),a=e[7],a&&(t[7]=tr(a)),n&j&&(t[8]=null==t[8]?e[8]:Aa(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function oi(t,e){return t===B?e:Tu(t,e,oi)}function si(t,e){t=hi(t);for(var r=-1,n=e.length,i={};++r<n;){var o=e[r];o in t&&(i[o]=t[o])}return i}function ai(t,e){var r={};return Tr(t,function(t,n,i){e(t,n,i)&&(r[n]=t)}),r}function ui(t,e){for(var r=t.length,n=Aa(e.length,r),i=tr(t);n--;){var o=e[n];t[n]=Qn(o,r)?i[o]:B}return t}function ci(t){for(var e=es(t),r=e.length,n=r&&t.length,i=!!n&&ri(n)&&(Du(t)||Co(t)),o=-1,s=[];++o<r;){var a=e[o];(i&&Qn(a,n)||ea.call(t,a))&&s.push(a)}return s}function fi(t){return null==t?[]:Jn(t)?Lo(t)?t:Ys(t):ss(t)}function hi(t){return Lo(t)?t:Ys(t)}function li(t){if(Du(t))return t;var e=[];return c(t).replace(Se,function(t,r,n,i){e.push(n?i.replace(Oe,"$1"):r||t)}),e}function pi(t){return t instanceof i?t.clone():new n(t.__wrapped__,t.__chain__,tr(t.__actions__))}function di(t,e,r){e=(r?Zn(t,e,r):null==e)?1:Ea(va(e)||1,1);for(var n=0,i=t?t.length:0,o=-1,s=Us(ga(i/e));i>n;)s[++o]=Xr(t,n,n+=e);return s}function _i(t){for(var e=-1,r=t?t.length:0,n=-1,i=[];++e<r;){var o=t[e];o&&(i[++n]=o)}return i}function gi(t,e,r){var n=t?t.length:0;return n?((r?Zn(t,e,r):null==e)&&(e=1),Xr(t,0>e?0:e)):[]}function yi(t,e,r){var n=t?t.length:0;return n?((r?Zn(t,e,r):null==e)&&(e=1),e=n-(+e||0),Xr(t,0,0>e?0:e)):[]}function vi(t,e,r){return t&&t.length?en(t,Un(e,r,3),!0,!0):[]}function mi(t,e,r){return t&&t.length?en(t,Un(e,r,3),!0):[]}function bi(t,e,r,n){var i=t?t.length:0;return i?(r&&"number"!=typeof r&&Zn(t,e,r)&&(r=0,n=i),Cr(t,e,r,n)):[]}function wi(t){return t?t[0]:B}function Ei(t,e,r){var n=t?t.length:0;return r&&Zn(t,e,r)&&(e=!1),n?Dr(t,e):[]}function Ai(t){var e=t?t.length:0;return e?Dr(t,!0):[]}function xi(t,e,r){var n=t?t.length:0;if(!n)return-1;if("number"==typeof r)r=0>r?Ea(n+r,0):r;else if(r){var i=nn(t,e);return n>i&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return a(t,e,r||0)}function Fi(t){return yi(t,1)}function Ci(t){var e=t?t.length:0;return e?t[e-1]:B}function Bi(t,e,r){var n=t?t.length:0;if(!n)return-1;var i=n;if("number"==typeof r)i=(0>r?Ea(n+r,0):Aa(r||0,n-1))+1;else if(r){i=nn(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return v(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Si(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var r=0,n=Gn(),i=t.length;++r<i;)for(var o=0,s=t[r];(o=n(e,s,o))>-1;)pa.call(e,o,1);return e}function Di(t,e,r){var n=[];if(!t||!t.length)return n;var i=-1,o=[],s=t.length;for(e=Un(e,r,3);++i<s;){var a=t[i];e(a,i,t)&&(n.push(a),o.push(i))}return Vr(t,o),n}function Ti(t){return gi(t,1)}function ki(t,e,r){var n=t?t.length:0;return n?(r&&"number"!=typeof r&&Zn(t,e,r)&&(e=0,r=n),Xr(t,e,r)):[]}function Oi(t,e,r){var n=t?t.length:0;return n?((r?Zn(t,e,r):null==e)&&(e=1),Xr(t,0,0>e?0:e)):[]}function Ii(t,e,r){var n=t?t.length:0;return n?((r?Zn(t,e,r):null==e)&&(e=1),e=n-(+e||0),Xr(t,0>e?0:e)):[]}function Ri(t,e,r){return t&&t.length?en(t,Un(e,r,3),!1,!0):[]}function Li(t,e,r){return t&&t.length?en(t,Un(e,r,3)):[]}function ji(t,e,r,n){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(n=r,r=Zn(t,e,n)?B:e,e=!1);var o=Un();return(null!=r||o!==br)&&(r=o(r,n,3)),e&&Gn()==a?E(t,r):Zr(t,r)}function Ni(t){if(!t||!t.length)return[];var e=-1,r=0;t=ar(t,function(t){return Jn(t)?(r=Ea(t.length,r),!0):void 0});for(var n=Us(r);++e<r;)n[e]=ur(t,Gr(e));return n}function qi(t,e,r){var n=t?t.length:0;if(!n)return[];var i=Ni(t);return null==e?i:(e=sn(e,r,4),ur(i,function(t){return fr(t,e,B,!0)}))}function Mi(){for(var t=-1,e=arguments.length;++t<e;){var r=arguments[t];if(Jn(r))var n=n?cr(Ar(n,r),Ar(r,n)):r}return n?Zr(n):[]}function Pi(t,e){var r=-1,n=t?t.length:0,i={};for(!n||e||Du(t[0])||(e=[]);++r<n;){var o=t[r];e?i[o]=e[r]:o&&(i[o[0]]=o[1])}return i}function Ui(t){var r=e(t);return r.__chain__=!0,r}function zi(t,e,r){return e.call(r,t),t}function Gi(t,e,r){return e.call(r,t)}function Hi(){return Ui(this)}function Vi(){return new n(this.value(),this.__chain__)}function Ki(t){for(var e,n=this;n instanceof r;){var i=pi(n);e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function Yi(){var t=this.__wrapped__,e=function(t){return r&&r.__dir__<0?t:t.reverse()};if(t instanceof i){var r=t;return this.__actions__.length&&(r=new i(this)),r=r.reverse(),r.__actions__.push({func:Gi,args:[e],thisArg:B}),new n(r,this.__chain__)}return this.thru(e)}function Xi(){return this.value()+""}function $i(){return rn(this.__wrapped__,this.__actions__)}function Wi(t,e,r){var n=Du(t)?or:xr;return r&&Zn(t,e,r)&&(e=B),("function"!=typeof e||r!==B)&&(e=Un(e,r,3)),n(t,e)}function Ji(t,e,r){var n=Du(t)?ar:Br;return e=Un(e,r,3),n(t,e)}function Qi(t,e){return iu(t,Mr(e))}function Zi(t,e,r,n){var i=t?za(t):0;return ri(i)||(t=ss(t),i=t.length),r="number"!=typeof r||n&&Zn(e,r,n)?0:0>r?Ea(i+r,0):r||0,"string"==typeof t||!Du(t)&&Go(t)?i>=r&&t.indexOf(e,r)>-1:!!i&&Gn(t,e,r)>-1}function to(t,e,r){var n=Du(t)?ur:qr;return e=Un(e,r,3),n(t,e)}function eo(t,e){return to(t,Rs(e))}function ro(t,e,r){var n=Du(t)?ar:Br;return e=Un(e,r,3),n(t,function(t,r,n){return!e(t,r,n)})}function no(t,e,r){if(r?Zn(t,e,r):null==e){t=fi(t);var n=t.length;return n>0?t[Kr(0,n-1)]:B}var i=-1,o=Xo(t),n=o.length,s=n-1;for(e=Aa(0>e?0:+e||0,n);++i<e;){var a=Kr(i,s),u=o[a];o[a]=o[i],o[i]=u}return o.length=e,o}function io(t){return no(t,Sa)}function oo(t){var e=t?za(t):0;return ri(e)?e:Pu(t).length}function so(t,e,r){var n=Du(t)?lr:$r;return r&&Zn(t,e,r)&&(e=B),("function"!=typeof e||r!==B)&&(e=Un(e,r,3)),n(t,e)}function ao(t,e,r){if(null==t)return[];r&&Zn(t,e,r)&&(e=B);var n=-1;e=Un(e,r,3);var i=qr(t,function(t,r,i){return{criteria:e(t,r,i),index:++n,value:t}});return Wr(i,l)}function uo(t,e,r,n){return null==t?[]:(n&&Zn(e,r,n)&&(r=B),Du(e)||(e=null==e?[]:[e]),Du(r)||(r=null==r?[]:[r]),Jr(t,e,r))}function co(t,e){return Ji(t,Mr(e))}function fo(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Ws(V);var r=t;t=e,e=r}return t=ba(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function ho(t,e,r){return r&&Zn(t,e,r)&&(e=B),e=t&&null==e?t.length:Ea(+e||0,0),Nn(t,j,B,B,B,B,e)}function lo(t,e){var r;if("function"!=typeof e){if("function"!=typeof t)throw new Ws(V);var n=t;t=e,e=n}return function(){return--t>0&&(r=e.apply(this,arguments)),1>=t&&(e=B),r}}function po(t,e,r){function n(){p&&aa(p),c&&aa(c),_=0,c=p=d=B}function i(e,r){r&&aa(r),c=p=d=B,e&&(_=_u(),f=t.apply(l,u),p||c||(u=l=B))}function o(){var t=e-(_u()-h);0>=t||t>e?i(d,c):p=la(o,t)}function s(){i(y,p)}function a(){if(u=arguments,h=_u(),l=this,d=y&&(p||!v),g===!1)var r=v&&!p;else{c||v||(_=h);var n=g-(h-_),i=0>=n||n>g;i?(c&&(c=aa(c)),_=h,f=t.apply(l,u)):c||(c=la(s,n))}return i&&p?p=aa(p):p||e===g||(p=la(o,e)),r&&(i=!0,f=t.apply(l,u)),!i||p||c||(u=l=B),f}var u,c,f,h,l,p,d,_=0,g=!1,y=!0;if("function"!=typeof t)throw new Ws(V);if(e=0>e?0:+e||0,r===!0){var v=!0;y=!1}else Lo(r)&&(v=!!r.leading,g="maxWait"in r&&Ea(+r.maxWait||0,e),y="trailing"in r?!!r.trailing:y);return a.cancel=n,a}function _o(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Ws(V);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s
};return r.cache=new _o.Cache,r}function go(t){if("function"!=typeof t)throw new Ws(V);return function(){return!t.apply(this,arguments)}}function yo(t){return lo(2,t)}function vo(t,e){if("function"!=typeof t)throw new Ws(V);return e=Ea(e===B?t.length-1:+e||0,0),function(){for(var r=arguments,n=-1,i=Ea(r.length-e,0),o=Us(i);++n<i;)o[n]=r[e+n];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,r[0],o);case 2:return t.call(this,r[0],r[1],o)}var s=Us(e+1);for(n=-1;++n<e;)s[n]=r[n];return s[e]=o,t.apply(this,s)}}function mo(t){if("function"!=typeof t)throw new Ws(V);return function(e){return t.apply(this,e)}}function bo(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new Ws(V);return r===!1?n=!1:Lo(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),po(t,e,{leading:n,maxWait:+e,trailing:i})}function wo(t,e){return e=null==e?Ss:e,Nn(e,R,B,[t],[])}function Eo(t,e,r,n){return e&&"boolean"!=typeof e&&Zn(t,e,r)?e=!1:"function"==typeof e&&(n=r,r=e,e=!1),"function"==typeof r?wr(t,e,sn(r,n,1)):wr(t,e)}function Ao(t,e,r){return"function"==typeof e?wr(t,!0,sn(e,r,1)):wr(t,!0)}function xo(t,e){return t>e}function Fo(t,e){return t>=e}function Co(t){return m(t)&&Jn(t)&&ea.call(t,"callee")&&!fa.call(t,"callee")}function Bo(t){return t===!0||t===!1||m(t)&&na.call(t)==$}function So(t){return m(t)&&na.call(t)==W}function Do(t){return!!t&&1===t.nodeType&&m(t)&&!Uo(t)}function To(t){return null==t?!0:Jn(t)&&(Du(t)||Go(t)||Co(t)||m(t)&&Ro(t.splice))?!t.length:!Pu(t).length}function ko(t,e,r,n){r="function"==typeof r?sn(r,n,3):B;var i=r?r(t,e):B;return i===B?Lr(t,e,r):!!i}function Oo(t){return m(t)&&"string"==typeof t.message&&na.call(t)==J}function Io(t){return"number"==typeof t&&ba(t)}function Ro(t){return Lo(t)&&na.call(t)==Q}function Lo(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function jo(t,e,r,n){return r="function"==typeof r?sn(r,n,3):B,Nr(t,Hn(e),r)}function No(t){return Po(t)&&t!=+t}function qo(t){return null==t?!1:Ro(t)?oa.test(ta.call(t)):m(t)&&je.test(t)}function Mo(t){return null===t}function Po(t){return"number"==typeof t||m(t)&&na.call(t)==te}function Uo(t){var e;if(!m(t)||na.call(t)!=ee||Co(t)||!ea.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var r;return Tr(t,function(t,e){r=e}),r===B||ea.call(t,r)}function zo(t){return Lo(t)&&na.call(t)==re}function Go(t){return"string"==typeof t||m(t)&&na.call(t)==ie}function Ho(t){return m(t)&&ri(t.length)&&!!He[na.call(t)]}function Vo(t){return t===B}function Ko(t,e){return e>t}function Yo(t,e){return e>=t}function Xo(t){var e=t?za(t):0;return ri(e)?e?tr(t):[]:ss(t)}function $o(t){return mr(t,es(t))}function Wo(t,e,r){var n=La(t);return r&&Zn(t,e,r)&&(e=B),e?yr(n,e):n}function Jo(t){return Ir(t,es(t))}function Qo(t,e,r){var n=null==t?B:Rr(t,li(e),e+"");return n===B?r:n}function Zo(t,e){if(null==t)return!1;var r=ea.call(t,e);if(!r&&!ti(e)){if(e=li(e),t=1==e.length?t:Rr(t,Xr(e,0,-1)),null==t)return!1;e=Ci(e),r=ea.call(t,e)}return r||ri(t.length)&&Qn(e,t.length)&&(Du(t)||Co(t))}function ts(t,e,r){r&&Zn(t,e,r)&&(e=B);for(var n=-1,i=Pu(t),o=i.length,s={};++n<o;){var a=i[n],u=t[a];e?ea.call(s,u)?s[u].push(a):s[u]=[a]:s[u]=a}return s}function es(t){if(null==t)return[];Lo(t)||(t=Ys(t));var e=t.length;e=e&&ri(e)&&(Du(t)||Co(t))&&e||0;for(var r=t.constructor,n=-1,i="function"==typeof r&&r.prototype===t,o=Us(e),s=e>0;++n<e;)o[n]=n+"";for(var a in t)s&&Qn(a,e)||"constructor"==a&&(i||!ea.call(t,a))||o.push(a);return o}function rs(t){t=hi(t);for(var e=-1,r=Pu(t),n=r.length,i=Us(n);++e<n;){var o=r[e];i[e]=[o,t[o]]}return i}function ns(t,e,r){var n=null==t?B:t[e];return n===B&&(null==t||ti(e,t)||(e=li(e),t=1==e.length?t:Rr(t,Xr(e,0,-1)),n=null==t?B:t[Ci(e)]),n=n===B?r:n),Ro(n)?n.call(t):n}function is(t,e,r){if(null==t)return t;var n=e+"";e=null!=t[n]||ti(e,t)?[n]:li(e);for(var i=-1,o=e.length,s=o-1,a=t;null!=a&&++i<o;){var u=e[i];Lo(a)&&(i==s?a[u]=r:null==a[u]&&(a[u]=Qn(e[i+1])?[]:{})),a=a[u]}return t}function os(t,e,r,n){var i=Du(t)||Ho(t);if(e=Un(e,n,4),null==r)if(i||Lo(t)){var o=t.constructor;r=i?Du(t)?new o:[]:La(Ro(o)?o.prototype:B)}else r={};return(i?er:kr)(t,function(t,n,i){return e(r,t,n,i)}),r}function ss(t){return tn(t,Pu(t))}function as(t){return tn(t,es(t))}function us(t,e,r){return e=+e||0,r===B?(r=e,e=0):r=+r||0,t>=Aa(e,r)&&t<Ea(e,r)}function cs(t,e,r){r&&Zn(t,e,r)&&(e=r=B);var n=null==t,i=null==e;if(null==r&&(i&&"boolean"==typeof t?(r=t,t=1):"boolean"==typeof e&&(r=e,i=!0)),n&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,r||t%1||e%1){var o=Ca();return Aa(t+o*(e-t+ua("1e-"+((o+"").length-1))),e)}return Kr(t,e)}function fs(t){return t=c(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function hs(t){return t=c(t),t&&t.replace(qe,d).replace(ke,"")}function ls(t,e,r){t=c(t),e+="";var n=t.length;return r=r===B?n:Aa(0>r?0:+r||0,n),r-=e.length,r>=0&&t.indexOf(e,r)==r}function ps(t){return t=c(t),t&&Ee.test(t)?t.replace(be,_):t}function ds(t){return t=c(t),t&&Te.test(t)?t.replace(De,g):t||"(?:)"}function _s(t,e,r){t=c(t),e=+e;var n=t.length;if(n>=e||!ba(e))return t;var i=(e-n)/2,o=va(i),s=ga(i);return r=In("",s,r),r.slice(0,o)+t+r}function gs(t,e,r){return(r?Zn(t,e,r):null==e)?e=0:e&&(e=+e),t=bs(t),Fa(t,e||(Le.test(t)?16:10))}function ys(t,e){var r="";if(t=c(t),e=+e,1>e||!t||!ba(e))return r;do e%2&&(r+=t),e=va(e/2),t+=t;while(e);return r}function vs(t,e,r){return t=c(t),r=null==r?0:Aa(0>r?0:+r||0,t.length),t.lastIndexOf(e,r)==r}function ms(t,r,n){var i=e.templateSettings;n&&Zn(t,r,n)&&(r=n=B),t=c(t),r=gr(yr({},n||r),i,_r);var o,s,a=gr(yr({},r.imports),i.imports,_r),u=Pu(a),f=tn(a,u),h=0,l=r.interpolate||Me,p="__p += '",d=Xs((r.escape||Me).source+"|"+l.source+"|"+(l===Fe?Ie:Me).source+"|"+(r.evaluate||Me).source+"|$","g"),_="//# sourceURL="+("sourceURL"in r?r.sourceURL:"lodash.templateSources["+ ++Ge+"]")+"\n";t.replace(d,function(e,r,n,i,a,u){return n||(n=i),p+=t.slice(h,u).replace(Pe,y),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),p+="';\n";var g=r.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(ge,""):p).replace(ye,"$1").replace(ve,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Ju(function(){return Hs(u,_+"return "+p).apply(B,f)});if(v.source=p,Oo(v))throw v;return v}function bs(t,e,r){var n=t;return(t=c(t))?(r?Zn(n,e,r):null==e)?t.slice(A(t),x(t)+1):(e+="",t.slice(f(t,e),h(t,e)+1)):t}function ws(t,e,r){var n=t;return t=c(t),t?t.slice((r?Zn(n,e,r):null==e)?A(t):f(t,e+"")):t}function Es(t,e,r){var n=t;return t=c(t),t?(r?Zn(n,e,r):null==e)?t.slice(0,x(t)+1):t.slice(0,h(t,e+"")+1):t}function As(t,e,r){r&&Zn(t,e,r)&&(e=B);var n=q,i=M;if(null!=e)if(Lo(e)){var o="separator"in e?e.separator:o;n="length"in e?+e.length||0:n,i="omission"in e?c(e.omission):i}else n=+e||0;if(t=c(t),n>=t.length)return t;var s=n-i.length;if(1>s)return i;var a=t.slice(0,s);if(null==o)return a+i;if(zo(o)){if(t.slice(s).search(o)){var u,f,h=t.slice(0,s);for(o.global||(o=Xs(o.source,(Re.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(h);)f=u.index;a=a.slice(0,null==f?s:f)}}else if(t.indexOf(o,s)!=s){var l=a.lastIndexOf(o);l>-1&&(a=a.slice(0,l))}return a+i}function xs(t){return t=c(t),t&&we.test(t)?t.replace(me,F):t}function Fs(t,e,r){return r&&Zn(t,e,r)&&(e=B),t=c(t),t.match(e||Ue)||[]}function Cs(t,e,r){return r&&Zn(t,e,r)&&(e=B),m(t)?Ds(t):br(t,e)}function Bs(t){return function(){return t}}function Ss(t){return t}function Ds(t){return Mr(wr(t,!0))}function Ts(t,e){return Pr(t,wr(e,!0))}function ks(t,e,r){if(null==r){var n=Lo(e),i=n?Pu(e):B,o=i&&i.length?Ir(e,i):B;(o?o.length:n)||(o=!1,r=e,e=t,t=this)}o||(o=Ir(e,Pu(e)));var s=!0,a=-1,u=Ro(t),c=o.length;r===!1?s=!1:Lo(r)&&"chain"in r&&(s=r.chain);for(;++a<c;){var f=o[a],h=e[f];t[f]=h,u&&(t.prototype[f]=function(e){return function(){var r=this.__chain__;if(s||r){var n=t(this.__wrapped__),i=n.__actions__=tr(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),n.__chain__=r,n}return e.apply(t,cr([this.value()],arguments))}}(h))}return t}function Os(){return nr._=ia,this}function Is(){}function Rs(t){return ti(t)?Gr(t):Hr(t)}function Ls(t){return function(e){return Rr(t,li(e),e+"")}}function js(t,e,r){r&&Zn(t,e,r)&&(e=r=B),t=+t||0,r=null==r?1:+r||0,null==e?(e=t,t=0):e=+e||0;for(var n=-1,i=Ea(ga((e-t)/(r||1)),0),o=Us(i);++n<i;)o[n]=t,t+=r;return o}function Ns(t,e,r){if(t=va(t),1>t||!ba(t))return[];var n=-1,i=Us(Aa(t,Da));for(e=sn(e,r,1);++n<t;)Da>n?i[n]=e(n):e(n);return i}function qs(t){var e=++ra;return c(t)+e}function Ms(t,e){return(+t||0)+(+e||0)}function Ps(t,e,r){return r&&Zn(t,e,r)&&(e=B),e=Un(e,r,3),1==e.length?pr(Du(t)?t:fi(t),e):Qr(t,e)}t=t?ir.defaults(nr.Object(),t,ir.pick(nr,ze)):nr;{var Us=t.Array,zs=t.Date,Gs=t.Error,Hs=t.Function,Vs=t.Math,Ks=t.Number,Ys=t.Object,Xs=t.RegExp,$s=t.String,Ws=t.TypeError,Js=Us.prototype,Qs=Ys.prototype,Zs=$s.prototype,ta=Hs.prototype.toString,ea=Qs.hasOwnProperty,ra=0,na=Qs.toString,ia=nr._,oa=Xs("^"+ta.call(ea).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sa=t.ArrayBuffer,aa=t.clearTimeout,ua=t.parseFloat,ca=Vs.pow,fa=Qs.propertyIsEnumerable,ha=Vn(t,"Set"),la=t.setTimeout,pa=Js.splice,da=t.Uint8Array,_a=Vn(t,"WeakMap"),ga=Vs.ceil,ya=Vn(Ys,"create"),va=Vs.floor,ma=Vn(Us,"isArray"),ba=t.isFinite,wa=Vn(Ys,"keys"),Ea=Vs.max,Aa=Vs.min,xa=Vn(zs,"now"),Fa=t.parseInt,Ca=Vs.random,Ba=Ks.NEGATIVE_INFINITY,Sa=Ks.POSITIVE_INFINITY,Da=4294967295,Ta=Da-1,ka=Da>>>1,Oa=9007199254740991,Ia=_a&&new _a,Ra={};e.support={}}e.templateSettings={escape:Ae,evaluate:xe,interpolate:Fe,variable:"",imports:{_:e}};var La=function(){function t(){}return function(e){if(Lo(e)){t.prototype=e;var r=new t;t.prototype=B}return r||{}}}(),ja=ln(kr),Na=ln(Or,!0),qa=pn(),Ma=pn(!0),Pa=Ia?function(t,e){return Ia.set(t,e),t}:Ss,Ua=Ia?function(t){return Ia.get(t)}:Is,za=Gr("length"),Ga=function(){var t=0,e=0;return function(r,n){var i=_u(),o=U-(i-e);if(e=i,o>0){if(++t>=P)return r}else t=0;return Pa(r,n)}}(),Ha=vo(function(t,e){return m(t)&&Jn(t)?Ar(t,Dr(e,!1,!0)):[]}),Va=En(),Ka=En(!0),Ya=vo(function(t){for(var e=t.length,r=e,n=Us(h),i=Gn(),o=i==a,s=[];r--;){var u=t[r]=Jn(u=t[r])?u:[];n[r]=o&&u.length>=120?_n(r&&u):null}var c=t[0],f=-1,h=c?c.length:0,l=n[0];t:for(;++f<h;)if(u=c[f],(l?Je(l,u):i(s,u,0))<0){for(var r=e;--r;){var p=n[r];if((p?Je(p,u):i(t[r],u,0))<0)continue t}l&&l.push(u),s.push(u)}return s}),Xa=vo(function(t,e){e=Dr(e);var r=vr(t,e);return Vr(t,e.sort(o)),r}),$a=jn(),Wa=jn(!0),Ja=vo(function(t){return Zr(Dr(t,!1,!0))}),Qa=vo(function(t,e){return Jn(t)?Ar(t,e):[]}),Za=vo(Ni),tu=vo(function(t){var e=t.length,r=e>2?t[e-2]:B,n=e>1?t[e-1]:B;return e>2&&"function"==typeof r?e-=2:(r=e>1&&"function"==typeof n?(--e,n):B,n=B),t.length=e,qi(t,r,n)}),eu=vo(function(t){return t=Dr(t),this.thru(function(e){return Ze(Du(e)?e:[hi(e)],t)})}),ru=vo(function(t,e){return vr(t,Dr(e))}),nu=fn(function(t,e,r){ea.call(t,r)?++t[r]:t[r]=1}),iu=wn(ja),ou=wn(Na,!0),su=Fn(er,ja),au=Fn(rr,Na),uu=fn(function(t,e,r){ea.call(t,r)?t[r].push(e):t[r]=[e]}),cu=fn(function(t,e,r){t[r]=e}),fu=vo(function(t,e,r){var n=-1,i="function"==typeof e,o=ti(e),s=Jn(t)?Us(t.length):[];return ja(t,function(t){var a=i?e:o&&null!=t?t[e]:B;s[++n]=a?a.apply(t,r):Wn(t,e,r)}),s}),hu=fn(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),lu=kn(fr,ja),pu=kn(hr,Na),du=vo(function(t,e){if(null==t)return[];var r=e[2];return r&&Zn(e[0],e[1],r)&&(e.length=1),Jr(t,Dr(e),[])}),_u=xa||function(){return(new zs).getTime()},gu=vo(function(t,e,r){var n=D;if(r.length){var i=w(r,gu.placeholder);n|=R}return Nn(t,n,e,r,i)}),yu=vo(function(t,e){e=e.length?Dr(e):Jo(t);for(var r=-1,n=e.length;++r<n;){var i=e[r];t[i]=Nn(t[i],D,t)}return t}),vu=vo(function(t,e,r){var n=D|T;if(r.length){var i=w(r,vu.placeholder);n|=R}return Nn(e,n,t,r,i)}),mu=vn(O),bu=vn(I),wu=vo(function(t,e){return Er(t,1,e)}),Eu=vo(function(t,e,r){return Er(t,e,r)}),Au=xn(),xu=xn(!0),Fu=vo(function(t,e){if(e=Dr(e),"function"!=typeof t||!or(e,u))throw new Ws(V);var r=e.length;return vo(function(n){for(var i=Aa(n.length,r);i--;)n[i]=e[i](n[i]);return t.apply(this,n)})}),Cu=Tn(R),Bu=Tn(L),Su=vo(function(t,e){return Nn(t,N,B,B,B,Dr(e))}),Du=ma||function(t){return m(t)&&ri(t.length)&&na.call(t)==X},Tu=hn(Ur),ku=hn(function(t,e,r){return r?gr(t,e,r):yr(t,e)}),Ou=mn(ku,dr),Iu=mn(Tu,oi),Ru=An(kr),Lu=An(Or),ju=Cn(qa),Nu=Cn(Ma),qu=Bn(kr),Mu=Bn(Or),Pu=wa?function(t){var e=null==t?B:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Jn(t)?ci(t):Lo(t)?wa(t):[]}:ci,Uu=Sn(!0),zu=Sn(),Gu=vo(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ur(Dr(e),$s);return si(t,Ar(es(t),e))}var r=sn(e[0],e[1],3);return ai(t,function(t,e,n){return!r(t,e,n)})}),Hu=vo(function(t,e){return null==t?{}:"function"==typeof e[0]?ai(t,sn(e[0],e[1],3)):si(t,Dr(e))}),Vu=gn(function(t,e,r){return e=e.toLowerCase(),t+(r?e.charAt(0).toUpperCase()+e.slice(1):e)}),Ku=gn(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Yu=Dn(),Xu=Dn(!0),$u=gn(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Wu=gn(function(t,e,r){return t+(r?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ju=vo(function(t,e){try{return t.apply(B,e)}catch(r){return Oo(r)?r:new Gs(r)}}),Qu=vo(function(t,e){return function(r){return Wn(r,t,e)}}),Zu=vo(function(t,e){return function(r){return Wn(t,r,e)}}),tc=Ln("ceil"),ec=Ln("floor"),rc=bn(xo,Ba),nc=bn(Ko,Sa),ic=Ln("round");return e.prototype=r.prototype,n.prototype=La(r.prototype),n.prototype.constructor=n,i.prototype=La(r.prototype),i.prototype.constructor=i,oe.prototype["delete"]=Ke,oe.prototype.get=Ye,oe.prototype.has=Xe,oe.prototype.set=$e,We.prototype.push=Qe,_o.Cache=oe,e.after=fo,e.ary=ho,e.assign=ku,e.at=ru,e.before=lo,e.bind=gu,e.bindAll=yu,e.bindKey=vu,e.callback=Cs,e.chain=Ui,e.chunk=di,e.compact=_i,e.constant=Bs,e.countBy=nu,e.create=Wo,e.curry=mu,e.curryRight=bu,e.debounce=po,e.defaults=Ou,e.defaultsDeep=Iu,e.defer=wu,e.delay=Eu,e.difference=Ha,e.drop=gi,e.dropRight=yi,e.dropRightWhile=vi,e.dropWhile=mi,e.fill=bi,e.filter=Ji,e.flatten=Ei,e.flattenDeep=Ai,e.flow=Au,e.flowRight=xu,e.forEach=su,e.forEachRight=au,e.forIn=ju,e.forInRight=Nu,e.forOwn=qu,e.forOwnRight=Mu,e.functions=Jo,e.groupBy=uu,e.indexBy=cu,e.initial=Fi,e.intersection=Ya,e.invert=ts,e.invoke=fu,e.keys=Pu,e.keysIn=es,e.map=to,e.mapKeys=Uu,e.mapValues=zu,e.matches=Ds,e.matchesProperty=Ts,e.memoize=_o,e.merge=Tu,e.method=Qu,e.methodOf=Zu,e.mixin=ks,e.modArgs=Fu,e.negate=go,e.omit=Gu,e.once=yo,e.pairs=rs,e.partial=Cu,e.partialRight=Bu,e.partition=hu,e.pick=Hu,e.pluck=eo,e.property=Rs,e.propertyOf=Ls,e.pull=Si,e.pullAt=Xa,e.range=js,e.rearg=Su,e.reject=ro,e.remove=Di,e.rest=Ti,e.restParam=vo,e.set=is,e.shuffle=io,e.slice=ki,e.sortBy=ao,e.sortByAll=du,e.sortByOrder=uo,e.spread=mo,e.take=Oi,e.takeRight=Ii,e.takeRightWhile=Ri,e.takeWhile=Li,e.tap=zi,e.throttle=bo,e.thru=Gi,e.times=Ns,e.toArray=Xo,e.toPlainObject=$o,e.transform=os,e.union=Ja,e.uniq=ji,e.unzip=Ni,e.unzipWith=qi,e.values=ss,e.valuesIn=as,e.where=co,e.without=Qa,e.wrap=wo,e.xor=Mi,e.zip=Za,e.zipObject=Pi,e.zipWith=tu,e.backflow=xu,e.collect=to,e.compose=xu,e.each=su,e.eachRight=au,e.extend=ku,e.iteratee=Cs,e.methods=Jo,e.object=Pi,e.select=Ji,e.tail=Ti,e.unique=ji,ks(e,e),e.add=Ms,e.attempt=Ju,e.camelCase=Vu,e.capitalize=fs,e.ceil=tc,e.clone=Eo,e.cloneDeep=Ao,e.deburr=hs,e.endsWith=ls,e.escape=ps,e.escapeRegExp=ds,e.every=Wi,e.find=iu,e.findIndex=Va,e.findKey=Ru,e.findLast=ou,e.findLastIndex=Ka,e.findLastKey=Lu,e.findWhere=Qi,e.first=wi,e.floor=ec,e.get=Qo,e.gt=xo,e.gte=Fo,e.has=Zo,e.identity=Ss,e.includes=Zi,e.indexOf=xi,e.inRange=us,e.isArguments=Co,e.isArray=Du,e.isBoolean=Bo,e.isDate=So,e.isElement=Do,e.isEmpty=To,e.isEqual=ko,e.isError=Oo,e.isFinite=Io,e.isFunction=Ro,e.isMatch=jo,e.isNaN=No,e.isNative=qo,e.isNull=Mo,e.isNumber=Po,e.isObject=Lo,e.isPlainObject=Uo,e.isRegExp=zo,e.isString=Go,e.isTypedArray=Ho,e.isUndefined=Vo,e.kebabCase=Ku,e.last=Ci,e.lastIndexOf=Bi,e.lt=Ko,e.lte=Yo,e.max=rc,e.min=nc,e.noConflict=Os,e.noop=Is,e.now=_u,e.pad=_s,e.padLeft=Yu,e.padRight=Xu,e.parseInt=gs,e.random=cs,e.reduce=lu,e.reduceRight=pu,e.repeat=ys,e.result=ns,e.round=ic,e.runInContext=C,e.size=oo,e.snakeCase=$u,e.some=so,e.sortedIndex=$a,e.sortedLastIndex=Wa,e.startCase=Wu,e.startsWith=vs,e.sum=Ps,e.template=ms,e.trim=bs,e.trimLeft=ws,e.trimRight=Es,e.trunc=As,e.unescape=xs,e.uniqueId=qs,e.words=Fs,e.all=Wi,e.any=so,e.contains=Zi,e.eq=ko,e.detect=iu,e.foldl=lu,e.foldr=pu,e.head=wi,e.include=Zi,e.inject=lu,ks(e,function(){var t={};return kr(e,function(r,n){e.prototype[n]||(t[n]=r)}),t}(),!1),e.sample=no,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return no(e,t)}):no(this.value())},e.VERSION=S,er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),er(["drop","take"],function(t,e){i.prototype[t]=function(r){var n=this.__filtered__;if(n&&!e)return new i(this);r=null==r?1:Ea(va(r)||0,0);var o=this.clone();return n?o.__takeCount__=Aa(o.__takeCount__,r):o.__views__.push({size:r,type:t+(o.__dir__<0?"Right":"")}),o},i.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),er(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r!=H;i.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:Un(t,e,1),type:r}),i.__filtered__=i.__filtered__||n,i}}),er(["first","last"],function(t,e){var r="take"+(e?"Right":"");i.prototype[t]=function(){return this[r](1).value()[0]}}),er(["initial","rest"],function(t,e){var r="drop"+(e?"":"Right");i.prototype[t]=function(){return this.__filtered__?new i(this):this[r](1)}}),er(["pluck","where"],function(t,e){var r=e?"filter":"map",n=e?Mr:Rs;i.prototype[t]=function(t){return this[r](n(t))}}),i.prototype.compact=function(){return this.filter(Ss)},i.prototype.reject=function(t,e){return t=Un(t,e,1),this.filter(function(e){return!t(e)})},i.prototype.slice=function(t,e){t=null==t?0:+t||0;var r=this;return r.__filtered__&&(t>0||0>e)?new i(r):(0>t?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==B&&(e=+e||0,r=0>e?r.dropRight(-e):r.take(e-t)),r)},i.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},i.prototype.toArray=function(){return this.take(Sa)},kr(i.prototype,function(t,r){var o=/^(?:filter|map|reject)|While$/.test(r),s=/^(?:first|last)$/.test(r),a=e[s?"take"+("last"==r?"Right":""):r];a&&(e.prototype[r]=function(){var e=s?[1]:arguments,r=this.__chain__,u=this.__wrapped__,c=!!this.__actions__.length,f=u instanceof i,h=e[0],l=f||Du(u);l&&o&&"function"==typeof h&&1!=h.length&&(f=l=!1);var p=function(t){return s&&r?a(t,1)[0]:a.apply(B,cr([t],e))},d={func:Gi,args:[p],thisArg:B},_=f&&!c;if(s&&!r)return _?(u=u.clone(),u.__actions__.push(d),t.call(u)):a.call(B,this.value())[0];if(!s&&l){u=_?u:new i(this);var g=t.apply(u,e);return g.__actions__.push(d),new n(g,r)}return this.thru(p)})}),er(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var r=(/^(?:replace|split)$/.test(t)?Zs:Js)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?r.apply(this.value(),t):this[n](function(e){return r.apply(e,t)})}}),kr(i.prototype,function(t,r){var n=e[r];if(n){var i=n.name,o=Ra[i]||(Ra[i]=[]);o.push({name:r,func:n})}}),Ra[On(B,T).name]=[{name:"wrapper",func:B}],i.prototype.clone=b,i.prototype.reverse=Z,i.prototype.value=ne,e.prototype.chain=Hi,e.prototype.commit=Vi,e.prototype.concat=eu,e.prototype.plant=Ki,e.prototype.reverse=Yi,e.prototype.toString=Xi,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=$i,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var B,S="3.10.0",D=1,T=2,k=4,O=8,I=16,R=32,L=64,j=128,N=256,q=30,M="...",P=150,U=16,z=200,G=1,H=2,V="Expected a function",K="__lodash_placeholder__",Y="[object Arguments]",X="[object Array]",$="[object Boolean]",W="[object Date]",J="[object Error]",Q="[object Function]",Z="[object Map]",te="[object Number]",ee="[object Object]",re="[object RegExp]",ne="[object Set]",ie="[object String]",oe="[object WeakMap]",se="[object ArrayBuffer]",ae="[object Float32Array]",ue="[object Float64Array]",ce="[object Int8Array]",fe="[object Int16Array]",he="[object Int32Array]",le="[object Uint8Array]",pe="[object Uint8ClampedArray]",de="[object Uint16Array]",_e="[object Uint32Array]",ge=/\b__p \+= '';/g,ye=/\b(__p \+=) '' \+/g,ve=/(__e\(.*?\)|\b__t\)) \+\n'';/g,me=/&(?:amp|lt|gt|quot|#39|#96);/g,be=/[&<>"'`]/g,we=RegExp(me.source),Ee=RegExp(be.source),Ae=/<%-([\s\S]+?)%>/g,xe=/<%([\s\S]+?)%>/g,Fe=/<%=([\s\S]+?)%>/g,Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Be=/^\w*$/,Se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,De=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Te=RegExp(De.source),ke=/[\u0300-\u036f\ufe20-\ufe23]/g,Oe=/\\(\\)?/g,Ie=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Re=/\w*$/,Le=/^0[xX]/,je=/^\[object .+?Constructor\]$/,Ne=/^\d+$/,qe=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Me=/($^)/,Pe=/['\n\r\u2028\u2029\\]/g,Ue=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),ze=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ge=-1,He={};He[ae]=He[ue]=He[ce]=He[fe]=He[he]=He[le]=He[pe]=He[de]=He[_e]=!0,He[Y]=He[X]=He[se]=He[$]=He[W]=He[J]=He[Q]=He[Z]=He[te]=He[ee]=He[re]=He[ne]=He[ie]=He[oe]=!1;var Ve={};Ve[Y]=Ve[X]=Ve[se]=Ve[$]=Ve[W]=Ve[ae]=Ve[ue]=Ve[ce]=Ve[fe]=Ve[he]=Ve[te]=Ve[ee]=Ve[re]=Ve[ie]=Ve[le]=Ve[pe]=Ve[de]=Ve[_e]=!0,Ve[J]=Ve[Q]=Ve[Z]=Ve[ne]=Ve[oe]=!1;var Ke={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ye={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Xe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},$e={"function":!0,object:!0},We={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Je={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qe=$e[typeof e]&&e&&!e.nodeType&&e,Ze=$e[typeof t]&&t&&!t.nodeType&&t,tr=Qe&&Ze&&"object"==typeof i&&i&&i.Object&&i,er=$e[typeof self]&&self&&self.Object&&self,rr=$e[typeof window]&&window&&window.Object&&window,nr=(Ze&&Ze.exports===Qe&&Qe,tr||rr!==(this&&this.window)&&rr||er||this),ir=C();nr._=ir,n=function(){return ir}.call(e,r,e,t),!(n!==B&&(t.exports=n))}).call(this)}).call(e,r(65)(t),function(){return this}())},function(t,e,r){(function(t){function n(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t(e){return this instanceof t?(this.length=0,this.parent=void 0,"number"==typeof e?i(this,e):"string"==typeof e?o(this,e,arguments.length>1?arguments[1]:"utf8"):s(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function i(e,r){if(e=l(e,0>r?0:0|p(r)),!t.TYPED_ARRAY_SUPPORT)for(var n=0;r>n;n++)e[n]=0;return e}function o(t,e,r){("string"!=typeof r||""===r)&&(r="utf8");var n=0|_(e,r);return t=l(t,n),t.write(e,r),t}function s(e,r){if(t.isBuffer(r))return a(e,r);if(Y(r))return u(e,r);if(null==r)throw new TypeError("must start with number, buffer, array or string");return"undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer?c(e,r):r.length?f(e,r):h(e,r)}function a(t,e){var r=0|p(e.length);return t=l(t,r),e.copy(t,0,0,r),t}function u(t,e){var r=0|p(e.length);t=l(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function c(t,e){var r=0|p(e.length);t=l(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function f(t,e){var r=0|p(e.length);t=l(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function h(t,e){var r,n=0;"Buffer"===e.type&&Y(e.data)&&(r=e.data,n=0|p(r.length)),t=l(t,n);for(var i=0;n>i;i+=1)t[i]=255&r[i];return t}function l(e,r){t.TYPED_ARRAY_SUPPORT?e=t._augment(new Uint8Array(r)):(e.length=r,e._isBuffer=!0);var n=0!==r&&r<=t.poolSize>>>1;return n&&(e.parent=X),e}function p(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function d(e,r){if(!(this instanceof d))return new d(e,r);var n=new t(e,r);return delete n.parent,n}function _(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(n)return M(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if(e=0|e,r=void 0===r||1/0===r?this.length:0|r,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return x(this,e,r);case"ascii":return F(this,e,r);case"binary":return C(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[r+s]=a}return s}function v(t,e,r,n){return G(M(e,t.length-r),t,r,n)}function m(t,e,r,n){return G(P(e),t,r,n)}function b(t,e,r,n){return m(t,e,r,n)}function w(t,e,r,n){return G(z(e),t,r,n)}function E(t,e,r,n){return G(U(e,t.length-r),t,r,n)}function A(t,e,r){return V.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function x(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var o=e;r>o;o++)t[o]<=127?(n+=H(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return n+H(i)}function F(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(127&t[i]);return n}function C(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function B(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=e;r>o;o++)i+=q(t[o]);return i}function S(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function D(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function T(e,r,n,i,o,s){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(r>o||s>r)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range")}function k(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);o>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function O(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);o>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function I(t,e,r,n,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function R(t,e,r,n,i){return i||I(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,r,n,23,4),r+4}function L(t,e,r,n,i){return i||I(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,r,n,52,8),r+8}function j(t){if(t=N(t).replace(W,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function N(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function q(t){return 16>t?"0"+t.toString(16):t.toString(16)}function M(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;n>s;s++){if(r=t.charCodeAt(s),r>55295&&57344>r){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(128>r){if((e-=1)<0)break;o.push(r)}else if(2048>r){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function P(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function U(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function z(t){return V.toByteArray(j(t))}function G(t,e,r,n){for(var i=0;n>i&&!(i+r>=e.length||i>=t.length);i++)e[i+r]=t[i];return i}function H(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var V=r(73),K=r(66),Y=r(67);e.Buffer=t,e.SlowBuffer=d,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var X={};t.TYPED_ARRAY_SUPPORT=function(){function t(){}try{var e=new ArrayBuffer(0),r=new Uint8Array(e);return r.foo=function(){return 42},r.constructor=t,42===r.foo()&&r.constructor===t&&"function"==typeof r.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,r){if(!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);s>o&&e[o]===r[o];)++o;return o!==s&&(n=e[o],i=r[o]),i>n?-1:n>i?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!Y(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);if(1===e.length)return e[0];var n;if(void 0===r)for(r=0,n=0;n<e.length;n++)r+=e[n].length;var i=new t(r),o=0;for(n=0;n<e.length;n++){var s=e[n];s.copy(i,o),o+=s.length}return i},t.byteLength=_,t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):g.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,r){function n(t,e,r){for(var n=-1,i=0;r+i<t.length;i++)if(t[r+i]===e[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===e.length)return r+n}else n=-1;return-1}if(r>2147483647?r=2147483647:-2147483648>r&&(r=-2147483648),r>>=0,0===this.length)return-1;if(r>=this.length)return-1;if(0>r&&(r=Math.max(this.length+r,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,r);if(t.isBuffer(e))return n(this,e,r);
if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,r):n(this,[e],r);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=e,e=0|r,r=i}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(0>r||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return y(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":return m(this,t,e,r);case"binary":return b(this,t,e,r);case"base64":return w(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(e,r){var n=this.length;e=~~e,r=void 0===r?n:~~r,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>r?(r+=n,0>r&&(r=0)):r>n&&(r=n),e>r&&(r=e);var i;if(t.TYPED_ARRAY_SUPPORT)i=t._augment(this.subarray(e,r));else{var o=r-e;i=new t(o,void 0);for(var s=0;o>s;s++)i[s]=this[s+e]}return i.length&&(i.parent=this.parent||this),i},t.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||D(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},t.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||D(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},t.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||D(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},t.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||D(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),K.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),K.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),K.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),K.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||T(this,t,e,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},t.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||T(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},t.prototype.writeUInt8=function(e,r,n){return e=+e,r=0|r,n||T(this,e,r,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e,r+1},t.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=0|r,n||T(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e,this[r+1]=e>>>8):k(this,e,r,!0),r+2},t.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=0|r,n||T(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e):k(this,e,r,!1),r+2},t.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=0|r,n||T(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e):O(this,e,r,!0),r+4},t.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=0|r,n||T(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e):O(this,e,r,!1),r+4},t.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);T(this,t,e,r,i-1,-i)}var o=0,s=1,a=0>t?1:0;for(this[e]=255&t;++o<r&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+r},t.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);T(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+r},t.prototype.writeInt8=function(e,r,n){return e=+e,r=0|r,n||T(this,e,r,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[r]=e,r+1},t.prototype.writeInt16LE=function(e,r,n){return e=+e,r=0|r,n||T(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=e,this[r+1]=e>>>8):k(this,e,r,!0),r+2},t.prototype.writeInt16BE=function(e,r,n){return e=+e,r=0|r,n||T(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e):k(this,e,r,!1),r+2},t.prototype.writeInt32LE=function(e,r,n){return e=+e,r=0|r,n||T(this,e,r,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[r]=e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):O(this,e,r,!0),r+4},t.prototype.writeInt32BE=function(e,r,n){return e=+e,r=0|r,n||T(this,e,r,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e):O(this,e,r,!1),r+4},t.prototype.writeFloatLE=function(t,e,r){return R(this,t,e,!0,r)},t.prototype.writeFloatBE=function(t,e,r){return R(this,t,e,!1,r)},t.prototype.writeDoubleLE=function(t,e,r){return L(this,t,e,!0,r)},t.prototype.writeDoubleBE=function(t,e,r){return L(this,t,e,!1,r)},t.prototype.copy=function(e,r,n,i){if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(0>r)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o=i-n;if(1e3>o||!t.TYPED_ARRAY_SUPPORT)for(var s=0;o>s;s++)e[s+r]=this[s+n];else e._set(this.subarray(n,n+o),r);return o},t.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=M(t.toString()),o=i.length;for(n=e;r>n;n++)this[n]=i[n%o]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),r=0,n=e.length;n>r;r+=1)e[r]=this[r];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var $=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=$.get,e.set=$.set,e.write=$.write,e.toString=$.toString,e.toLocaleString=$.toString,e.toJSON=$.toJSON,e.equals=$.equals,e.compare=$.compare,e.indexOf=$.indexOf,e.copy=$.copy,e.slice=$.slice,e.readUIntLE=$.readUIntLE,e.readUIntBE=$.readUIntBE,e.readUInt8=$.readUInt8,e.readUInt16LE=$.readUInt16LE,e.readUInt16BE=$.readUInt16BE,e.readUInt32LE=$.readUInt32LE,e.readUInt32BE=$.readUInt32BE,e.readIntLE=$.readIntLE,e.readIntBE=$.readIntBE,e.readInt8=$.readInt8,e.readInt16LE=$.readInt16LE,e.readInt16BE=$.readInt16BE,e.readInt32LE=$.readInt32LE,e.readInt32BE=$.readInt32BE,e.readFloatLE=$.readFloatLE,e.readFloatBE=$.readFloatBE,e.readDoubleLE=$.readDoubleLE,e.readDoubleBE=$.readDoubleBE,e.writeUInt8=$.writeUInt8,e.writeUIntLE=$.writeUIntLE,e.writeUIntBE=$.writeUIntBE,e.writeUInt16LE=$.writeUInt16LE,e.writeUInt16BE=$.writeUInt16BE,e.writeUInt32LE=$.writeUInt32LE,e.writeUInt32BE=$.writeUInt32BE,e.writeIntLE=$.writeIntLE,e.writeIntBE=$.writeIntBE,e.writeInt8=$.writeInt8,e.writeInt16LE=$.writeInt16LE,e.writeInt16BE=$.writeInt16BE,e.writeInt32LE=$.writeInt32LE,e.writeInt32BE=$.writeInt32BE,e.writeFloatLE=$.writeFloatLE,e.writeFloatBE=$.writeFloatBE,e.writeDoubleLE=$.writeDoubleLE,e.writeDoubleBE=$.writeDoubleBE,e.fill=$.fill,e.inspect=$.inspect,e.toArrayBuffer=$.toArrayBuffer,e};var W=/[^+\/0-9A-z\-]/g}).call(e,r(43).Buffer)},function(t,e,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&c(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return u(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function f(t){return null===t}function h(t){return null==t}var l=r(64);e.parse=i,e.resolve=s,e.resolveObject=a,e.format=o,e.Url=n;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,_=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(_),y=["'"].concat(g),v=["%","/","?",";","#"].concat(y),m=["/","?","#"],b=255,w=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,A={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},F={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=r(68);n.prototype.parse=function(t,e,r){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var i=p.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===n.substr(0,2);!s||i&&x[i]||(n=n.substr(2),this.slashes=!0)}if(!x[i]&&(s||i&&!F[i])){for(var a=-1,c=0;c<m.length;c++){var f=n.indexOf(m[c]);-1!==f&&(-1===a||a>f)&&(a=f)}var h,d;d=-1===a?n.lastIndexOf("@"):n.lastIndexOf("@",a),-1!==d&&(h=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(h)),a=-1;for(var c=0;c<v.length;c++){var f=n.indexOf(v[c]);-1!==f&&(-1===a||a>f)&&(a=f)}-1===a&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var _="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!_)for(var g=this.hostname.split(/\./),c=0,B=g.length;B>c;c++){var S=g[c];if(S&&!S.match(w)){for(var D="",T=0,k=S.length;k>T;T++)D+=S.charCodeAt(T)>127?"x":S[T];if(!D.match(w)){var O=g.slice(0,c),I=g.slice(c+1),R=S.match(E);R&&(O.push(R[1]),I.unshift(R[2])),I.length&&(n="/"+I.join(".")+n),this.hostname=O.join(".");break}}}if(this.hostname=this.hostname.length>b?"":this.hostname.toLowerCase(),!_){for(var L=this.hostname.split("."),j=[],c=0;c<L.length;++c){var N=L[c];j.push(N.match(/[^A-Za-z0-9_-]/)?"xn--"+l.encode(N):N)}this.hostname=j.join(".")}var q=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+q,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!A[o])for(var c=0,B=y.length;B>c;c++){var P=y[c],U=encodeURIComponent(P);U===P&&(U=escape(P)),n=n.split(P).join(U)}var z=n.indexOf("#");-1!==z&&(this.hash=n.substr(z),n=n.slice(0,z));var G=n.indexOf("?");if(-1!==G?(this.search=n.substr(G),this.query=n.substr(G+1),e&&(this.query=C.parse(this.query)),n=n.slice(0,G)):e&&(this.search="",this.query={}),n&&(this.pathname=n),F[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",N=this.search||"";this.path=q+N}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=C.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||F[e])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+r+s+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(u(t)){var e=new n;e.parse(t,!1,!0),t=e}var r=new n;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),F[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!F[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||x[t.protocol])r.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var o=r.pathname||"",s=r.search||"";r.path=o+s}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),l=c||a||r.host&&t.pathname,p=l,d=r.pathname&&r.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],_=r.protocol&&!F[r.protocol];if(_&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),l=l&&(""===i[0]||""===d[0])),c)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),r.search=t.search,r.query=t.query;else if(!h(t.search)){if(_){r.hostname=r.host=d.shift();var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return r.search=t.search,r.query=t.query,f(r.pathname)&&f(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var y=d.slice(-1)[0],v=(r.host||t.host)&&("."===y||".."===y)||""===y,m=0,b=d.length;b>=0;b--)y=d[b],"."==y?d.splice(b,1):".."===y?(d.splice(b,1),m++):m&&(d.splice(b,1),m--);if(!l&&!p)for(;m--;m)d.unshift("..");!l||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),v&&"/"!==d.join("/").substr(-1)&&d.push("");var w=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(_){r.hostname=r.host=w?"":d.length?d.shift():"";var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return l=l||r.host&&d.length,l&&!w&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),f(r.pathname)&&f(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t){t.exports=function(t){var e=t.sjcl,r=function(){var t={ripple:"rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz",bitcoin:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"},n=function(t){return e.codec.bytes.fromBits(e.hash.sha256.hash(e.codec.bytes.toBits(t)))};return{encode_base:function(r,n){for(var i=t[n||"ripple"],o=new e.bn(i.length),s=e.bn.fromBits(e.codec.bytes.toBits(r)),a=[];s.greaterEquals(o);){var u=s.mod(o);a.push(i[u.limbs[0]]),s=s.div(o)}a.push(i[s.limbs[0]]);for(var c=0;c!=r.length&&!r[c];c+=1)a.push(i[0]);return a.reverse().join("")},decode_base:function(r,n){for(var i,o=t[n||"ripple"],s=new e.bn(o.length),a=new e.bn(0);i!=r.length&&r[i]===o[0];)i+=1;for(i=0;i!=r.length;i+=1){var u=o.indexOf(r[i]);if(0>u)return null;a=a.mul(s).addM(u)}for(var c=e.codec.bytes.fromBits(a.toBits()).reverse();0===c[c.length-1];)c.pop();for(i=0;r[i]===o[0];i++)c.push(0);return c.reverse(),c},encode_base_check:function(t,e,i){var o=[].concat(t,e),s=n(n(o)).slice(0,4);return r.encode_base([].concat(o,s),i)},decode_base_check:function(t,e,i){var o=r.decode_base(e,i);if(!o||o[0]!==t||o.length<5)return 0/0;var s,a=n(n(o.slice(0,-4))).slice(0,4),u=o.slice(-4);for(s=0;4!=s;s+=1)if(a[s]!==u[s])return 0/0;return o.slice(1,-4)}}}();return r}},function(t,e,r){t.exports=function(e){function n(t){this.value=t}var i=e.sjcl,o=r(45)({sjcl:i});return n.fromBytes=function(t){return new n(o.encode_base_check(33,t))},n.getRandom=function(){if("object"==typeof window&&window.crypto){var e=new Uint32Array(32);window.crypto.getRandomValues(e),i.random.addEntropy(e,1024,"crypto.getRandomValues")}else{if("object"!=typeof t||!t.exports)throw new Error("No secure source of entropy available");var e=r(70).randomBytes(128);e=new Uint32Array(new Uint8Array(e).buffer),i.random.addEntropy(e,1024,"crypto.randomBytes")}var o=6,s=i.random.randomWords(4,o),a=i.codec.bytes.fromBits(s);return n.fromBytes(a)},n}},function(t,e,r){t.exports=function(t){function e(t){return i.hash.ripemd160.hash(i.hash.sha256.hash(t))}function n(t){this.value=t}var i=t.sjcl,o=r(45)({sjcl:i});return n.fromPublicKey=function(t){var r=i.codec.bytes.fromBits(e(i.codec.bytes.toBits(t.toBytesCompressed())));return new this(o.encode_base_check(0,r))},n}},function(t){t.exports=function(t){function e(t){if(!(t instanceof r.ecc.point))throw new Error("eccPoint must be a sjcl.ecc.point");this.value=t}var r=t.sjcl;return e.fromPrivateGenerator=function(t){return new this(r.ecc.curves.c256.G.mult(t))},e.prototype={toString:function(){return this.value.toString()}},e}},function(t,e,r){var n;!function(i){"use strict";function o(t){function e(t,n){var i,o,s,a,u,c,f=this;if(!(f instanceof e))return H&&O(26,"constructor call without new",t),new e(t,n);if(null!=n&&V(n,2,64,L,"base")){if(n=0|n,c=t+"",10==n)return f=new e(t instanceof e?t:c),I(f,q+f.e+1,M);if((a="number"==typeof t)&&0*t!=0||!new RegExp("^-?"+(i="["+x.slice(0,n)+"]+")+"(?:\\."+i+")?$",37>n?"i":"").test(c))return y(f,c,a,n);a?(f.s=0>1/t?(c=c.slice(1),-1):1,H&&c.replace(/^0\.0*|\./,"").length>15&&O(L,A,t),a=!1):f.s=45===c.charCodeAt(0)?(c=c.slice(1),-1):1,c=r(c,10,n,f.s)}else{if(t instanceof e)return f.s=t.s,f.e=t.e,f.c=(t=t.c)?t.slice():t,void(L=0);if((a="number"==typeof t)&&0*t==0){if(f.s=0>1/t?(t=-t,-1):1,t===~~t){for(o=0,s=t;s>=10;s/=10,o++);return f.e=o,f.c=[t],void(L=0)}c=t+""}else{if(!v.test(c=t+""))return y(f,c,a);f.s=45===c.charCodeAt(0)?(c=c.slice(1),-1):1}}for((o=c.indexOf("."))>-1&&(c=c.replace(".","")),(s=c.search(/e/i))>0?(0>o&&(o=s),o+=+c.slice(s+1),c=c.substring(0,s)):0>o&&(o=c.length),s=0;48===c.charCodeAt(s);s++);for(u=c.length;48===c.charCodeAt(--u););if(c=c.slice(s,u+1))if(u=c.length,a&&H&&u>15&&O(L,A,f.s*t),o=o-s-1,o>G)f.c=f.e=null;else if(z>o)f.c=[f.e=0];else{if(f.e=o,f.c=[],s=(o+1)%C,0>o&&(s+=C),u>s){for(s&&f.c.push(+c.slice(0,s)),u-=C;u>s;)f.c.push(+c.slice(s,s+=C));c=c.slice(s),s=C-c.length}else s-=u;for(;s--;c+="0");f.c.push(+c)}else f.c=[f.e=0];L=0}function r(t,r,n,i){var o,s,u,c,f,l,d,_=t.indexOf("."),g=q,y=M;for(37>n&&(t=t.toLowerCase()),_>=0&&(u=X,X=0,t=t.replace(".",""),d=new e(n),f=d.pow(t.length-_),X=u,d.c=h(p(a(f.c),f.e),10,r),d.e=d.c.length),l=h(t,n,r),s=u=l.length;0==l[--u];l.pop());if(!l[0])return"0";if(0>_?--s:(f.c=l,f.e=s,f.s=i,f=R(f,d,g,y,r),l=f.c,c=f.r,s=f.e),o=s+g+1,_=l[o],u=r/2,c=c||0>o||null!=l[o+1],c=4>y?(null!=_||c)&&(0==y||y==(f.s<0?3:2)):_>u||_==u&&(4==y||c||6==y&&1&l[o-1]||y==(f.s<0?8:7)),1>o||!l[0])t=c?p("1",-g):"0";else{if(l.length=o,c)for(--r;++l[--o]>r;)l[o]=0,o||(++s,l.unshift(1));for(u=l.length;!l[--u];);for(_=0,t="";u>=_;t+=x.charAt(l[_++]));t=p(t,s)}return t}function n(t,r,n,i){var o,s,u,c,f;if(n=null!=n&&V(n,0,8,i,E)?0|n:M,!t.c)return t.toString();if(o=t.c[0],u=t.e,null==r)f=a(t.c),f=19==i||24==i&&P>=u?l(f,u):p(f,u);else if(t=I(new e(t),r,n),s=t.e,f=a(t.c),c=f.length,19==i||24==i&&(s>=r||P>=s)){for(;r>c;f+="0",c++);f=l(f,s)}else if(r-=u,f=p(f,s),s+1>c){if(--r>0)for(f+=".";r--;f+="0");}else if(r+=s-c,r>0)for(s+1==c&&(f+=".");r--;f+="0");return t.s<0&&o?"-"+f:f}function i(t,r){var n,i,o=0;for(f(t[0])&&(t=t[0]),n=new e(t[0]);++o<t.length;){if(i=new e(t[o]),!i.s){n=i;break}r.call(n,i)&&(n=i)}return n}function _(t,e,r,n,i){return(e>t||t>r||t!=d(t))&&O(n,(i||"decimal places")+(e>t||t>r?" out of range":" not an integer"),t),!0}function k(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*C-1)>G?t.c=t.e=null:z>r?t.c=[t.e=0]:(t.e=r,t.c=e),t}function O(t,e,r){var n=new Error(["new BigNumber","cmp","config","div","divToInt","eq","gt","gte","lt","lte","minus","mod","plus","precision","random","round","shift","times","toDigits","toExponential","toFixed","toFormat","toFraction","pow","toPrecision","toString","BigNumber"][t]+"() "+e+": "+r);throw n.name="BigNumber Error",L=0,n}function I(t,e,r,n){var i,o,s,a,u,c,f,h=t.c,l=S;if(h){t:{for(i=1,a=h[0];a>=10;a/=10,i++);if(o=e-i,0>o)o+=C,s=e,u=h[c=0],f=u/l[i-s-1]%10|0;else if(c=m((o+1)/C),c>=h.length){if(!n)break t;for(;h.length<=c;h.push(0));u=f=0,i=1,o%=C,s=o-C+1}else{for(u=a=h[c],i=1;a>=10;a/=10,i++);o%=C,s=o-C+i,f=0>s?0:u/l[i-s-1]%10|0}if(n=n||0>e||null!=h[c+1]||(0>s?u:u%l[i-s-1]),n=4>r?(f||n)&&(0==r||r==(t.s<0?3:2)):f>5||5==f&&(4==r||n||6==r&&(o>0?s>0?u/l[i-s]:0:h[c-1])%10&1||r==(t.s<0?8:7)),1>e||!h[0])return h.length=0,n?(e-=t.e+1,h[0]=l[e%C],t.e=-e||0):h[0]=t.e=0,t;if(0==o?(h.length=c,a=1,c--):(h.length=c+1,a=l[C-o],h[c]=s>0?b(u/l[i-s]%l[s])*a:0),n)for(;;){if(0==c){for(o=1,s=h[0];s>=10;s/=10,o++);for(s=h[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(t.e++,h[0]==F&&(h[0]=1));break}if(h[c]+=a,h[c]!=F)break;h[c--]=0,a=1}for(o=h.length;0===h[--o];h.pop());}t.e>G?t.c=t.e=null:t.e<z&&(t.c=[t.e=0])}return t}var R,L=0,j=e.prototype,N=new e(1),q=20,M=4,P=-7,U=21,z=-1e7,G=1e7,H=!0,V=_,K=!1,Y=1,X=100,$={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0};return e.another=o,e.ROUND_UP=0,e.ROUND_DOWN=1,e.ROUND_CEIL=2,e.ROUND_FLOOR=3,e.ROUND_HALF_UP=4,e.ROUND_HALF_DOWN=5,e.ROUND_HALF_EVEN=6,e.ROUND_HALF_CEIL=7,e.ROUND_HALF_FLOOR=8,e.EUCLID=9,e.config=function(){var t,e,r=0,n={},i=arguments,o=i[0],s=o&&"object"==typeof o?function(){return o.hasOwnProperty(e)?null!=(t=o[e]):void 0}:function(){return i.length>r?null!=(t=i[r++]):void 0};return s(e="DECIMAL_PLACES")&&V(t,0,T,2,e)&&(q=0|t),n[e]=q,s(e="ROUNDING_MODE")&&V(t,0,8,2,e)&&(M=0|t),n[e]=M,s(e="EXPONENTIAL_AT")&&(f(t)?V(t[0],-T,0,2,e)&&V(t[1],0,T,2,e)&&(P=0|t[0],U=0|t[1]):V(t,-T,T,2,e)&&(P=-(U=0|(0>t?-t:t)))),n[e]=[P,U],s(e="RANGE")&&(f(t)?V(t[0],-T,-1,2,e)&&V(t[1],1,T,2,e)&&(z=0|t[0],G=0|t[1]):V(t,-T,T,2,e)&&(0|t?z=-(G=0|(0>t?-t:t)):H&&O(2,e+" cannot be zero",t))),n[e]=[z,G],s(e="ERRORS")&&(t===!!t||1===t||0===t?(L=0,V=(H=!!t)?_:c):H&&O(2,e+w,t)),n[e]=H,s(e="CRYPTO")&&(t===!!t||1===t||0===t?(K=!(!t||!g||"object"!=typeof g),t&&!K&&H&&O(2,"crypto unavailable",g)):H&&O(2,e+w,t)),n[e]=K,s(e="MODULO_MODE")&&V(t,0,9,2,e)&&(Y=0|t),n[e]=Y,s(e="POW_PRECISION")&&V(t,0,T,2,e)&&(X=0|t),n[e]=X,s(e="FORMAT")&&("object"==typeof t?$=t:H&&O(2,e+" not an object",t)),n[e]=$,n},e.max=function(){return i(arguments,j.lt)},e.min=function(){return i(arguments,j.gt)},e.random=function(){var t=9007199254740992,r=Math.random()*t&2097151?function(){return b(Math.random()*t)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(t){var n,i,o,s,a,u=0,c=[],f=new e(N);if(t=null!=t&&V(t,0,T,14)?0|t:q,s=m(t/C),K)if(g&&g.getRandomValues){for(n=g.getRandomValues(new Uint32Array(s*=2));s>u;)a=131072*n[u]+(n[u+1]>>>11),a>=9e15?(i=g.getRandomValues(new Uint32Array(2)),n[u]=i[0],n[u+1]=i[1]):(c.push(a%1e14),u+=2);u=s/2}else if(g&&g.randomBytes){for(n=g.randomBytes(s*=7);s>u;)a=281474976710656*(31&n[u])+1099511627776*n[u+1]+4294967296*n[u+2]+16777216*n[u+3]+(n[u+4]<<16)+(n[u+5]<<8)+n[u+6],a>=9e15?g.randomBytes(7).copy(n,u):(c.push(a%1e14),u+=7);u=s/7}else H&&O(14,"crypto unavailable",g);if(!u)for(;s>u;)a=r(),9e15>a&&(c[u++]=a%1e14);for(s=c[--u],t%=C,s&&t&&(a=S[C-t],c[u]=b(s/a)*a);0===c[u];c.pop(),u--);if(0>u)c=[o=0];else{for(o=-1;0===c[0];c.shift(),o-=C);for(u=1,a=c[0];a>=10;a/=10,u++);C>u&&(o-=C-u)}return f.e=o,f.c=c,f}}(),R=function(){function t(t,e,r){var n,i,o,s,a=0,u=t.length,c=e%D,f=e/D|0;for(t=t.slice();u--;)o=t[u]%D,s=t[u]/D|0,n=f*o+s*c,i=c*o+n%D*D+a,a=(i/r|0)+(n/D|0)+f*s,t[u]=i%r;return a&&t.unshift(a),t}function r(t,e,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;r>i;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.shift());}return function(i,o,a,u,c){var f,h,l,p,d,_,g,y,v,m,w,E,A,x,B,S,D,T=i.s==o.s?1:-1,k=i.c,O=o.c;if(!(k&&k[0]&&O&&O[0]))return new e(i.s&&o.s&&(k?!O||k[0]!=O[0]:O)?k&&0==k[0]||!O?0*T:T/0:0/0);for(y=new e(T),v=y.c=[],h=i.e-o.e,T=a+h+1,c||(c=F,h=s(i.e/C)-s(o.e/C),T=T/C|0),l=0;O[l]==(k[l]||0);l++);if(O[l]>(k[l]||0)&&h--,0>T)v.push(1),p=!0;else{for(x=k.length,S=O.length,l=0,T+=2,d=b(c/(O[0]+1)),d>1&&(O=t(O,d,c),k=t(k,d,c),S=O.length,x=k.length),A=S,m=k.slice(0,S),w=m.length;S>w;m[w++]=0);D=O.slice(),D.unshift(0),B=O[0],O[1]>=c/2&&B++;do{if(d=0,f=r(O,m,S,w),0>f){if(E=m[0],S!=w&&(E=E*c+(m[1]||0)),d=b(E/B),d>1)for(d>=c&&(d=c-1),_=t(O,d,c),g=_.length,w=m.length;1==r(_,m,g,w);)d--,n(_,g>S?D:O,g,c),g=_.length,f=1;else 0==d&&(f=d=1),_=O.slice(),g=_.length;if(w>g&&_.unshift(0),n(m,_,w,c),w=m.length,-1==f)for(;r(O,m,S,w)<1;)d++,n(m,w>S?D:O,w,c),w=m.length}else 0===f&&(d++,m=[0]);v[l++]=d,m[0]?m[w++]=k[A]||0:(m=[k[A]],w=1)}while((A++<x||null!=m[0])&&T--);p=null!=m[0],v[0]||v.shift()}if(c==F){for(l=1,T=v[0];T>=10;T/=10,l++);I(y,a+(y.e=l+h*C-1)+1,u,p)}else y.e=h,y.r=+p;return y}}(),y=function(){var t=/^(-?)0([xbo])(?=\w[\w.]*$)/i,r=/^([^.]+)\.$/,n=/^\.([^.]+)$/,i=/^-?(Infinity|NaN)$/,o=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,a,u,c){var f,h=u?a:a.replace(o,"");if(i.test(h))s.s=isNaN(h)?null:0>h?-1:1;else{if(!u&&(h=h.replace(t,function(t,e,r){return f="x"==(r=r.toLowerCase())?16:"b"==r?2:8,c&&c!=f?t:e}),c&&(f=c,h=h.replace(r,"$1").replace(n,"0.$1")),a!=h))return new e(h,f);H&&O(L,"not a"+(c?" base "+c:"")+" number",a),s.s=null}s.c=s.e=null,L=0}}(),j.absoluteValue=j.abs=function(){var t=new e(this);return t.s<0&&(t.s=1),t},j.ceil=function(){return I(new e(this),this.e+1,2)},j.comparedTo=j.cmp=function(t,r){return L=1,u(this,new e(t,r))},j.decimalPlaces=j.dp=function(){var t,e,r=this.c;if(!r)return null;if(t=((e=r.length-1)-s(this.e/C))*C,e=r[e])for(;e%10==0;e/=10,t--);return 0>t&&(t=0),t},j.dividedBy=j.div=function(t,r){return L=3,R(this,new e(t,r),q,M)},j.dividedToIntegerBy=j.divToInt=function(t,r){return L=4,R(this,new e(t,r),0,1)},j.equals=j.eq=function(t,r){return L=5,0===u(this,new e(t,r))},j.floor=function(){return I(new e(this),this.e+1,3)},j.greaterThan=j.gt=function(t,r){return L=6,u(this,new e(t,r))>0},j.greaterThanOrEqualTo=j.gte=function(t,r){return L=7,1===(r=u(this,new e(t,r)))||0===r},j.isFinite=function(){return!!this.c},j.isInteger=j.isInt=function(){return!!this.c&&s(this.e/C)>this.c.length-2},j.isNaN=function(){return!this.s},j.isNegative=j.isNeg=function(){return this.s<0},j.isZero=function(){return!!this.c&&0==this.c[0]},j.lessThan=j.lt=function(t,r){return L=8,u(this,new e(t,r))<0},j.lessThanOrEqualTo=j.lte=function(t,r){return L=9,-1===(r=u(this,new e(t,r)))||0===r},j.minus=j.sub=function(t,r){var n,i,o,a,u=this,c=u.s;if(L=10,t=new e(t,r),r=t.s,!c||!r)return new e(0/0);if(c!=r)return t.s=-r,u.plus(t);var f=u.e/C,h=t.e/C,l=u.c,p=t.c;if(!f||!h){if(!l||!p)return l?(t.s=-r,t):new e(p?u:0/0);if(!l[0]||!p[0])return p[0]?(t.s=-r,t):new e(l[0]?u:3==M?-0:0)}if(f=s(f),h=s(h),l=l.slice(),c=f-h){for((a=0>c)?(c=-c,o=l):(h=f,o=p),o.reverse(),r=c;r--;o.push(0));o.reverse()}else for(i=(a=(c=l.length)<(r=p.length))?c:r,c=r=0;i>r;r++)if(l[r]!=p[r]){a=l[r]<p[r];break}if(a&&(o=l,l=p,p=o,t.s=-t.s),r=(i=p.length)-(n=l.length),r>0)for(;r--;l[n++]=0);for(r=F-1;i>c;){if(l[--i]<p[i]){for(n=i;n&&!l[--n];l[n]=r);--l[n],l[i]+=F}l[i]-=p[i]}for(;0==l[0];l.shift(),--h);return l[0]?k(t,l,h):(t.s=3==M?-1:1,t.c=[t.e=0],t)},j.modulo=j.mod=function(t,r){var n,i,o=this;return L=11,t=new e(t,r),!o.c||!t.s||t.c&&!t.c[0]?new e(0/0):!t.c||o.c&&!o.c[0]?new e(o):(9==Y?(i=t.s,t.s=1,n=R(o,t,0,3),t.s=i,n.s*=i):n=R(o,t,0,Y),o.minus(n.times(t)))},j.negated=j.neg=function(){var t=new e(this);return t.s=-t.s||null,t},j.plus=j.add=function(t,r){var n,i=this,o=i.s;if(L=12,t=new e(t,r),r=t.s,!o||!r)return new e(0/0);if(o!=r)return t.s=-r,i.minus(t);var a=i.e/C,u=t.e/C,c=i.c,f=t.c;if(!a||!u){if(!c||!f)return new e(o/0);if(!c[0]||!f[0])return f[0]?t:new e(c[0]?i:0*o)}if(a=s(a),u=s(u),c=c.slice(),o=a-u){for(o>0?(u=a,n=f):(o=-o,n=c),n.reverse();o--;n.push(0));n.reverse()}for(o=c.length,r=f.length,0>o-r&&(n=f,f=c,c=n,r=o),o=0;r;)o=(c[--r]=c[r]+f[r]+o)/F|0,c[r]%=F;return o&&(c.unshift(o),++u),k(t,c,u)},j.precision=j.sd=function(t){var e,r,n=this,i=n.c;if(null!=t&&t!==!!t&&1!==t&&0!==t&&(H&&O(13,"argument"+w,t),t!=!!t&&(t=null)),!i)return null;if(r=i.length-1,e=r*C+1,r=i[r]){for(;r%10==0;r/=10,e--);for(r=i[0];r>=10;r/=10,e++);}return t&&n.e+1>e&&(e=n.e+1),e},j.round=function(t,r){var n=new e(this);return(null==t||V(t,0,T,15))&&I(n,~~t+this.e+1,null!=r&&V(r,0,8,15,E)?0|r:M),n},j.shift=function(t){var r=this;return V(t,-B,B,16,"argument")?r.times("1e"+d(t)):new e(r.c&&r.c[0]&&(-B>t||t>B)?r.s*(0>t?0:1/0):r)},j.squareRoot=j.sqrt=function(){var t,r,n,i,o,u=this,c=u.c,f=u.s,h=u.e,l=q+4,p=new e("0.5");if(1!==f||!c||!c[0])return new e(!f||0>f&&(!c||c[0])?0/0:c?u:1/0);if(f=Math.sqrt(+u),0==f||f==1/0?(r=a(c),(r.length+h)%2==0&&(r+="0"),f=Math.sqrt(r),h=s((h+1)/2)-(0>h||h%2),f==1/0?r="1e"+h:(r=f.toExponential(),r=r.slice(0,r.indexOf("e")+1)+h),n=new e(r)):n=new e(f+""),n.c[0])for(h=n.e,f=h+l,3>f&&(f=0);;)if(o=n,n=p.times(o.plus(R(u,o,l,1))),a(o.c).slice(0,f)===(r=a(n.c)).slice(0,f)){if(n.e<h&&--f,r=r.slice(f-3,f+1),"9999"!=r&&(i||"4999"!=r)){(!+r||!+r.slice(1)&&"5"==r.charAt(0))&&(I(n,n.e+q+2,1),t=!n.times(n).eq(u));break}if(!i&&(I(o,o.e+q+2,0),o.times(o).eq(u))){n=o;break}l+=4,f+=4,i=1}return I(n,n.e+q+1,M,t)},j.times=j.mul=function(t,r){var n,i,o,a,u,c,f,h,l,p,d,_,g,y,v,m=this,b=m.c,w=(L=17,t=new e(t,r)).c;if(!(b&&w&&b[0]&&w[0]))return!m.s||!t.s||b&&!b[0]&&!w||w&&!w[0]&&!b?t.c=t.e=t.s=null:(t.s*=m.s,b&&w?(t.c=[0],t.e=0):t.c=t.e=null),t;for(i=s(m.e/C)+s(t.e/C),t.s*=m.s,f=b.length,p=w.length,p>f&&(g=b,b=w,w=g,o=f,f=p,p=o),o=f+p,g=[];o--;g.push(0));for(y=F,v=D,o=p;--o>=0;){for(n=0,d=w[o]%v,_=w[o]/v|0,u=f,a=o+u;a>o;)h=b[--u]%v,l=b[u]/v|0,c=_*h+l*d,h=d*h+c%v*v+g[a]+n,n=(h/y|0)+(c/v|0)+_*l,g[a--]=h%y;g[a]=n}return n?++i:g.shift(),k(t,g,i)},j.toDigits=function(t,r){var n=new e(this);return t=null!=t&&V(t,1,T,18,"precision")?0|t:null,r=null!=r&&V(r,0,8,18,E)?0|r:M,t?I(n,t,r):n
},j.toExponential=function(t,e){return n(this,null!=t&&V(t,0,T,19)?~~t+1:null,e,19)},j.toFixed=function(t,e){return n(this,null!=t&&V(t,0,T,20)?~~t+this.e+1:null,e,20)},j.toFormat=function(t,e){var r=n(this,null!=t&&V(t,0,T,21)?~~t+this.e+1:null,e,21);if(this.c){var i,o=r.split("."),s=+$.groupSize,a=+$.secondaryGroupSize,u=$.groupSeparator,c=o[0],f=o[1],h=this.s<0,l=h?c.slice(1):c,p=l.length;if(a&&(i=s,s=a,a=i,p-=i),s>0&&p>0){for(i=p%s||s,c=l.substr(0,i);p>i;i+=s)c+=u+l.substr(i,s);a>0&&(c+=u+l.slice(i)),h&&(c="-"+c)}r=f?c+$.decimalSeparator+((a=+$.fractionGroupSize)?f.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+$.fractionGroupSeparator):f):c}return r},j.toFraction=function(t){var r,n,i,o,s,u,c,f,h,l=H,p=this,d=p.c,_=new e(N),g=n=new e(N),y=c=new e(N);if(null!=t&&(H=!1,u=new e(t),H=l,(!(l=u.isInt())||u.lt(N))&&(H&&O(22,"max denominator "+(l?"out of range":"not an integer"),t),t=!l&&u.c&&I(u,u.e+1,1).gte(N)?u:null)),!d)return p.toString();for(h=a(d),o=_.e=h.length-p.e-1,_.c[0]=S[(s=o%C)<0?C+s:s],t=!t||u.cmp(_)>0?o>0?_:g:u,s=G,G=1/0,u=new e(h),c.c[0]=0;f=R(u,_,0,1),i=n.plus(f.times(y)),1!=i.cmp(t);)n=y,y=i,g=c.plus(f.times(i=g)),c=i,_=u.minus(f.times(i=_)),u=i;return i=R(t.minus(n),y,0,1),c=c.plus(i.times(g)),n=n.plus(i.times(y)),c.s=g.s=p.s,o*=2,r=R(g,y,o,M).minus(p).abs().cmp(R(c,n,o,M).minus(p).abs())<1?[g.toString(),y.toString()]:[c.toString(),n.toString()],G=s,r},j.toNumber=function(){var t=this;return+t||(t.s?0*t.s:0/0)},j.toPower=j.pow=function(t){var r,n,i=b(0>t?-t:+t),o=this;if(!V(t,-B,B,23,"exponent")&&(!isFinite(t)||i>B&&(t/=0)||parseFloat(t)!=t&&!(t=0/0)))return new e(Math.pow(+o,t));for(r=X?m(X/C+2):0,n=new e(N);;){if(i%2){if(n=n.times(o),!n.c)break;r&&n.c.length>r&&(n.c.length=r)}if(i=b(i/2),!i)break;o=o.times(o),r&&o.c&&o.c.length>r&&(o.c.length=r)}return 0>t&&(n=N.div(n)),r?I(n,X,M):n},j.toPrecision=function(t,e){return n(this,null!=t&&V(t,1,T,24,"precision")?0|t:null,e,24)},j.toString=function(t){var e,n=this,i=n.s,o=n.e;return null===o?i?(e="Infinity",0>i&&(e="-"+e)):e="NaN":(e=a(n.c),e=null!=t&&V(t,2,64,25,"base")?r(p(e,o),0|t,10,i):P>=o||o>=U?l(e,o):p(e,o),0>i&&n.c[0]&&(e="-"+e)),e},j.truncated=j.trunc=function(){return I(new e(this),this.e+1,1)},j.valueOf=j.toJSON=function(){return this.toString()},null!=t&&e.config(t),e}function s(t){var e=0|t;return t>0||t===e?e:e-1}function a(t){for(var e,r,n=1,i=t.length,o=t[0]+"";i>n;){for(e=t[n++]+"",r=C-e.length;r--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function u(t,e){var r,n,i=t.c,o=e.c,s=t.s,a=e.s,u=t.e,c=e.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=0>s,n=u==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=i.length)<(c=o.length)?u:c,s=0;a>s;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function c(t,e,r){return(t=d(t))>=e&&r>=t}function f(t){return"[object Array]"==Object.prototype.toString.call(t)}function h(t,e,r){for(var n,i,o=[0],s=0,a=t.length;a>s;){for(i=o.length;i--;o[i]*=e);for(o[n=0]+=x.indexOf(t.charAt(s++));n<o.length;n++)o[n]>r-1&&(null==o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/r|0,o[n]%=r)}return o.reverse()}function l(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(0>e?"e":"e+")+e}function p(t,e){var r,n;if(0>e){for(n="0.";++e;n+="0");t=n+t}else if(r=t.length,++e>r){for(n="0",e-=r;--e;n+="0");t+=n}else r>e&&(t=t.slice(0,e)+"."+t.slice(e));return t}function d(t){return t=parseFloat(t),0>t?m(t):b(t)}var _,g,y,v=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=Math.ceil,b=Math.floor,w=" not a boolean or binary digit",E="rounding mode",A="number type has more than 15 significant digits",x="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",F=1e14,C=14,B=9007199254740991,S=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],D=1e7,T=1e9;_=o(),n=function(){return _}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)},function(t){!function(){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r(){return 1}function n(t){return this instanceof n?("number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=t.length||r,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=r),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,void this.reset()):new n(t)}function i(t,e,r){var n=t._cache[e];return n&&(t._maxAge&&Date.now()-n.now>t._maxAge?(u(t,n),t._allowStale||(n=void 0)):r&&o(t,n),n&&(n=n.value)),n}function o(t,e){a(t,e),e.lu=t._mru++,t._maxAge&&(e.now=Date.now()),t._lruList[e.lu]=e}function s(t){for(;t._lru<t._mru&&t._length>t._max;)u(t,t._lruList[t._lru])}function a(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function u(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],a(t,e))}function c(t,e,r,n,i){this.key=t,this.value=e,this.lu=r,this.length=n,this.now=i}"object"==typeof t&&t.exports?t.exports=n:this.LRUCache=n,Object.defineProperty(n.prototype,"max",{set:function(t){(!t||"number"!=typeof t||0>=t)&&(t=1/0),this._max=t,this._length>this._max&&s(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(n.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t){this._lengthCalculator=r,this._length=this._itemCount;for(var e in this._cache)this._cache[e].length=1}else{this._lengthCalculator=t,this._length=0;for(var e in this._cache)this._cache[e].length=this._lengthCalculator(this._cache[e].value),this._length+=this._cache[e].length}this._length>this._max&&s(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(n.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),n.prototype.forEach=function(t,e){e=e||this;for(var r=0,n=this._mru-1;n>=0&&r<this._itemCount;n--)if(this._lruList[n]){r++;var i=this._lruList[n];this._maxAge&&Date.now()-i.now>this._maxAge&&(u(this,i),this._allowStale||(i=void 0)),i&&t.call(e,i.value,i.key,this)}},n.prototype.keys=function(){for(var t=new Array(this._itemCount),e=0,r=this._mru-1;r>=0&&e<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];t[e++]=n.key}return t},n.prototype.values=function(){for(var t=new Array(this._itemCount),e=0,r=this._mru-1;r>=0&&e<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];t[e++]=n.value}return t},n.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},n.prototype.dump=function(){return this._cache},n.prototype.dumpLru=function(){return this._lruList},n.prototype.set=function(t,r){if(e(this._cache,t))return this._dispose&&this._dispose(t,this._cache[t].value),this._maxAge&&(this._cache[t].now=Date.now()),this._cache[t].value=r,this.get(t),!0;var n=this._lengthCalculator(r),i=this._maxAge?Date.now():0,o=new c(t,r,this._mru++,n,i);return o.length>this._max?(this._dispose&&this._dispose(t,r),!1):(this._length+=o.length,this._lruList[o.lu]=this._cache[t]=o,this._itemCount++,this._length>this._max&&s(this),!0)},n.prototype.has=function(t){if(!e(this._cache,t))return!1;var r=this._cache[t];return this._maxAge&&Date.now()-r.now>this._maxAge?!1:!0},n.prototype.get=function(t){return i(this,t,!0)},n.prototype.peek=function(t){return i(this,t,!1)},n.prototype.pop=function(){var t=this._lruList[this._lru];return u(this,t),t||null},n.prototype.del=function(t){u(this,this._cache[t])}}()},function(t,e,r){var n,i;(function(r,o){!function(){function s(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(a,arguments)}}var a,u,c={};a=this,null!=a&&(u=a.async),c.noConflict=function(){return a.async=u,c};var f=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===f.call(t)},l=function(t,e){for(var r=0;r<t.length;r+=1)e(t[r],r,t)},p=function(t,e){if(t.map)return t.map(e);var r=[];return l(t,function(t,n,i){r.push(e(t,n,i))}),r},d=function(t,e,r){return t.reduce?t.reduce(e,r):(l(t,function(t,n,i){r=e(r,t,n,i)}),r)},_=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};"undefined"!=typeof r&&r.nextTick?(c.nextTick=r.nextTick,c.setImmediate="undefined"!=typeof o?function(t){o(t)}:c.nextTick):"function"==typeof o?(c.nextTick=function(t){o(t)},c.setImmediate=c.nextTick):(c.nextTick=function(t){setTimeout(t,0)},c.setImmediate=c.nextTick),c.each=function(t,e,r){function n(e){e?(r(e),r=function(){}):(i+=1,i>=t.length&&r())}if(r=r||function(){},!t.length)return r();var i=0;l(t,function(t){e(t,s(n))})},c.forEach=c.each,c.eachSeries=function(t,e,r){if(r=r||function(){},!t.length)return r();var n=0,i=function(){e(t[n],function(e){e?(r(e),r=function(){}):(n+=1,n>=t.length?r():i())})};i()},c.forEachSeries=c.eachSeries,c.eachLimit=function(t,e,r,n){var i=g(e);i.apply(null,[t,r,n])},c.forEachLimit=c.eachLimit;var g=function(t){return function(e,r,n){if(n=n||function(){},!e.length||0>=t)return n();var i=0,o=0,s=0;!function a(){if(i>=e.length)return n();for(;t>s&&o<e.length;)o+=1,s+=1,r(e[o-1],function(t){t?(n(t),n=function(){}):(i+=1,s-=1,i>=e.length?n():a())})}()}},y=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[c.each].concat(e))}},v=function(t,e){return function(){var r=Array.prototype.slice.call(arguments);return e.apply(null,[g(t)].concat(r))}},m=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[c.eachSeries].concat(e))}},b=function(t,e,r,n){if(e=p(e,function(t,e){return{index:e,value:t}}),n){var i=[];t(e,function(t,e){r(t.value,function(r,n){i[t.index]=n,e(r)})},function(t){n(t,i)})}else t(e,function(t,e){r(t.value,function(t){e(t)})})};c.map=y(b),c.mapSeries=m(b),c.mapLimit=function(t,e,r,n){return w(e)(t,r,n)};var w=function(t){return v(t,b)};c.reduce=function(t,e,r,n){c.eachSeries(t,function(t,n){r(e,t,function(t,r){e=r,n(t)})},function(t){n(t,e)})},c.inject=c.reduce,c.foldl=c.reduce,c.reduceRight=function(t,e,r,n){var i=p(t,function(t){return t}).reverse();c.reduce(i,e,r,n)},c.foldr=c.reduceRight;var E=function(t,e,r,n){var i=[];e=p(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r&&i.push(t),e()})},function(){n(p(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};c.filter=y(E),c.filterSeries=m(E),c.select=c.filter,c.selectSeries=c.filterSeries;var A=function(t,e,r,n){var i=[];e=p(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r||i.push(t),e()})},function(){n(p(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};c.reject=y(A),c.rejectSeries=m(A);var x=function(t,e,r,n){t(e,function(t,e){r(t,function(r){r?(n(t),n=function(){}):e()})},function(){n()})};c.detect=y(x),c.detectSeries=m(x),c.some=function(t,e,r){c.each(t,function(t,n){e(t,function(t){t&&(r(!0),r=function(){}),n()})},function(){r(!1)})},c.any=c.some,c.every=function(t,e,r){c.each(t,function(t,n){e(t,function(t){t||(r(!1),r=function(){}),n()})},function(){r(!0)})},c.all=c.every,c.sortBy=function(t,e,r){c.map(t,function(t,r){e(t,function(e,n){e?r(e):r(null,{value:t,criteria:n})})},function(t,e){if(t)return r(t);var n=function(t,e){var r=t.criteria,n=e.criteria;return n>r?-1:r>n?1:0};r(null,p(e.sort(n),function(t){return t.value}))})},c.auto=function(t,e){e=e||function(){};var r=_(t),n=r.length;if(!n)return e();var i={},o=[],s=function(t){o.unshift(t)},a=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)},u=function(){n--,l(o.slice(0),function(t){t()})};s(function(){if(!n){var t=e;e=function(){},t(null,i)}}),l(r,function(r){var n=h(t[r])?t[r]:[t[r]],o=function(t){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),t){var o={};l(_(i),function(t){o[t]=i[t]}),o[r]=n,e(t,o),e=function(){}}else i[r]=n,c.setImmediate(u)},f=n.slice(0,Math.abs(n.length-1))||[],p=function(){return d(f,function(t,e){return t&&i.hasOwnProperty(e)},!0)&&!i.hasOwnProperty(r)};if(p())n[n.length-1](o,i);else{var g=function(){p()&&(a(g),n[n.length-1](o,i))};s(g)}})},c.retry=function(t,e,r){var n=5,i=[];"function"==typeof t&&(r=e,e=t,t=n),t=parseInt(t,10)||n;var o=function(n,o){for(var s=function(t,e){return function(r){t(function(t,n){r(!t||e,{err:t,result:n})},o)}};t;)i.push(s(e,!(t-=1)));c.series(i,function(t,e){e=e[e.length-1],(n||r)(e.err,e.result)})};return r?o():o},c.waterfall=function(t,e){if(e=e||function(){},!h(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var n=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=t.next();i.push(o?n(o):e),c.setImmediate(function(){t.apply(null,i)})}}};n(c.iterator(t))()};var F=function(t,e,r){if(r=r||function(){},h(e))t.map(e,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},r);else{var n={};t.each(_(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(t){r(t,n)})}};c.parallel=function(t,e){F({map:c.map,each:c.each},t,e)},c.parallelLimit=function(t,e,r){F({map:w(e),each:g(e)},t,r)},c.series=function(t,e){if(e=e||function(){},h(t))c.mapSeries(t,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},e);else{var r={};c.eachSeries(_(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(t){e(t,r)})}},c.iterator=function(t){var e=function(r){var n=function(){return t.length&&t[r].apply(null,arguments),n.next()};return n.next=function(){return r<t.length-1?e(r+1):null},n};return e(0)},c.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var C=function(t,e,r,n){var i=[];t(e,function(t,e){r(t,function(t,r){i=i.concat(r||[]),e(t)})},function(t){n(t,i)})};c.concat=y(C),c.concatSeries=m(C),c.whilst=function(t,e,r){t()?e(function(n){return n?r(n):void c.whilst(t,e,r)}):r()},c.doWhilst=function(t,e,r){t(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?c.doWhilst(t,e,r):r()})},c.until=function(t,e,r){t()?r():e(function(n){return n?r(n):void c.until(t,e,r)})},c.doUntil=function(t,e,r){t(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?r():c.doUntil(t,e,r)})},c.queue=function(t,e){function r(t,e,r,n){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?c.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var i={data:e,callback:"function"==typeof n?n:null};r?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),c.setImmediate(t.process)})}void 0===e&&(e=1);var n=0,i={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){r(i,t,!1,e)},kill:function(){i.drain=null,i.tasks=[]},unshift:function(t,e){r(i,t,!0,e)},process:function(){if(!i.paused&&n<i.concurrency&&i.tasks.length){var e=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),n+=1;var r=function(){n-=1,e.callback&&e.callback.apply(e,arguments),i.drain&&i.tasks.length+n===0&&i.drain(),i.process()},o=s(r);t(e.data,o)}},length:function(){return i.tasks.length},running:function(){return n},idle:function(){return i.tasks.length+n===0},pause:function(){i.paused!==!0&&(i.paused=!0)},resume:function(){if(i.paused!==!1){i.paused=!1;for(var t=1;t<=i.concurrency;t++)c.setImmediate(i.process)}}};return i},c.priorityQueue=function(t,e){function r(t,e){return t.priority-e.priority}function n(t,e,r){for(var n=-1,i=t.length-1;i>n;){var o=n+(i-n+1>>>1);r(e,t[o])>=0?n=o:i=o-1}return n}function i(t,e,i,o){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?c.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var s={data:e,priority:i,callback:"function"==typeof o?o:null};t.tasks.splice(n(t.tasks,s,r)+1,0,s),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),c.setImmediate(t.process)})}var o=c.queue(t,e);return o.push=function(t,e,r){i(o,t,e,r)},delete o.unshift,o},c.cargo=function(t,e){var r=!1,n=[],i={tasks:n,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,r){h(t)||(t=[t]),l(t,function(t){n.push({data:t,callback:"function"==typeof r?r:null}),i.drained=!1,i.saturated&&n.length===e&&i.saturated()}),c.setImmediate(i.process)},process:function o(){if(!r){if(0===n.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var s="number"==typeof e?n.splice(0,e):n.splice(0,n.length),a=p(s,function(t){return t.data});i.empty&&i.empty(),r=!0,t(a,function(){r=!1;var t=arguments;l(s,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return n.length},running:function(){return r}};return i};var B=function(t){return function(e){var r=Array.prototype.slice.call(arguments,1);e.apply(null,r.concat([function(e){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&l(r,function(e){console[t](e)}))}]))}};c.log=B("log"),c.dir=B("dir"),c.memoize=function(t,e){var r={},n={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=e.apply(null,i);s in r?c.nextTick(function(){o.apply(null,r[s])}):s in n?n[s].push(o):(n[s]=[o],t.apply(null,i.concat([function(){r[s]=arguments;var t=n[s];delete n[s];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=t,i},c.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},c.times=function(t,e,r){for(var n=[],i=0;t>i;i++)n.push(i);return c.map(n,e,r)},c.timesSeries=function(t,e,r){for(var n=[],i=0;t>i;i++)n.push(i);return c.mapSeries(n,e,r)},c.seq=function(){var t=arguments;return function(){var e=this,r=Array.prototype.slice.call(arguments),n=r.pop();c.reduce(t,r,function(t,r,n){r.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);n(t,e)}]))},function(t,r){n.apply(e,[t].concat(r))})}},c.compose=function(){return c.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(t,e){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return t(e,function(t,e){t.apply(r,n.concat([e]))},i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};c.applyEach=y(S),c.applyEachSeries=m(S),c.forever=function(t,e){function r(n){if(n){if(e)return e(n);throw n}t(r)}r()},"undefined"!=typeof t&&t.exports?t.exports=c:(n=[],i=function(){return c}.apply(e,n),!(void 0!==i&&(t.exports=i)))}()}).call(e,r(63),r(71).setImmediate)},function(t,e,r){var n,i,o={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};"undefined"!=typeof t&&t.exports&&(t.exports=o),n=[],i=function(){return o}.apply(e,n),!(void 0!==i&&(t.exports=i)),o.cipher.aes=function(t){this._tables[0][0][0]||this._precompute();var e,r,n,i,s,a=this._tables[0][4],u=this._tables[1],c=t.length,f=1;if(4!==c&&6!==c&&8!==c)throw new o.exception.invalid("invalid aes key size");for(this._key=[i=t.slice(0),s=[]],e=c;4*c+28>e;e++)n=i[e-1],(e%c===0||8===c&&e%c===4)&&(n=a[n>>>24]<<24^a[n>>16&255]<<16^a[n>>8&255]<<8^a[255&n],e%c===0&&(n=n<<8^n>>>24^f<<24,f=f<<1^283*(f>>7))),i[e]=i[e-c]^n;for(r=0;e;r++,e--)n=i[3&r?e:e-4],s[r]=4>=e||4>r?n:u[0][a[n>>>24]]^u[1][a[n>>16&255]]^u[2][a[n>>8&255]]^u[3][a[255&n]]},o.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,r,n,i,o,s,a,u,c=this._tables[0],f=this._tables[1],h=c[4],l=f[4],p=[],d=[];for(t=0;256>t;t++)d[(p[t]=t<<1^283*(t>>7))^t]=t;for(e=r=0;!h[e];e^=n||1,r=d[r]||1)for(s=r^r<<1^r<<2^r<<3^r<<4,s=s>>8^255&s^99,h[e]=s,l[s]=e,o=p[i=p[n=p[e]]],u=16843009*o^65537*i^257*n^16843008*e,a=257*p[s]^16843008*s,t=0;4>t;t++)c[t][e]=a=a<<24^a>>>8,f[t][s]=u=u<<24^u>>>8;for(t=0;5>t;t++)c[t]=c[t].slice(0),f[t]=f[t].slice(0)},_crypt:function(t,e){if(4!==t.length)throw new o.exception.invalid("invalid aes block size");var r,n,i,s,a=this._key[e],u=t[0]^a[0],c=t[e?3:1]^a[1],f=t[2]^a[2],h=t[e?1:3]^a[3],l=a.length/4-2,p=4,d=[0,0,0,0],_=this._tables[e],g=_[0],y=_[1],v=_[2],m=_[3],b=_[4];for(s=0;l>s;s++)r=g[u>>>24]^y[c>>16&255]^v[f>>8&255]^m[255&h]^a[p],n=g[c>>>24]^y[f>>16&255]^v[h>>8&255]^m[255&u]^a[p+1],i=g[f>>>24]^y[h>>16&255]^v[u>>8&255]^m[255&c]^a[p+2],h=g[h>>>24]^y[u>>16&255]^v[c>>8&255]^m[255&f]^a[p+3],p+=4,u=r,c=n,f=i;for(s=0;4>s;s++)d[e?3&-s:s]=b[u>>>24]<<24^b[c>>16&255]<<16^b[f>>8&255]<<8^b[255&h]^a[p++],r=u,u=c,c=f,f=h,h=r;return d}},o.bitArray={bitSlice:function(t,e,r){return t=o.bitArray._shiftRight(t.slice(e/32),32-(31&e)).slice(1),void 0===r?t:o.bitArray.clamp(t,r-e)},extract:function(t,e,r){var n,i=Math.floor(-e-r&31);return n=-32&(e+r-1^e)?t[e/32|0]<<32-i^t[e/32+1|0]>>>i:t[e/32|0]>>>i,n&(1<<r)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var r=t[t.length-1],n=o.bitArray.getPartial(r);return 32===n?t.concat(e):o.bitArray._shiftRight(e,n,0|r,t.slice(0,t.length-1))},bitLength:function(t){var e,r=t.length;return 0===r?0:(e=t[r-1],32*(r-1)+o.bitArray.getPartial(e))},clamp:function(t,e){if(32*t.length<e)return t;t=t.slice(0,Math.ceil(e/32));var r=t.length;return e=31&e,r>0&&e&&(t[r-1]=o.bitArray.partial(e,t[r-1]&2147483648>>e-1,1)),t},partial:function(t,e,r){return 32===t?e:(r?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(o.bitArray.bitLength(t)!==o.bitArray.bitLength(e))return!1;var r,n=0;for(r=0;r<t.length;r++)n|=t[r]^e[r];return 0===n},_shiftRight:function(t,e,r,n){var i,s,a=0;for(void 0===n&&(n=[]);e>=32;e-=32)n.push(r),r=0;if(0===e)return n.concat(t);for(i=0;i<t.length;i++)n.push(r|t[i]>>>e),r=t[i]<<32-e;return a=t.length?t[t.length-1]:0,s=o.bitArray.getPartial(a),n.push(o.bitArray.partial(e+s&31,e+s>32?r:n.pop(),1)),n},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]},byteswapM:function(t){var e,r,n=65280;for(e=0;e<t.length;++e)r=t[e],t[e]=r>>>24|r>>>8&n|(r&n)<<8|r<<24;return t}},o.codec.utf8String={fromBits:function(t){var e,r,n="",i=o.bitArray.bitLength(t);for(e=0;i/8>e;e++)0===(3&e)&&(r=t[e/4]),n+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(n))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,r=[],n=0;for(e=0;e<t.length;e++)n=n<<8|t.charCodeAt(e),3===(3&e)&&(r.push(n),n=0);return 3&e&&r.push(o.bitArray.partial(8*(3&e),n)),r}},o.codec.hex={fromBits:function(t){var e,r="";for(e=0;e<t.length;e++)r+=((0|t[e])+0xf00000000000).toString(16).substr(4);return r.substr(0,o.bitArray.bitLength(t)/4)},toBits:function(t){var e,r,n=[];for(t=t.replace(/\s|0x/g,""),r=t.length,t+="00000000",e=0;e<t.length;e+=8)n.push(0^parseInt(t.substr(e,8),16));return o.bitArray.clamp(n,4*r)}},o.codec.base32={_chars:"0123456789abcdefghjkmnpqrstvwxyz",BITS:32,BASE:5,REMAINING:27,fromBits:function(t){var e,r=(o.codec.base32.BITS,o.codec.base32.BASE),n=o.codec.base32.REMAINING,i="",s=0,a=o.codec.base32._chars,u=0,c=o.bitArray.bitLength(t);for(e=0;i.length*r<=c;)i+=a.charAt((u^t[e]>>>s)>>>n),r>s?(u=t[e]<<r-s,s+=n,e++):(u<<=r,s-=r);return i},toBits:function(t){var e,r,n=o.codec.base32.BITS,i=o.codec.base32.BASE,s=o.codec.base32.REMAINING,a=[],u=0,c=o.codec.base32._chars,f=0;for(e=0;e<t.length;e++){if(r=c.indexOf(t.charAt(e)),0>r)throw new o.exception.invalid("this isn't base32!");u>s?(u-=s,a.push(f^r>>>u),f=r<<n-u):(u+=i,f^=r<<n-u)}return 56&u&&a.push(o.bitArray.partial(56&u,f,1)),a}},o.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,r){var n,i="",s=0,a=o.codec.base64._chars,u=0,c=o.bitArray.bitLength(t);for(r&&(a=a.substr(0,62)+"-_"),n=0;6*i.length<c;)i+=a.charAt((u^t[n]>>>s)>>>26),6>s?(u=t[n]<<6-s,s+=26,n++):(u<<=6,s-=6);for(;3&i.length&&!e;)i+="=";return i},toBits:function(t,e){t=t.replace(/\s|=/g,"");var r,n,i=[],s=0,a=o.codec.base64._chars,u=0;for(e&&(a=a.substr(0,62)+"-_"),r=0;r<t.length;r++){if(n=a.indexOf(t.charAt(r)),0>n)throw new o.exception.invalid("this isn't base64!");s>26?(s-=26,i.push(u^n>>>s),u=n<<32-s):(s+=6,u^=n<<32-s)}return 56&s&&i.push(o.bitArray.partial(56&s,u,1)),i}},o.codec.base64url={fromBits:function(t){return o.codec.base64.fromBits(t,1,1)},toBits:function(t){return o.codec.base64.toBits(t,1)}},o.codec.bytes={fromBits:function(t){var e,r,n=[],i=o.bitArray.bitLength(t);for(e=0;i/8>e;e++)0===(3&e)&&(r=t[e/4]),n.push(r>>>24),r<<=8;return n},toBits:function(t){var e,r=[],n=0;for(e=0;e<t.length;e++)n=n<<8|t[e],3===(3&e)&&(r.push(n),n=0);return 3&e&&r.push(o.bitArray.partial(8*(3&e),n)),r}},o.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},o.hash.sha256.hash=function(t){return(new o.hash.sha256).update(t).finalize()},o.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=o.codec.utf8String.toBits(t));var e,r=this._buffer=o.bitArray.concat(this._buffer,t),n=this._length,i=this._length=n+o.bitArray.bitLength(t);for(e=512+n&-512;i>=e;e+=512)this._block(r.splice(0,16));return this},finalize:function(){var t,e=this._buffer,r=this._h;for(e=o.bitArray.concat(e,[o.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),r},_init:[],_key:[],_precompute:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}var e,r=0,n=2;t:for(;64>r;n++){for(e=2;n>=e*e;e++)if(n%e===0)continue t;8>r&&(this._init[r]=t(Math.pow(n,.5))),this._key[r]=t(Math.pow(n,1/3)),r++}},_block:function(t){var e,r,n,i,o=t.slice(0),s=this._h,a=this._key,u=s[0],c=s[1],f=s[2],h=s[3],l=s[4],p=s[5],d=s[6],_=s[7];for(e=0;64>e;e++)16>e?r=o[e]:(n=o[e+1&15],i=o[e+14&15],r=o[15&e]=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+o[15&e]+o[e+9&15]|0),r=r+_+(l>>>6^l>>>11^l>>>25^l<<26^l<<21^l<<7)+(d^l&(p^d))+a[e],_=d,d=p,p=l,l=h+r|0,h=f,f=c,c=u,u=r+(c&f^h&(c^f))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;s[0]=s[0]+u|0,s[1]=s[1]+c|0,s[2]=s[2]+f|0,s[3]=s[3]+h|0,s[4]=s[4]+l|0,s[5]=s[5]+p|0,s[6]=s[6]+d|0,s[7]=s[7]+_|0}},o.hash.sha512=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},o.hash.sha512.hash=function(t){return(new o.hash.sha512).update(t).finalize()},o.hash.sha512.prototype={blockSize:1024,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=o.codec.utf8String.toBits(t));var e,r=this._buffer=o.bitArray.concat(this._buffer,t),n=this._length,i=this._length=n+o.bitArray.bitLength(t);for(e=1024+n&-1024;i>=e;e+=1024)this._block(r.splice(0,32));return this},finalize:function(){var t,e=this._buffer,r=this._h;for(e=o.bitArray.concat(e,[o.bitArray.partial(1,1)]),t=e.length+4;31&t;t++)e.push(0);for(e.push(0),e.push(0),e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,32));return this.reset(),r},_init:[],_initr:[12372232,13281083,9762859,1914609,15106769,4090911,4308331,8266105],_key:[],_keyr:[2666018,15689165,5061423,9034684,4764984,380953,1658779,7176472,197186,7368638,14987916,16757986,8096111,1480369,13046325,6891156,15813330,5187043,9229749,11312229,2818677,10937475,4324308,1135541,6741931,11809296,16458047,15666916,11046850,698149,229999,945776,13774844,2541862,12856045,9810911,11494366,7844520,15576806,8533307,15795044,4337665,16291729,5553712,15684120,6662416,7413802,12308920,13816008,4303699,9366425,10176680,13195875,4295371,6546291,11712675,15708924,1519456,15772530,6568428,6495784,8568297,13007125,7492395,2515356,12632583,14740254,7262584,1535930,13146278,16321966,1853211,294276,13051027,13221564,1051980,4080310,6651434,14088940,4675607],_precompute:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}function e(t){return 1099511627776*(t-Math.floor(t))&255}var r,n=0,i=2;t:for(;80>n;i++){for(r=2;i>=r*r;r++)if(i%r===0)continue t;8>n&&(this._init[2*n]=t(Math.pow(i,.5)),this._init[2*n+1]=e(Math.pow(i,.5))<<24|this._initr[n]),this._key[2*n]=t(Math.pow(i,1/3)),this._key[2*n+1]=e(Math.pow(i,1/3))<<24|this._keyr[n],n++}},_block:function(t){var e,r,n,i=t.slice(0),o=this._h,s=this._key,a=o[0],u=o[1],c=o[2],f=o[3],h=o[4],l=o[5],p=o[6],d=o[7],_=o[8],g=o[9],y=o[10],v=o[11],m=o[12],b=o[13],w=o[14],E=o[15],A=a,x=u,F=c,C=f,B=h,S=l,D=p,T=d,k=_,O=g,I=y,R=v,L=m,j=b,N=w,q=E;for(e=0;80>e;e++){if(16>e)r=i[2*e],n=i[2*e+1];else{var M=i[2*(e-15)],P=i[2*(e-15)+1],U=(P<<31|M>>>1)^(P<<24|M>>>8)^M>>>7,z=(M<<31|P>>>1)^(M<<24|P>>>8)^(M<<25|P>>>7),G=i[2*(e-2)],H=i[2*(e-2)+1],V=(H<<13|G>>>19)^(G<<3|H>>>29)^G>>>6,K=(G<<13|H>>>19)^(H<<3|G>>>29)^(G<<26|H>>>6),Y=i[2*(e-7)],X=i[2*(e-7)+1],$=i[2*(e-16)],W=i[2*(e-16)+1];n=z+X,r=U+Y+(z>>>0>n>>>0?1:0),n+=K,r+=V+(K>>>0>n>>>0?1:0),n+=W,r+=$+(W>>>0>n>>>0?1:0)}i[2*e]=r|=0,i[2*e+1]=n|=0;var J=k&I^~k&L,Q=O&R^~O&j,Z=A&F^A&B^F&B,te=x&C^x&S^C&S,ee=(x<<4|A>>>28)^(A<<30|x>>>2)^(A<<25|x>>>7),re=(A<<4|x>>>28)^(x<<30|A>>>2)^(x<<25|A>>>7),ne=(O<<18|k>>>14)^(O<<14|k>>>18)^(k<<23|O>>>9),ie=(k<<18|O>>>14)^(k<<14|O>>>18)^(O<<23|k>>>9),oe=s[2*e],se=s[2*e+1],ae=q+ie,ue=N+ne+(q>>>0>ae>>>0?1:0);ae+=Q,ue+=J+(Q>>>0>ae>>>0?1:0),ae+=se,ue+=oe+(se>>>0>ae>>>0?1:0),ae=ae+n|0,ue+=r+(n>>>0>ae>>>0?1:0);var ce=re+te,fe=ee+Z+(re>>>0>ce>>>0?1:0);N=L,q=j,L=I,j=R,I=k,R=O,O=T+ae|0,k=D+ue+(T>>>0>O>>>0?1:0)|0,D=B,T=S,B=F,S=C,F=A,C=x,x=ae+ce|0,A=ue+fe+(ae>>>0>x>>>0?1:0)|0}u=o[1]=u+x|0,o[0]=a+A+(x>>>0>u>>>0?1:0)|0,f=o[3]=f+C|0,o[2]=c+F+(C>>>0>f>>>0?1:0)|0,l=o[5]=l+S|0,o[4]=h+B+(S>>>0>l>>>0?1:0)|0,d=o[7]=d+T|0,o[6]=p+D+(T>>>0>d>>>0?1:0)|0,g=o[9]=g+O|0,o[8]=_+k+(O>>>0>g>>>0?1:0)|0,v=o[11]=v+R|0,o[10]=y+I+(R>>>0>v>>>0?1:0)|0,b=o[13]=b+j|0,o[12]=m+L+(j>>>0>b>>>0?1:0)|0,E=o[15]=E+q|0,o[14]=w+N+(q>>>0>E>>>0?1:0)|0}},o.hash.sha1=function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},o.hash.sha1.hash=function(t){return(new o.hash.sha1).update(t).finalize()},o.hash.sha1.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=o.codec.utf8String.toBits(t));var e,r=this._buffer=o.bitArray.concat(this._buffer,t),n=this._length,i=this._length=n+o.bitArray.bitLength(t);for(e=this.blockSize+n&-this.blockSize;i>=e;e+=this.blockSize)this._block(r.splice(0,16));return this},finalize:function(){var t,e=this._buffer,r=this._h;for(e=o.bitArray.concat(e,[o.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),r},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,e,r,n){return 19>=t?e&r|~e&n:39>=t?e^r^n:59>=t?e&r|e&n|r&n:79>=t?e^r^n:void 0},_S:function(t,e){return e<<t|e>>>32-t},_block:function(t){var e,r,n,i,o,s,a,u=t.slice(0),c=this._h;
for(n=c[0],i=c[1],o=c[2],s=c[3],a=c[4],e=0;79>=e;e++)e>=16&&(u[e]=this._S(1,u[e-3]^u[e-8]^u[e-14]^u[e-16])),r=this._S(5,n)+this._f(e,i,o,s)+a+u[e]+this._key[Math.floor(e/20)]|0,a=s,s=o,o=this._S(30,i),i=n,n=r;c[0]=c[0]+n|0,c[1]=c[1]+i|0,c[2]=c[2]+o|0,c[3]=c[3]+s|0,c[4]=c[4]+a|0}},o.mode.ccm={name:"ccm",_progressListeners:[],listenProgress:function(t){o.mode.ccm._progressListeners.push(t)},unListenProgress:function(t){var e=o.mode.ccm._progressListeners.indexOf(t);e>-1&&o.mode.ccm._progressListeners.splice(e,1)},_callProgressListener:function(t){var e,r=o.mode.ccm._progressListeners.slice();for(e=0;e<r.length;e+=1)r[e](t)},encrypt:function(t,e,r,n,i){var s,a,u=e.slice(0),c=o.bitArray,f=c.bitLength(r)/8,h=c.bitLength(u)/8;if(i=i||64,n=n||[],7>f)throw new o.exception.invalid("ccm: iv must be at least 7 bytes");for(s=2;4>s&&h>>>8*s;s++);return 15-f>s&&(s=15-f),r=c.clamp(r,8*(15-s)),a=o.mode.ccm._computeTag(t,e,r,n,i,s),u=o.mode.ccm._ctrMode(t,u,r,a,i,s),c.concat(u.data,u.tag)},decrypt:function(t,e,r,n,i){i=i||64,n=n||[];var s,a,u=o.bitArray,c=u.bitLength(r)/8,f=u.bitLength(e),h=u.clamp(e,f-i),l=u.bitSlice(e,f-i);if(f=(f-i)/8,7>c)throw new o.exception.invalid("ccm: iv must be at least 7 bytes");for(s=2;4>s&&f>>>8*s;s++);if(15-c>s&&(s=15-c),r=u.clamp(r,8*(15-s)),h=o.mode.ccm._ctrMode(t,h,r,l,i,s),a=o.mode.ccm._computeTag(t,h.data,r,n,i,s),!u.equal(h.tag,a))throw new o.exception.corrupt("ccm: tag doesn't match");return h.data},_macAdditionalData:function(t,e,r,n,i,s){var a,u,c,f=[],h=o.bitArray,l=h._xor4;if(a=[h.partial(8,(e.length?64:0)|n-2<<2|s-1)],a=h.concat(a,r),a[3]|=i,a=t.encrypt(a),e.length)for(u=h.bitLength(e)/8,65279>=u?f=[h.partial(16,u)]:4294967295>=u&&(f=h.concat([h.partial(16,65534)],[u])),f=h.concat(f,e),c=0;c<f.length;c+=4)a=t.encrypt(l(a,f.slice(c,c+4).concat([0,0,0])));return a},_computeTag:function(t,e,r,n,i,s){var a,u,c=o.bitArray,f=c._xor4;if(i/=8,i%2||4>i||i>16)throw new o.exception.invalid("ccm: invalid tag length");if(n.length>4294967295||e.length>4294967295)throw new o.exception.bug("ccm: can't deal with 4GiB or more data");for(a=o.mode.ccm._macAdditionalData(t,n,r,i,c.bitLength(e)/8,s),u=0;u<e.length;u+=4)a=t.encrypt(f(a,e.slice(u,u+4).concat([0,0,0])));return c.clamp(a,8*i)},_ctrMode:function(t,e,r,n,i,s){var a,u,c,f=o.bitArray,h=f._xor4,l=e.length,p=f.bitLength(e),d=l/50,_=d;if(c=f.concat([f.partial(8,s-1)],r).concat([0,0,0]).slice(0,4),n=f.bitSlice(h(n,t.encrypt(c)),0,i),!l)return{tag:n,data:[]};for(u=0;l>u;u+=4)u>d&&(o.mode.ccm._callProgressListener(u/l),d+=_),c[3]++,a=t.encrypt(c),e[u]^=a[0],e[u+1]^=a[1],e[u+2]^=a[2],e[u+3]^=a[3];return{tag:n,data:f.clamp(e,p)}}},void 0===o.beware&&(o.beware={}),o.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){o.mode.cbc={name:"cbc",encrypt:function(t,e,r,n){if(n&&n.length)throw new o.exception.invalid("cbc can't authenticate data");if(128!==o.bitArray.bitLength(r))throw new o.exception.invalid("cbc iv must be 128 bits");var i,s=o.bitArray,a=s._xor4,u=s.bitLength(e),c=0,f=[];if(7&u)throw new o.exception.invalid("pkcs#5 padding only works for multiples of a byte");for(i=0;u>=c+128;i+=4,c+=128)r=t.encrypt(a(r,e.slice(i,i+4))),f.splice(i,0,r[0],r[1],r[2],r[3]);return u=16843009*(16-(u>>3&15)),r=t.encrypt(a(r,s.concat(e,[u,u,u,u]).slice(i,i+4))),f.splice(i,0,r[0],r[1],r[2],r[3]),f},decrypt:function(t,e,r,n){if(n&&n.length)throw new o.exception.invalid("cbc can't authenticate data");if(128!==o.bitArray.bitLength(r))throw new o.exception.invalid("cbc iv must be 128 bits");if(127&o.bitArray.bitLength(e)||!e.length)throw new o.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");var i,s,a,u=o.bitArray,c=u._xor4,f=[];for(n=n||[],i=0;i<e.length;i+=4)s=e.slice(i,i+4),a=c(r,t.decrypt(s)),f.splice(i,0,a[0],a[1],a[2],a[3]),r=s;if(s=255&f[i-1],0===s||s>16)throw new o.exception.corrupt("pkcs#5 padding corrupt");if(a=16843009*s,!u.equal(u.bitSlice([a,a,a,a],0,8*s),u.bitSlice(f,32*f.length-8*s,32*f.length)))throw new o.exception.corrupt("pkcs#5 padding corrupt");return u.bitSlice(f,0,32*f.length-8*s)}}},o.mode.ocb2={name:"ocb2",encrypt:function(t,e,r,n,i,s){if(128!==o.bitArray.bitLength(r))throw new o.exception.invalid("ocb iv must be 128 bits");var a,u,c,f,h=o.mode.ocb2._times2,l=o.bitArray,p=l._xor4,d=[0,0,0,0],_=h(t.encrypt(r)),g=[];for(n=n||[],i=i||64,a=0;a+4<e.length;a+=4)u=e.slice(a,a+4),d=p(d,u),g=g.concat(p(_,t.encrypt(p(_,u)))),_=h(_);return u=e.slice(a),c=l.bitLength(u),f=t.encrypt(p(_,[0,0,0,c])),u=l.clamp(p(u.concat([0,0,0]),f),c),d=p(d,p(u.concat([0,0,0]),f)),d=t.encrypt(p(d,p(_,h(_)))),n.length&&(d=p(d,s?n:o.mode.ocb2.pmac(t,n))),g.concat(l.concat(u,l.clamp(d,i)))},decrypt:function(t,e,r,n,i,s){if(128!==o.bitArray.bitLength(r))throw new o.exception.invalid("ocb iv must be 128 bits");i=i||64;var a,u,c,f,h=o.mode.ocb2._times2,l=o.bitArray,p=l._xor4,d=[0,0,0,0],_=h(t.encrypt(r)),g=o.bitArray.bitLength(e)-i,y=[];for(n=n||[],a=0;g/32>a+4;a+=4)u=p(_,t.decrypt(p(_,e.slice(a,a+4)))),d=p(d,u),y=y.concat(u),_=h(_);if(c=g-32*a,f=t.encrypt(p(_,[0,0,0,c])),u=p(f,l.clamp(e.slice(a),c).concat([0,0,0])),d=p(d,u),d=t.encrypt(p(d,p(_,h(_)))),n.length&&(d=p(d,s?n:o.mode.ocb2.pmac(t,n))),!l.equal(l.clamp(d,i),l.bitSlice(e,g)))throw new o.exception.corrupt("ocb: tag doesn't match");return y.concat(l.clamp(u,c))},pmac:function(t,e){var r,n,i=o.mode.ocb2._times2,s=o.bitArray,a=s._xor4,u=[0,0,0,0],c=t.encrypt([0,0,0,0]);for(c=a(c,i(i(c))),r=0;r+4<e.length;r+=4)c=i(c),u=a(u,t.encrypt(a(c,e.slice(r,r+4))));return n=e.slice(r),s.bitLength(n)<128&&(c=a(c,i(c)),n=s.concat(n,[-2147483648,0,0,0])),u=a(u,n),t.encrypt(a(i(a(c,i(c))),u))},_times2:function(t){return[t[0]<<1^t[1]>>>31,t[1]<<1^t[2]>>>31,t[2]<<1^t[3]>>>31,t[3]<<1^135*(t[0]>>>31)]}},o.mode.gcm={name:"gcm",encrypt:function(t,e,r,n,i){var s,a=e.slice(0),u=o.bitArray;return i=i||128,n=n||[],s=o.mode.gcm._ctrMode(!0,t,a,n,r,i),u.concat(s.data,s.tag)},decrypt:function(t,e,r,n,i){var s,a,u=e.slice(0),c=o.bitArray,f=c.bitLength(u);if(i=i||128,n=n||[],f>=i?(a=c.bitSlice(u,f-i),u=c.bitSlice(u,0,f-i)):(a=u,u=[]),s=o.mode.gcm._ctrMode(!1,t,u,n,r,i),!c.equal(s.tag,a))throw new o.exception.corrupt("gcm: tag doesn't match");return s.data},_galoisMultiply:function(t,e){var r,n,i,s,a,u,c=o.bitArray,f=c._xor4;for(s=[0,0,0,0],a=e.slice(0),r=0;128>r;r++){for(i=0!==(t[Math.floor(r/32)]&1<<31-r%32),i&&(s=f(s,a)),u=0!==(1&a[3]),n=3;n>0;n--)a[n]=a[n]>>>1|(1&a[n-1])<<31;a[0]=a[0]>>>1,u&&(a[0]=a[0]^225<<24)}return s},_ghash:function(t,e,r){var n,i,s=r.length;for(n=e.slice(0),i=0;s>i;i+=4)n[0]^=4294967295&r[i],n[1]^=4294967295&r[i+1],n[2]^=4294967295&r[i+2],n[3]^=4294967295&r[i+3],n=o.mode.gcm._galoisMultiply(n,t);return n},_ctrMode:function(t,e,r,n,i,s){var a,u,c,f,h,l,p,d,_,g,y,v,m=o.bitArray;for(_=r.length,g=m.bitLength(r),y=m.bitLength(n),v=m.bitLength(i),a=e.encrypt([0,0,0,0]),96===v?(u=i.slice(0),u=m.concat(u,[1])):(u=o.mode.gcm._ghash(a,[0,0,0,0],i),u=o.mode.gcm._ghash(a,u,[0,0,Math.floor(v/4294967296),4294967295&v])),c=o.mode.gcm._ghash(a,[0,0,0,0],n),l=u.slice(0),p=c.slice(0),t||(p=o.mode.gcm._ghash(a,c,r)),h=0;_>h;h+=4)l[3]++,f=e.encrypt(l),r[h]^=f[0],r[h+1]^=f[1],r[h+2]^=f[2],r[h+3]^=f[3];return r=m.clamp(r,g),t&&(p=o.mode.gcm._ghash(a,c,r)),d=[Math.floor(y/4294967296),4294967295&y,Math.floor(g/4294967296),4294967295&g],p=o.mode.gcm._ghash(a,p,d),f=e.encrypt(u),p[0]^=f[0],p[1]^=f[1],p[2]^=f[2],p[3]^=f[3],{tag:m.bitSlice(p,0,s),data:r}}},o.misc.hmac=function(t,e){this._hash=e=e||o.hash.sha256;var r,n=[[],[]],i=e.prototype.blockSize/32;for(this._baseHash=[new e,new e],t.length>i&&(t=e.hash(t)),r=0;i>r;r++)n[0][r]=909522486^t[r],n[1][r]=1549556828^t[r];this._baseHash[0].update(n[0]),this._baseHash[1].update(n[1]),this._resultHash=new e(this._baseHash[0])},o.misc.hmac.prototype.encrypt=o.misc.hmac.prototype.mac=function(t){if(this._updated)throw new o.exception.invalid("encrypt on already updated hmac called!");return this.update(t),this.digest(t)},o.misc.hmac.prototype.reset=function(){this._resultHash=new this._hash(this._baseHash[0]),this._updated=!1},o.misc.hmac.prototype.update=function(t){this._updated=!0,this._resultHash.update(t)},o.misc.hmac.prototype.digest=function(){var t=this._resultHash.finalize(),e=new this._hash(this._baseHash[1]).update(t).finalize();return this.reset(),e},o.misc.pbkdf2=function(t,e,r,n,i){if(r=r||1e3,0>n||0>r)throw o.exception.invalid("invalid params to pbkdf2");"string"==typeof t&&(t=o.codec.utf8String.toBits(t)),"string"==typeof e&&(e=o.codec.utf8String.toBits(e)),i=i||o.misc.hmac;var s,a,u,c,f,h=new i(t),l=[],p=o.bitArray;for(f=1;32*l.length<(n||1);f++){for(s=a=h.encrypt(p.concat(e,[f])),u=1;r>u;u++)for(a=h.encrypt(a),c=0;c<a.length;c++)s[c]^=a[c];l=l.concat(s)}return n&&(l=p.clamp(l,n)),l},o.prng=function(t){this._pools=[new o.hash.sha256],this._poolEntropy=[0],this._reseedCount=0,this._robins={},this._eventId=0,this._collectorIds={},this._collectorIdNext=0,this._strength=0,this._poolStrength=0,this._nextReseed=0,this._key=[0,0,0,0,0,0,0,0],this._counter=[0,0,0,0],this._cipher=void 0,this._defaultParanoia=t,this._collectorsStarted=!1,this._callbacks={progress:{},seeded:{}},this._callbackI=0,this._NOT_READY=0,this._READY=1,this._REQUIRES_RESEED=2,this._MAX_WORDS_PER_BURST=65536,this._PARANOIA_LEVELS=[0,48,64,96,128,192,256,384,512,768,1024],this._MILLISECONDS_PER_RESEED=3e4,this._BITS_PER_RESEED=80},o.prng.prototype={randomWords:function(t,e){var r,n,i=[],s=this.isReady(e);if(s===this._NOT_READY)throw new o.exception.notReady("generator isn't seeded");for(s&this._REQUIRES_RESEED&&this._reseedFromPools(!(s&this._READY)),r=0;t>r;r+=4)(r+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),n=this._gen4words(),i.push(n[0],n[1],n[2],n[3]);return this._gate(),i.slice(0,t)},setDefaultParanoia:function(t,e){if(0===t&&"Setting paranoia=0 will ruin your security; use it only for testing"!==e)throw"Setting paranoia=0 will ruin your security; use it only for testing";this._defaultParanoia=t},addEntropy:function(t,e,r){r=r||"user";var n,i,s,a,u=(new Date).valueOf(),c=this._robins[r],f=this.isReady(),h=0;switch(n=this._collectorIds[r],void 0===n&&(n=this._collectorIds[r]=this._collectorIdNext++),void 0===c&&(c=this._robins[r]=0),this._robins[r]=(this._robins[r]+1)%this._pools.length,typeof t){case"number":void 0===e&&(e=1),this._pools[c].update([n,this._eventId++,1,e,u,1,0|t]);break;case"object":if(a=Object.prototype.toString.call(t),"[object Uint32Array]"===a){for(s=[],i=0;i<t.length;i++)s.push(t[i]);t=s}else for("[object Array]"!==a&&(h=1),i=0;i<t.length&&!h;i++)"number"!=typeof t[i]&&(h=1);if(!h){if(void 0===e)for(e=0,i=0;i<t.length;i++)for(s=t[i];s>0;)e++,s>>>=1;this._pools[c].update([n,this._eventId++,2,e,u,t.length].concat(t))}break;case"string":void 0===e&&(e=t.length),this._pools[c].update([n,this._eventId++,3,e,u,t.length]),this._pools[c].update(t);break;default:h=1}if(h)throw new o.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[c]+=e,this._poolStrength+=e,f===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){var e=this._PARANOIA_LEVELS[void 0!==t?t:this._defaultParanoia];return this._strength&&this._strength>=e?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=e?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){var e=this._PARANOIA_LEVELS[t?t:this._defaultParanoia];return this._strength>=e?1:this._poolStrength>e?1:this._poolStrength/e},startCollectors:function(){if(!this._collectorsStarted){if(this._eventListener={loadTimeCollector:this._bind(this._loadTimeCollector),mouseCollector:this._bind(this._mouseCollector),keyboardCollector:this._bind(this._keyboardCollector),accelerometerCollector:this._bind(this._accelerometerCollector),touchCollector:this._bind(this._touchCollector)},window.addEventListener)window.addEventListener("load",this._eventListener.loadTimeCollector,!1),window.addEventListener("mousemove",this._eventListener.mouseCollector,!1),window.addEventListener("keypress",this._eventListener.keyboardCollector,!1),window.addEventListener("devicemotion",this._eventListener.accelerometerCollector,!1),window.addEventListener("touchmove",this._eventListener.touchCollector,!1);else{if(!document.attachEvent)throw new o.exception.bug("can't attach event");document.attachEvent("onload",this._eventListener.loadTimeCollector),document.attachEvent("onmousemove",this._eventListener.mouseCollector),document.attachEvent("keypress",this._eventListener.keyboardCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._eventListener.loadTimeCollector,!1),window.removeEventListener("mousemove",this._eventListener.mouseCollector,!1),window.removeEventListener("keypress",this._eventListener.keyboardCollector,!1),window.removeEventListener("devicemotion",this._eventListener.accelerometerCollector,!1),window.removeEventListener("touchmove",this._eventListener.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this._eventListener.loadTimeCollector),document.detachEvent("onmousemove",this._eventListener.mouseCollector),document.detachEvent("keypress",this._eventListener.keyboardCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var r,n,i=this._callbacks[t],o=[];for(n in i)i.hasOwnProperty(n)&&i[n]===e&&o.push(n);for(r=0;r<o.length;r++)n=o[r],delete i[n]},_bind:function(t){var e=this;return function(){t.apply(e,arguments)}},_gen4words:function(){for(var t=0;4>t&&(this._counter[t]=this._counter[t]+1|0,!this._counter[t]);t++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new o.cipher.aes(this._key)},_reseed:function(t){this._key=o.hash.sha256.hash(this._key.concat(t)),this._cipher=new o.cipher.aes(this._key);for(var e=0;4>e&&(this._counter[e]=this._counter[e]+1|0,!this._counter[e]);e++);},_reseedFromPools:function(t){var e,r=[],n=0;for(this._nextReseed=r[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,e=0;16>e;e++)r.push(4294967296*Math.random()|0);for(e=0;e<this._pools.length&&(r=r.concat(this._pools[e].finalize()),n+=this._poolEntropy[e],this._poolEntropy[e]=0,t||!(this._reseedCount&1<<e));e++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new o.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=n,n>this._strength&&(this._strength=n),this._reseedCount++,this._reseed(r)},_keyboardCollector:function(){this._addCurrentTimeToEntropy(1)},_mouseCollector:function(t){var e,r;try{e=t.x||t.clientX||t.offsetX||0,r=t.y||t.clientY||t.offsetY||0}catch(n){e=0,r=0}0!=e&&0!=r&&o.random.addEntropy([e,r],2,"mouse"),this._addCurrentTimeToEntropy(0)},_touchCollector:function(t){var e=t.touches[0]||t.changedTouches[0],r=e.pageX||e.clientX,n=e.pageY||e.clientY;o.random.addEntropy([r,n],1,"touch"),this._addCurrentTimeToEntropy(0)},_loadTimeCollector:function(){this._addCurrentTimeToEntropy(2)},_addCurrentTimeToEntropy:function(t){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?o.random.addEntropy(window.performance.now(),t,"loadtime"):o.random.addEntropy((new Date).valueOf(),t,"loadtime")},_accelerometerCollector:function(t){var e=t.accelerationIncludingGravity.x||t.accelerationIncludingGravity.y||t.accelerationIncludingGravity.z;if(window.orientation){var r=window.orientation;"number"==typeof r&&o.random.addEntropy(r,1,"accelerometer")}e&&o.random.addEntropy(e,2,"accelerometer"),this._addCurrentTimeToEntropy(0)},_fireEvent:function(t,e){var r,n=o.random._callbacks[t],i=[];for(r in n)n.hasOwnProperty(r)&&i.push(n[r]);for(r=0;r<i.length;r++)i[r](e)}},o.random=new o.prng(6),function(){function e(){try{return r(70)}catch(t){return null}}try{var n,i,s;if("undefined"!=typeof t&&t.exports&&(i=e())&&i.randomBytes)n=i.randomBytes(128),n=new Uint32Array(new Uint8Array(n).buffer),o.random.addEntropy(n,1024,"crypto.randomBytes");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(s=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(s);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)return;window.msCrypto.getRandomValues(s)}o.random.addEntropy(s,1024,"crypto.getRandomValues")}}catch(a){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(a))}}(),o.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},_encrypt:function(t,e,r,n){r=r||{},n=n||{};var i,s,a,u=o.json,c=u._add({iv:o.random.randomWords(4,0)},u.defaults);if(u._add(c,r),a=c.adata,"string"==typeof c.salt&&(c.salt=o.codec.base64.toBits(c.salt)),"string"==typeof c.iv&&(c.iv=o.codec.base64.toBits(c.iv)),!o.mode[c.mode]||!o.cipher[c.cipher]||"string"==typeof t&&c.iter<=100||64!==c.ts&&96!==c.ts&&128!==c.ts||128!==c.ks&&192!==c.ks&&256!==c.ks||c.iv.length<2||c.iv.length>4)throw new o.exception.invalid("json encrypt: invalid parameters");return"string"==typeof t?(i=o.misc.cachedPbkdf2(t,c),t=i.key.slice(0,c.ks/32),c.salt=i.salt):o.ecc&&t instanceof o.ecc.elGamal.publicKey&&(i=t.kem(),c.kemtag=i.tag,t=i.key.slice(0,c.ks/32)),"string"==typeof e&&(e=o.codec.utf8String.toBits(e)),"string"==typeof a&&(c.adata=a=o.codec.utf8String.toBits(a)),s=new o.cipher[c.cipher](t),u._add(n,c),n.key=t,c.ct="ccm"===c.mode&&o.arrayBuffer&&o.arrayBuffer.ccm&&e instanceof ArrayBuffer?o.arrayBuffer.ccm.encrypt(s,e,c.iv,a,c.ts):o.mode[c.mode].encrypt(s,e,c.iv,a,c.ts),c},encrypt:function(){var t=o.json,e=t._encrypt.apply(t,arguments);return t.encode(e)},_decrypt:function(t,e,r,n){r=r||{},n=n||{};var i,s,a,u=o.json,c=u._add(u._add(u._add({},u.defaults),e),r,!0),f=c.adata;if("string"==typeof c.salt&&(c.salt=o.codec.base64.toBits(c.salt)),"string"==typeof c.iv&&(c.iv=o.codec.base64.toBits(c.iv)),!o.mode[c.mode]||!o.cipher[c.cipher]||"string"==typeof t&&c.iter<=100||64!==c.ts&&96!==c.ts&&128!==c.ts||128!==c.ks&&192!==c.ks&&256!==c.ks||!c.iv||c.iv.length<2||c.iv.length>4)throw new o.exception.invalid("json decrypt: invalid parameters");return"string"==typeof t?(s=o.misc.cachedPbkdf2(t,c),t=s.key.slice(0,c.ks/32),c.salt=s.salt):o.ecc&&t instanceof o.ecc.elGamal.secretKey&&(t=t.unkem(o.codec.base64.toBits(c.kemtag)).slice(0,c.ks/32)),"string"==typeof f&&(f=o.codec.utf8String.toBits(f)),a=new o.cipher[c.cipher](t),i="ccm"===c.mode&&o.arrayBuffer&&o.arrayBuffer.ccm&&c.ct instanceof ArrayBuffer?o.arrayBuffer.ccm.decrypt(a,c.ct,c.iv,c.tag,f,c.ts):o.mode[c.mode].decrypt(a,c.ct,c.iv,f,c.ts),u._add(n,c),n.key=t,1===r.raw?i:o.codec.utf8String.fromBits(i)},decrypt:function(t,e,r,n){var i=o.json;return i._decrypt(t,i.decode(e),r,n)},encode:function(t){var e,r="{",n="";for(e in t)if(t.hasOwnProperty(e)){if(!e.match(/^[a-z0-9]+$/i))throw new o.exception.invalid("json encode: invalid property name");switch(r+=n+'"'+e+'":',n=",",typeof t[e]){case"number":case"boolean":r+=t[e];break;case"string":r+='"'+escape(t[e])+'"';break;case"object":r+='"'+o.codec.base64.fromBits(t[e],0)+'"';break;default:throw new o.exception.bug("json encode: unsupported type")}}return r+"}"},decode:function(t){if(t=t.replace(/\s/g,""),!t.match(/^\{.*\}$/))throw new o.exception.invalid("json decode: this isn't json!");var e,r,n=t.replace(/^\{|\}$/g,"").split(/,/),i={};for(e=0;e<n.length;e++){if(!(r=n[e].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new o.exception.invalid("json decode: this isn't json!");null!=r[3]?i[r[2]]=parseInt(r[3],10):null!=r[4]?i[r[2]]=r[2].match(/^(ct|adata|salt|iv)$/)?o.codec.base64.toBits(r[4]):unescape(r[4]):null!=r[5]&&(i[r[2]]="true"===r[5])}return i},_add:function(t,e,r){if(void 0===t&&(t={}),void 0===e)return t;var n;for(n in e)if(e.hasOwnProperty(n)){if(r&&void 0!==t[n]&&t[n]!==e[n])throw new o.exception.invalid("required parameter overridden");t[n]=e[n]}return t},_subtract:function(t,e){var r,n={};for(r in t)t.hasOwnProperty(r)&&t[r]!==e[r]&&(n[r]=t[r]);return n},_filter:function(t,e){var r,n={};for(r=0;r<e.length;r++)void 0!==t[e[r]]&&(n[e[r]]=t[e[r]]);return n}},o.encrypt=o.json.encrypt,o.decrypt=o.json.decrypt,o.misc._pbkdf2Cache={},o.misc.cachedPbkdf2=function(t,e){var r,n,i,s,a=o.misc._pbkdf2Cache;return e=e||{},s=e.iter||1e3,n=a[t]=a[t]||{},r=n[s]=n[s]||{firstSalt:e.salt&&e.salt.length?e.salt.slice(0):o.random.randomWords(2,0)},i=void 0===e.salt?r.firstSalt:e.salt,r[i]=r[i]||o.misc.pbkdf2(t,i,e.iter),{key:r[i].slice(0),salt:i.slice(0)}},o.bn=function(t){this.initWith(t)},o.bn.prototype={radix:24,maxMul:8,_class:o.bn,copy:function(){return new this._class(this)},initWith:function(t){var e,r=0;switch(typeof t){case"object":this.limbs=t.limbs.slice(0);break;case"number":this.limbs=[t],this.normalize();break;case"string":for(t=t.replace(/^0x/,""),this.limbs=[],e=this.radix/4,r=0;r<t.length;r+=e)this.limbs.push(parseInt(t.substring(Math.max(t.length-r-e,0),t.length-r),16));break;default:this.limbs=[0]}return this},equals:function(t){"number"==typeof t&&(t=new this._class(t));var e,r=0;for(this.fullReduce(),t.fullReduce(),e=0;e<this.limbs.length||e<t.limbs.length;e++)r|=this.getLimb(e)^t.getLimb(e);return 0===r},getLimb:function(t){return t>=this.limbs.length?0:this.limbs[t]},greaterEquals:function(t){"number"==typeof t&&(t=new this._class(t));var e,r,n,i=0,o=0;for(e=Math.max(this.limbs.length,t.limbs.length)-1;e>=0;e--)r=this.getLimb(e),n=t.getLimb(e),o|=n-r&~i,i|=r-n&~o;return(o|~i)>>>31},toString:function(){this.fullReduce();var t,e,r="",n=this.limbs;for(t=0;t<this.limbs.length;t++){for(e=n[t].toString(16);t<this.limbs.length-1&&e.length<6;)e="0"+e;r=e+r}return"0x"+r},addM:function(t){"object"!=typeof t&&(t=new this._class(t));var e,r=this.limbs,n=t.limbs;for(e=r.length;e<n.length;e++)r[e]=0;for(e=0;e<n.length;e++)r[e]+=n[e];return this},doubleM:function(){var t,e,r=0,n=this.radix,i=this.radixMask,o=this.limbs;for(t=0;t<o.length;t++)e=o[t],e=e+e+r,o[t]=e&i,r=e>>n;return r&&o.push(r),this},halveM:function(){var t,e,r=0,n=this.radix,i=this.limbs;for(t=i.length-1;t>=0;t--)e=i[t],i[t]=e+r>>1,r=(1&e)<<n;return i[i.length-1]||i.pop(),this},subM:function(t){"object"!=typeof t&&(t=new this._class(t));var e,r=this.limbs,n=t.limbs;for(e=r.length;e<n.length;e++)r[e]=0;for(e=0;e<n.length;e++)r[e]-=n[e];return this},mod:function(t){var e=!this.greaterEquals(new o.bn(0));t=new o.bn(t).normalize();var r=new o.bn(this).normalize(),n=0;for(e&&(r=new o.bn(0).subM(r).normalize());r.greaterEquals(t);n++)t.doubleM();for(e&&(r=t.sub(r).normalize());n>0;n--)t.halveM(),r.greaterEquals(t)&&r.subM(t).normalize();return r.trim()},inverseMod:function(t){var e,r,n=new o.bn(1),i=new o.bn(0),s=new o.bn(this),a=new o.bn(t),u=1;if(!(1&t.limbs[0]))throw new o.exception.invalid("inverseMod: p must be odd");do for(1&s.limbs[0]&&(s.greaterEquals(a)||(e=s,s=a,a=e,e=n,n=i,i=e),s.subM(a),s.normalize(),n.greaterEquals(i)||n.addM(t),n.subM(i)),s.halveM(),1&n.limbs[0]&&n.addM(t),n.normalize(),n.halveM(),r=u=0;r<s.limbs.length;r++)u|=s.limbs[r];while(u);if(!a.equals(1))throw new o.exception.invalid("inverseMod: p and x must be relatively prime");return i},add:function(t){return this.copy().addM(t)},sub:function(t){return this.copy().subM(t)},mul:function(t){"number"==typeof t&&(t=new this._class(t));var e,r,n,i=this.limbs,o=t.limbs,s=i.length,a=o.length,u=new this._class,c=u.limbs,f=this.maxMul;for(e=0;e<this.limbs.length+t.limbs.length+1;e++)c[e]=0;for(e=0;s>e;e++){for(n=i[e],r=0;a>r;r++)c[e+r]+=n*o[r];--f||(f=this.maxMul,u.cnormalize())}return u.cnormalize().reduce()},square:function(){return this.mul(this)},power:function(t){t=new o.bn(t).normalize().trim().limbs;var e,r,n=new this._class(1),i=this;for(e=0;e<t.length;e++)for(r=0;r<this.radix&&(t[e]&1<<r&&(n=n.mul(i)),e!=t.length-1||t[e]>>r+1!=0);r++)i=i.square();return n},mulmod:function(t,e){return this.mod(e).mul(t.mod(e)).mod(e)},powermod:function(t,e){if(t=new o.bn(t),e=new o.bn(e),1==(1&e.limbs[0])){var r=this.montpowermod(t,e);if(0!=r)return r}var n,i,s=t.normalize().trim().limbs,a=new this._class(1),u=this;for(n=0;n<s.length;n++)for(i=0;i<this.radix&&(s[n]&1<<i&&(a=a.mulmod(u,e)),n!=s.length-1||s[n]>>i+1!=0);i++)u=u.mulmod(u,e);return a},montpowermod:function(t,e){t=new o.bn(t).normalize().trim(),e=new o.bn(e);var r,n,i,s,a,u=this.radix,c=new this._class(1),f=this.copy(),h=t.bitLength();for(i=new o.bn({limbs:e.copy().normalize().trim().limbs.map(function(){return 0})}),s=this.radix;s>0;s--)if(1==(e.limbs[e.limbs.length-1]>>s&1)){i.limbs[i.limbs.length-1]=1<<s;break}if(0==h)return this;a=18>h?1:48>h?3:144>h?4:768>h?5:6;for(var l=i.copy(),p=e.copy(),d=new o.bn(1),_=new o.bn(0),g=i.copy();g.greaterEquals(1);)g.halveM(),0==(1&d.limbs[0])?(d.halveM(),_.halveM()):(d.addM(p),d.halveM(),_.halveM(),_.addM(l));d=d.normalize(),_=_.normalize(),l.doubleM();var y=l.mulmod(l,e);if(!l.mul(d).sub(e.mul(_)).equals(1))return!1;var v=function(t){return m(t,y)},m=function(t,r){var n,o,a,c,f=(1<<s+1)-1;for(o=t.mul(r),a=o.mul(_),a.limbs=a.limbs.slice(0,i.limbs.length),a.limbs.length==i.limbs.length&&(a.limbs[i.limbs.length-1]&=f),a=a.mul(e),c=o.add(a).normalize().trim(),c.limbs=c.limbs.slice(i.limbs.length-1),n=0;n<c.limbs.length;n++)n>0&&(c.limbs[n-1]|=(c.limbs[n]&f)<<u-s-1),c.limbs[n]=c.limbs[n]>>s+1;return c.greaterEquals(e)&&c.subM(e),c},b=function(t){return m(t,1)};f=v(f),c=v(c);var w,E={},A=(1<<a-1)-1;for(E[1]=f.copy(),E[2]=m(f,f),w=1;A>=w;w++)E[2*w+1]=m(E[2*w-1],E[2]);var x=function(t,e){var r=e%t.radix;return(t.limbs[Math.floor(e/t.radix)]&1<<r)>>r};for(r=t.bitLength()-1;r>=0;)if(0==x(t,r))c=m(c,c),r-=1;else{for(var F=r-a+1;0==x(t,F);)F++;var C=0;for(n=F;r>=n;n++)C+=x(t,n)<<n-F,c=m(c,c);c=m(c,E[C]),r=F-1}return b(c)},trim:function(){var t,e=this.limbs;do t=e.pop();while(e.length&&0===t);return e.push(t),this},reduce:function(){return this},fullReduce:function(){return this.normalize()},normalize:function(){var t,e,r,n=0,i=this.placeVal,o=this.ipv,s=this.limbs,a=s.length,u=this.radixMask;for(t=0;a>t||0!==n&&-1!==n;t++)e=(s[t]||0)+n,r=s[t]=e&u,n=(e-r)*o;return-1===n&&(s[t-1]-=i),this},cnormalize:function(){var t,e,r,n=0,i=this.ipv,o=this.limbs,s=o.length,a=this.radixMask;for(t=0;s-1>t;t++)e=o[t]+n,r=o[t]=e&a,n=(e-r)*i;return o[t]+=n,this},toBits:function(t){this.fullReduce(),t=t||this.exponent||this.bitLength();var e=Math.floor((t-1)/24),r=o.bitArray,n=(t+7&-8)%this.radix||this.radix,i=[r.partial(n,this.getLimb(e))];for(e--;e>=0;e--)i=r.concat(i,[r.partial(Math.min(this.radix,t),this.getLimb(e))]),t-=this.radix;return i},bitLength:function(){this.fullReduce();for(var t=this.radix*(this.limbs.length-1),e=this.limbs[this.limbs.length-1];e;e>>>=1)t++;return t+7&-8}},o.bn.fromBits=function(t){var e=this,r=new e,n=[],i=o.bitArray,s=this.prototype,a=Math.min(this.bitLength||4294967296,i.bitLength(t)),u=a%s.radix||s.radix;for(n[0]=i.extract(t,0,u);a>u;u+=s.radix)n.unshift(i.extract(t,u,s.radix));return r.limbs=n,r},o.bn.prototype.ipv=1/(o.bn.prototype.placeVal=Math.pow(2,o.bn.prototype.radix)),o.bn.prototype.radixMask=(1<<o.bn.prototype.radix)-1,o.bn.pseudoMersennePrime=function(t,e){function r(t){this.initWith(t)}var n,i,s,a=r.prototype=new o.bn;for(s=a.modOffset=Math.ceil(i=t/a.radix),a.exponent=t,a.offset=[],a.factor=[],a.minOffset=s,a.fullMask=0,a.fullOffset=[],a.fullFactor=[],a.modulus=r.modulus=new o.bn(Math.pow(2,t)),a.fullMask=0|-Math.pow(2,t%a.radix),n=0;n<e.length;n++)a.offset[n]=Math.floor(e[n][0]/a.radix-i),a.fullOffset[n]=Math.ceil(e[n][0]/a.radix-i),a.factor[n]=e[n][1]*Math.pow(.5,t-e[n][0]+a.offset[n]*a.radix),a.fullFactor[n]=e[n][1]*Math.pow(.5,t-e[n][0]+a.fullOffset[n]*a.radix),a.modulus.addM(new o.bn(Math.pow(2,e[n][0])*e[n][1])),a.minOffset=Math.min(a.minOffset,-a.offset[n]);return a._class=r,a.modulus.cnormalize(),a.reduce=function(){var t,e,r,n,i=this.modOffset,o=this.limbs,s=this.offset,a=this.offset.length,u=this.factor;for(t=this.minOffset;o.length>i;){for(r=o.pop(),n=o.length,e=0;a>e;e++)o[n+s[e]]-=u[e]*r;t--,t||(o.push(0),this.cnormalize(),t=this.minOffset)}return this.cnormalize(),this},a._strongReduce=-1===a.fullMask?a.reduce:function(){var t,e,r=this.limbs,n=r.length-1;if(this.reduce(),n===this.modOffset-1){for(e=r[n]&this.fullMask,r[n]-=e,t=0;t<this.fullOffset.length;t++)r[n+this.fullOffset[t]]-=this.fullFactor[t]*e;this.normalize()}},a.fullReduce=function(){var t,e;for(this._strongReduce(),this.addM(this.modulus),this.addM(this.modulus),this.normalize(),this._strongReduce(),e=this.limbs.length;e<this.modOffset;e++)this.limbs[e]=0;for(t=this.greaterEquals(this.modulus),e=0;e<this.limbs.length;e++)this.limbs[e]-=this.modulus.limbs[e]*t;return this.cnormalize(),this},a.inverse=function(){return this.power(this.modulus.sub(2))},r.fromBits=o.bn.fromBits,r};var s=o.bn.pseudoMersennePrime;o.bn.prime={p127:s(127,[[0,-1]]),p25519:s(255,[[0,-19]]),p192k:s(192,[[32,-1],[12,-1],[8,-1],[7,-1],[6,-1],[3,-1],[0,-1]]),p224k:s(224,[[32,-1],[12,-1],[11,-1],[9,-1],[7,-1],[4,-1],[1,-1],[0,-1]]),p256k:s(256,[[32,-1],[9,-1],[8,-1],[7,-1],[6,-1],[4,-1],[0,-1]]),p192:s(192,[[0,-1],[64,-1]]),p224:s(224,[[0,1],[96,-1]]),p256:s(256,[[0,-1],[96,1],[192,1],[224,-1]]),p384:s(384,[[0,-1],[32,1],[96,-1],[128,-1]]),p521:s(521,[[0,-1]])},o.bn.random=function(t,e){"object"!=typeof t&&(t=new o.bn(t));for(var r,n,i=t.limbs.length,s=t.limbs[i-1]+1,a=new o.bn;;){do r=o.random.randomWords(i,e),r[i-1]<0&&(r[i-1]+=4294967296);while(Math.floor(r[i-1]/s)===Math.floor(4294967296/s));for(r[i-1]%=s,n=0;i-1>n;n++)r[n]&=t.radixMask;if(a.limbs=r,!a.greaterEquals(t))return a}},o.ecc={},o.ecc.point=function(t,e,r){void 0===e?this.isIdentity=!0:(e instanceof o.bn&&(e=new t.field(e)),r instanceof o.bn&&(r=new t.field(r)),this.x=e,this.y=r,this.isIdentity=!1),this.curve=t},o.ecc.point.prototype={toJac:function(){return new o.ecc.pointJac(this.curve,this.x,this.y,new this.curve.field(1))},mult:function(t){return this.toJac().mult(t,this).toAffine()},mult2:function(t,e,r){return this.toJac().mult2(t,this,e,r).toAffine()},multiples:function(){var t,e,r;if(void 0===this._multiples)for(r=this.toJac().doubl(),t=this._multiples=[new o.ecc.point(this.curve),this,r.toAffine()],e=3;16>e;e++)r=r.add(this),t.push(r.toAffine());return this._multiples},negate:function(){var t=new this.curve.field(0).sub(this.y).normalize().reduce();return new o.ecc.point(this.curve,this.x,t)},isValid:function(){return this.y.square().equals(this.curve.b.add(this.x.mul(this.curve.a.add(this.x.square()))))},toBits:function(){return o.bitArray.concat(this.x.toBits(),this.y.toBits())}},o.ecc.pointJac=function(t,e,r,n){void 0===e?this.isIdentity=!0:(this.x=e,this.y=r,this.z=n,this.isIdentity=!1),this.curve=t},o.ecc.pointJac.prototype={add:function(t){var e,r,n,i,s,a,u,c,f,h,l,p=this;if(p.curve!==t.curve)throw"sjcl.ecc.add(): Points must be on the same curve to add them!";return p.isIdentity?t.toJac():t.isIdentity?p:(e=p.z.square(),r=t.x.mul(e).subM(p.x),r.equals(0)?p.y.equals(t.y.mul(e.mul(p.z)))?p.doubl():new o.ecc.pointJac(p.curve):(n=t.y.mul(e.mul(p.z)).subM(p.y),i=r.square(),s=n.square(),a=r.square().mul(r).addM(p.x.add(p.x).mul(i)),u=s.subM(a),c=p.x.mul(i).subM(u).mul(n),f=p.y.mul(r.square().mul(r)),h=c.subM(f),l=p.z.mul(r),new o.ecc.pointJac(this.curve,u,h,l)))},doubl:function(){if(this.isIdentity)return this;var t=this.y.square(),e=t.mul(this.x.mul(4)),r=t.square().mul(8),n=this.z.square(),i=this.curve.a.toString()==new o.bn(-3).toString()?this.x.sub(n).mul(3).mul(this.x.add(n)):this.x.square().mul(3).add(n.square().mul(this.curve.a)),s=i.square().subM(e).subM(e),a=e.sub(s).mul(i).subM(r),u=this.y.add(this.y).mul(this.z);return new o.ecc.pointJac(this.curve,s,a,u)},toAffine:function(){if(this.isIdentity||this.z.equals(0))return new o.ecc.point(this.curve);var t=this.z.inverse(),e=t.square();return new o.ecc.point(this.curve,this.x.mul(e).fullReduce(),this.y.mul(e.mul(t)).fullReduce())
},mult:function(t,e){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs);var r,n,i=new o.ecc.point(this.curve).toJac(),s=e.multiples();for(r=t.length-1;r>=0;r--)for(n=o.bn.prototype.radix-4;n>=0;n-=4)i=i.doubl().doubl().doubl().doubl().add(s[t[r]>>n&15]);return i},mult2:function(t,e,r,n){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs),"number"==typeof r?r=[r]:void 0!==r.limbs&&(r=r.normalize().limbs);var i,s,a,u,c=new o.ecc.point(this.curve).toJac(),f=e.multiples(),h=n.multiples();for(i=Math.max(t.length,r.length)-1;i>=0;i--)for(a=0|t[i],u=0|r[i],s=o.bn.prototype.radix-4;s>=0;s-=4)c=c.doubl().doubl().doubl().doubl().add(f[a>>s&15]).add(h[u>>s&15]);return c},negate:function(){return this.toAffine().negate().toJac()},isValid:function(){var t=this.z.square(),e=t.square(),r=e.mul(t);return this.y.square().equals(this.curve.b.mul(r).add(this.x.mul(this.curve.a.mul(e).add(this.x.square()))))}},o.ecc.curve=function(t,e,r,n,i,s){this.field=t,this.r=new o.bn(e),this.a=new t(r),this.b=new t(n),this.G=new o.ecc.point(this,new t(i),new t(s))},o.ecc.curve.prototype.fromBits=function(t){var e=o.bitArray,r=this.field.prototype.exponent+7&-8,n=new o.ecc.point(this,this.field.fromBits(e.bitSlice(t,0,r)),this.field.fromBits(e.bitSlice(t,r,2*r)));if(!n.isValid())throw new o.exception.corrupt("not on the curve!");return n},o.ecc.curves={c192:new o.ecc.curve(o.bn.prime.p192,"0xffffffffffffffffffffffff99def836146bc9b1b4d22831",-3,"0x64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1","0x188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012","0x07192b95ffc8da78631011ed6b24cdd573f977a11e794811"),c224:new o.ecc.curve(o.bn.prime.p224,"0xffffffffffffffffffffffffffff16a2e0b8f03e13dd29455c5c2a3d",-3,"0xb4050a850c04b3abf54132565044b0b7d7bfd8ba270b39432355ffb4","0xb70e0cbd6bb4bf7f321390b94a03c1d356c21122343280d6115c1d21","0xbd376388b5f723fb4c22dfe6cd4375a05a07476444d5819985007e34"),c256:new o.ecc.curve(o.bn.prime.p256,"0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",-3,"0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b","0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),c384:new o.ecc.curve(o.bn.prime.p384,"0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973",-3,"0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef","0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7","0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),c521:new o.ecc.curve(o.bn.prime.p521,"0x1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409",-3,"0x051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","0xC6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","0x11839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650"),k192:new o.ecc.curve(o.bn.prime.p192k,"0xfffffffffffffffffffffffe26f2fc170f69466a74defd8d",0,3,"0xdb4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d","0x9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"),k224:new o.ecc.curve(o.bn.prime.p224k,"0x010000000000000000000000000001dce8d2ec6184caf0a971769fb1f7",0,5,"0xa1455b334df099df30fc28a169a467e9e47075a90f7e650eb6b7a45c","0x7e089fed7fba344282cafbd6f7e319f7c0b0bd59e2ca4bdb556d61a5"),k256:new o.ecc.curve(o.bn.prime.p256k,"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",0,7,"0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},o.ecc.basicKey={publicKey:function(t,e){this._curve=t,this._curveBitLength=t.r.bitLength(),this._point=e instanceof Array?t.fromBits(e):e,this.get=function(){var t=this._point.toBits(),e=o.bitArray.bitLength(t),r=o.bitArray.bitSlice(t,0,e/2),n=o.bitArray.bitSlice(t,e/2);return{x:r,y:n}}},secretKey:function(t,e){this._curve=t,this._curveBitLength=t.r.bitLength(),this._exponent=e,this.get=function(){return this._exponent.toBits()}}},o.ecc.basicKey.generateKeys=function(t){return function(e,r,n){if(e=e||256,"number"==typeof e&&(e=o.ecc.curves["c"+e],void 0===e))throw new o.exception.invalid("no such curve");n=n||o.bn.random(e.r,r);var i=e.G.mult(n);return{pub:new o.ecc[t].publicKey(e,i),sec:new o.ecc[t].secretKey(e,n)}}},o.ecc.elGamal={generateKeys:o.ecc.basicKey.generateKeys("elGamal"),publicKey:function(){o.ecc.basicKey.publicKey.apply(this,arguments)},secretKey:function(){o.ecc.basicKey.secretKey.apply(this,arguments)}},o.ecc.elGamal.publicKey.prototype={kem:function(t){var e=o.bn.random(this._curve.r,t),r=this._curve.G.mult(e).toBits(),n=o.hash.sha256.hash(this._point.mult(e).toBits());return{key:n,tag:r}}},o.ecc.elGamal.secretKey.prototype={unkem:function(t){return o.hash.sha256.hash(this._curve.fromBits(t).mult(this._exponent).toBits())},dh:function(t){return o.hash.sha256.hash(t._point.mult(this._exponent).toBits())},dhJavaEc:function(t){return t._point.mult(this._exponent).x.toBits()}},o.ecc.ecdsa={generateKeys:o.ecc.basicKey.generateKeys("ecdsa")},o.ecc.ecdsa.publicKey=function(){o.ecc.basicKey.publicKey.apply(this,arguments)},o.ecc.ecdsa.publicKey.prototype={verify:function(t,e,r){o.bitArray.bitLength(t)>this._curveBitLength&&(t=o.bitArray.clamp(t,this._curveBitLength));var n=o.bitArray,i=this._curve.r,s=this._curveBitLength,a=o.bn.fromBits(n.bitSlice(e,0,s)),u=o.bn.fromBits(n.bitSlice(e,s,2*s)),c=r?u:u.inverseMod(i),f=o.bn.fromBits(t).mul(c).mod(i),h=a.mul(c).mod(i),l=this._curve.G.mult2(f,h,this._point).x;if(a.equals(0)||u.equals(0)||a.greaterEquals(i)||u.greaterEquals(i)||!l.equals(a)){if(void 0===r)return this.verify(t,e,!0);throw new o.exception.corrupt("signature didn't check out")}return!0}},o.ecc.ecdsa.secretKey=function(){o.ecc.basicKey.secretKey.apply(this,arguments)},o.ecc.ecdsa.secretKey.prototype={sign:function(t,e,r,n){o.bitArray.bitLength(t)>this._curveBitLength&&(t=o.bitArray.clamp(t,this._curveBitLength));var i=this._curve.r,s=i.bitLength(),a=n||o.bn.random(i.sub(1),e).add(1),u=this._curve.G.mult(a).x.mod(i),c=o.bn.fromBits(t).add(u.mul(this._exponent)),f=r?c.inverseMod(i).mul(a).mod(i):c.mul(a.inverseMod(i)).mod(i);return o.bitArray.concat(u.toBits(s),f.toBits(s))}},o.keyexchange.srp={makeVerifier:function(t,e,r,n){var i;return i=o.keyexchange.srp.makeX(t,e,r),i=o.bn.fromBits(i),n.g.powermod(i,n.N)},makeX:function(t,e,r){var n=o.hash.sha1.hash(t+":"+e);return o.hash.sha1.hash(o.bitArray.concat(r,n))},knownGroup:function(t){return"string"!=typeof t&&(t=t.toString()),o.keyexchange.srp._didInitKnownGroups||o.keyexchange.srp._initKnownGroups(),o.keyexchange.srp._knownGroups[t]},_didInitKnownGroups:!1,_initKnownGroups:function(){var t,e,r;for(t=0;t<o.keyexchange.srp._knownGroupSizes.length;t++)e=o.keyexchange.srp._knownGroupSizes[t].toString(),r=o.keyexchange.srp._knownGroups[e],r.N=new o.bn(r.N),r.g=new o.bn(r.g);o.keyexchange.srp._didInitKnownGroups=!0},_knownGroupSizes:[1024,1536,2048,3072,4096,6144,8192],_knownGroups:{1024:{N:"EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",g:2},1536:{N:"9DEF3CAFB939277AB1F12A8617A47BBBDBA51DF499AC4C80BEEEA9614B19CC4D5F4F5F556E27CBDE51C6A94BE4607A291558903BA0D0F84380B655BB9A22E8DCDF028A7CEC67F0D08134B1C8B97989149B609E0BE3BAB63D47548381DBC5B1FC764E3F4B53DD9DA1158BFD3E2B9C8CF56EDF019539349627DB2FD53D24B7C48665772E437D6C7F8CE442734AF7CCB7AE837C264AE3A9BEB87F8A2FE9B8B5292E5A021FFF5E91479E8CE7A28C2442C6F315180F93499A234DCF76E3FED135F9BB",g:2},2048:{N:"AC6BDB41324A9A9BF166DE5E1389582FAF72B6651987EE07FC3192943DB56050A37329CBB4A099ED8193E0757767A13DD52312AB4B03310DCD7F48A9DA04FD50E8083969EDB767B0CF6095179A163AB3661A05FBD5FAAAE82918A9962F0B93B855F97993EC975EEAA80D740ADBF4FF747359D041D5C33EA71D281E446B14773BCA97B43A23FB801676BD207A436C6481F1D2B9078717461A5B9D32E688F87748544523B524B0D57D5EA77A2775D2ECFA032CFBDBF52FB3786160279004E57AE6AF874E7303CE53299CCC041C7BC308D82A5698F3A8D0C38271AE35F8E9DBFBB694B5C803D89F7AE435DE236D525F54759B65E372FCD68EF20FA7111F9E4AFF73",g:2},3072:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",g:5},4096:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934063199FFFFFFFFFFFFFFFF",g:5},6144:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DCC4024FFFFFFFFFFFFFFFF",g:5},8192:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DBE115974A3926F12FEE5E438777CB6A932DF8CD8BEC4D073B931BA3BC832B68D9DD300741FA7BF8AFC47ED2576F6936BA424663AAB639C5AE4F5683423B4742BF1C978238F16CBE39D652DE3FDB8BEFC848AD922222E04A4037C0713EB57A81A23F0C73473FC646CEA306B4BCBC8862F8385DDFA9D4B7FA2C087E879683303ED5BDD3A062B3CF5B3A278A66D2A13F83F44F82DDF310EE074AB6A364597E899A0255DC164F31CC50846851DF9AB48195DED7EA1B1D510BD7EE74D73FAF36BC31ECFA268359046F4EB879F924009438B481C6CD7889A002ED5EE382BC9190DA6FC026E479558E4475677E9AA9E3050E2765694DFC81F56E880B96E7160C980DD98EDD3DFFFFFFFFFFFFFFFFF",g:19}}},o.arrayBuffer=o.arrayBuffer||{},"undefined"==typeof ArrayBuffer&&!function(t){"use strict";t.ArrayBuffer=function(){},t.DataView=function(){}}(this),o.arrayBuffer.ccm={mode:"ccm",defaults:{tlen:128},compat_encrypt:function(t,e,r,n,i){var s,a,u=o.codec.arrayBuffer.fromBits(e,!0,16),c=o.bitArray.bitLength(e)/8;return i=i||64,n=n||[],s=o.arrayBuffer.ccm.encrypt(t,u,r,n,i,c),a=o.codec.arrayBuffer.toBits(s.ciphertext_buffer),a=o.bitArray.clamp(a,8*c),o.bitArray.concat(a,s.tag)},compat_decrypt:function(t,e,r,n,i){i=i||64,n=n||[];var s=o.bitArray,a=s.bitLength(e),u=s.clamp(e,a-i),c=s.bitSlice(e,a-i),f=o.codec.arrayBuffer.fromBits(u,!0,16),h=o.arrayBuffer.ccm.decrypt(t,f,r,c,n,i,(a-i)/8);return o.bitArray.clamp(o.codec.arrayBuffer.toBits(h),a-i)},encrypt:function(t,e,r,n,i,s){var a,u,c=o.bitArray,f=c.bitLength(r)/8;for(n=n||[],i=i||o.arrayBuffer.ccm.defaults.tlen,s=s||e.byteLength,i=Math.ceil(i/8),u=2;4>u&&s>>>8*u;u++);return 15-f>u&&(u=15-f),r=c.clamp(r,8*(15-u)),a=o.arrayBuffer.ccm._computeTag(t,e,r,n,i,s,u),a=o.arrayBuffer.ccm._ctrMode(t,e,r,a,i,u),{ciphertext_buffer:e,tag:a}},decrypt:function(t,e,r,n,i,s,a){var u,c,f,h=o.bitArray,l=h.bitLength(r)/8;for(i=i||[],s=s||o.arrayBuffer.ccm.defaults.tlen,a=a||e.byteLength,s=Math.ceil(s/8),f=2;4>f&&a>>>8*f;f++);if(15-l>f&&(f=15-l),r=h.clamp(r,8*(15-f)),u=o.arrayBuffer.ccm._ctrMode(t,e,r,n,s,f),c=o.arrayBuffer.ccm._computeTag(t,e,r,i,s,a,f),!o.bitArray.equal(u,c))throw new o.exception.corrupt("ccm: tag doesn't match");return e},_computeTag:function(t,e,r,n,i,s,a){{var u,c,f;o.bitArray}if(c=o.mode.ccm._macAdditionalData(t,n,r,i,s,a),0!==e.byteLength){for(f=new DataView(e),u=s;u<e.byteLength;u++)f.setUint8(u,0);for(u=0;u<f.byteLength;u+=16)c[0]^=f.getUint32(u),c[1]^=f.getUint32(u+4),c[2]^=f.getUint32(u+8),c[3]^=f.getUint32(u+12),c=t.encrypt(c)}return o.bitArray.clamp(c,8*i)},_ctrMode:function(t,e,r,n,i,s){var a,u,c,f,h,l,p,d,_=o.bitArray,g=_._xor4,y=e.byteLength/50,v=y;if(u=new DataView(new ArrayBuffer(16)),u=_.concat([_.partial(8,s-1)],r).concat([0,0,0]).slice(0,4),n=_.bitSlice(g(n,t.encrypt(u)),0,8*i),u[3]++,0===u[3]&&u[2]++,0!==e.byteLength)for(a=new DataView(e),d=0;d<a.byteLength;d+=16)d>y&&(o.mode.ccm._callProgressListener(d/e.byteLength),y+=v),p=t.encrypt(u),c=a.getUint32(d),f=a.getUint32(d+4),h=a.getUint32(d+8),l=a.getUint32(d+12),a.setUint32(d,c^p[0]),a.setUint32(d+4,f^p[1]),a.setUint32(d+8,h^p[2]),a.setUint32(d+12,l^p[3]),u[3]++,0===u[3]&&u[2]++;return n}},"undefined"==typeof ArrayBuffer&&!function(t){"use strict";t.ArrayBuffer=function(){},t.DataView=function(){}}(this),o.codec.arrayBuffer={fromBits:function(t,e,r){var n,i,s,a,u;if(e=void 0==e?!0:e,r=r||8,0===t.length)return new ArrayBuffer(0);if(s=o.bitArray.bitLength(t)/8,o.bitArray.bitLength(t)%8!==0)throw new o.exception.invalid("Invalid bit size, must be divisble by 8 to fit in an arraybuffer correctly");for(e&&s%r!==0&&(s+=r-s%r),a=new DataView(new ArrayBuffer(4*t.length)),i=0;i<t.length;i++)a.setUint32(4*i,t[i]<<32);if(n=new DataView(new ArrayBuffer(s)),n.byteLength===a.byteLength)return a.buffer;for(u=a.byteLength<n.byteLength?a.byteLength:n.byteLength,i=0;u>i;i++)n.setUint8(i,a.getUint8(i));return n.buffer},toBits:function(t){var e,r,n,i,s=[];if(0===t.byteLength)return[];n=new DataView(t),r=n.byteLength-n.byteLength%4;for(var e=0;r>e;e+=4)s.push(n.getUint32(e));if(n.byteLength%4!=0){i=new DataView(new ArrayBuffer(4));for(var e=0,a=n.byteLength%4;a>e;e++)i.setUint8(e+4-a,n.getUint8(r+e));s.push(o.bitArray.partial(n.byteLength%4*8,i.getUint32(0)))}return s},hexDumpBuffer:function(t){for(var e=new DataView(t),r="",n=function(t,e){return t+="",t.length>=e?t:new Array(e-t.length+1).join("0")+t},i=0;i<e.byteLength;i+=2)i%16==0&&(r+="\n"+i.toString(16)+"	"),r+=n(e.getUint16(i).toString(16),4)+" ";void 0===typeof console&&(console=console||{log:function(){}}),console.log(r.toUpperCase())}},function(){function t(t,e,r){return t^e^r}function e(t,e,r){return t&e|~t&r}function r(t,e,r){return(t|~e)^r}function n(t,e,r){return t&r|e&~r}function i(t,e,r){return t^(e|~r)}function s(t,e){return t<<e|t>>>32-e}function a(t){return(255&t)<<24|(65280&t)<<8|(t&255<<16)>>>8|(t&255<<24)>>>24}function u(o){for(var a,u=this._h[0],c=this._h[1],l=this._h[2],p=this._h[3],v=this._h[4],m=this._h[0],b=this._h[1],w=this._h[2],E=this._h[3],A=this._h[4],x=0;16>x;++x)a=s(u+t(c,l,p)+o[d[x]]+f[x],g[x])+v,u=v,v=p,p=s(l,10),l=c,c=a,a=s(m+i(b,w,E)+o[_[x]]+h[x],y[x])+A,m=A,A=E,E=s(w,10),w=b,b=a;for(;32>x;++x)a=s(u+e(c,l,p)+o[d[x]]+f[x],g[x])+v,u=v,v=p,p=s(l,10),l=c,c=a,a=s(m+n(b,w,E)+o[_[x]]+h[x],y[x])+A,m=A,A=E,E=s(w,10),w=b,b=a;for(;48>x;++x)a=s(u+r(c,l,p)+o[d[x]]+f[x],g[x])+v,u=v,v=p,p=s(l,10),l=c,c=a,a=s(m+r(b,w,E)+o[_[x]]+h[x],y[x])+A,m=A,A=E,E=s(w,10),w=b,b=a;for(;64>x;++x)a=s(u+n(c,l,p)+o[d[x]]+f[x],g[x])+v,u=v,v=p,p=s(l,10),l=c,c=a,a=s(m+e(b,w,E)+o[_[x]]+h[x],y[x])+A,m=A,A=E,E=s(w,10),w=b,b=a;for(;80>x;++x)a=s(u+i(c,l,p)+o[d[x]]+f[x],g[x])+v,u=v,v=p,p=s(l,10),l=c,c=a,a=s(m+t(b,w,E)+o[_[x]]+h[x],y[x])+A,m=A,A=E,E=s(w,10),w=b,b=a;a=this._h[1]+l+E,this._h[1]=this._h[2]+p+A,this._h[2]=this._h[3]+v+m,this._h[3]=this._h[4]+u+b,this._h[4]=this._h[0]+c+w,this._h[0]=a}o.hash.ripemd160=function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},o.hash.ripemd160.hash=function(t){return(new o.hash.ripemd160).update(t).finalize()},o.hash.ripemd160.prototype={reset:function(){return this._h=c.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=o.codec.utf8String.toBits(t));var e,r=this._buffer=o.bitArray.concat(this._buffer,t),n=this._length,i=this._length=n+o.bitArray.bitLength(t);for(e=512+n&-512;i>=e;e+=512){for(var s=r.splice(0,16),c=0;16>c;++c)s[c]=a(s[c]);u.call(this,s)}return this},finalize:function(){var t=o.bitArray.concat(this._buffer,[o.bitArray.partial(1,1)]),e=(this._length+1)%512,r=(e>448?512:448)-e%448,n=r%32;for(n>0&&(t=o.bitArray.concat(t,[o.bitArray.partial(n,0)]));r>=32;r-=32)t.push(0);for(t.push(a(0|this._length)),t.push(a(Math.floor(this._length/4294967296)));t.length;){for(var i=t.splice(0,16),s=0;16>s;++s)i[s]=a(i[s]);u.call(this,i)}var c=this._h;this.reset();for(var s=0;5>s;++s)c[s]=a(c[s]);return c}};for(var c=[1732584193,4023233417,2562383102,271733878,3285377520],f=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0],l=4;l>=0;--l)for(var p=1;16>p;++p)f.splice(l,0,f[l]),h.splice(l,0,h[l]);var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}()},function(t,e,r){"use strict";function n(t,e){a(!s.isNull(t)&&!isNaN(t),e)}function i(t,e){a(t),a.strictEqual(typeof t,"object",e),a.strictEqual(typeof t.TakerPays,"object",e),n(t.TakerGets,e)}function o(t,e,r,n,i,o){this._currencyGets=t,this._currencyPays=e,this._issuerGets=i,this._issuerPays=o,this.legOneOffers=s.cloneDeep(r),this.legTwoOffers=s.cloneDeep(n),this._ownerFundsLeftover={}}var s=r(42),a=r(38),u=r(9).UInt160,c=r(3).Amount,f=r(54);o.prototype.calculate=function(){var t=0,e=0,r=[];for(this.clearOwnerFundsLeftover();this.legOneOffers[t]&&this.legTwoOffers[e];){var n=this.legOneOffers[t],i=this.legTwoOffers[e],o=this.getLeftoverOwnerFunds(n.Account),s=void 0;n.Account===i.Account?this.unclampLegOneOwnerFunds(n):n.is_fully_funded||o.is_zero()||this.adjustLegOneFundedAmount(n);var a=f.getOfferTakerGetsFunded(n),u=f.getOfferTakerPaysFunded(i);a.is_zero()?t++:u.is_zero()?e++:(a.compareTo(u)>0?(s=this.getAutobridgedOfferWithClampedLegOne(n,i),e++):u.compareTo(a)>0?(s=this.getAutobridgedOfferWithClampedLegTwo(n,i),t++):(s=this.getAutobridgedOfferWithoutClamps(n,i),t++,e++),r.push(s))}return r},o.prototype.getAutobridgedOfferWithClampedLegOne=function(t,e){var r=f.getOfferTakerGetsFunded(t),n=f.getOfferTakerPaysFunded(e),i=f.getOfferQuality(t,this._currencyGets),o=f.getOfferTakerGetsFunded(e),s=n.multiply(i);if(t.Account===e.Account){var a=f.getOfferTakerGets(t),u=a.subtract(n);this.setLegOneTakerGets(t,u),this.clampLegOneOwnerFunds(t)}else{var c=r.subtract(n);this.setLegOneTakerGetsFunded(t,c)}return this.formatAutobridgedOffer(o,s)},o.prototype.getAutobridgedOfferWithClampedLegTwo=function(t,e){var r=f.getOfferTakerGetsFunded(t),n=f.getOfferTakerPaysFunded(e),i=f.getOfferQuality(e,this._currencyGets),o=r.divide(i),s=f.getOfferTakerPaysFunded(t);return e.taker_gets_funded=f.getOfferTakerGetsFunded(e).subtract(o).to_text(),e.taker_pays_funded=n.subtract(r).to_text(),this.formatAutobridgedOffer(o,s)},o.prototype.getAutobridgedOfferWithoutClamps=function(t,e){var r=f.getOfferTakerGetsFunded(e),n=f.getOfferTakerPaysFunded(t);return this.formatAutobridgedOffer(r,n)},o.prototype.clearOwnerFundsLeftover=function(){this._ownerFundsLeftover={}},o.prototype.resetOwnerFundsLeftover=function(t){return a(u.is_valid(t),"Account is invalid"),this._ownerFundsLeftover[t]=f.normalizeAmount("0"),this._ownerFundsLeftover[t]},o.prototype.getLeftoverOwnerFunds=function(t){a(u.is_valid(t),"Account is invalid");var e=this._ownerFundsLeftover[t];return e||(e=f.normalizeAmount("0")),e},o.prototype.addLeftoverOwnerFunds=function(t,e){return a(u.is_valid(t),"Account is invalid"),a(e instanceof c,"Amount is invalid"),this._ownerFundsLeftover[t]=this.getLeftoverOwnerFunds(t).add(e),this._ownerFundsLeftover[t]},o.prototype.setLeftoverOwnerFunds=function(t,e){a(u.is_valid(t),"Account is invalid"),a(e instanceof c,"Amount is invalid"),this._ownerFundsLeftover[t]=e},o.prototype.formatAutobridgedOffer=function(t,e){a(t instanceof c,"Autobridged taker gets is invalid"),a(e instanceof c,"Autobridged taker pays is invalid");var r={},n=e.divide(t);return r.TakerGets={value:t.to_text(),currency:this._currencyGets.to_hex(),issuer:this._issuerGets},r.TakerPays={value:e.to_text(),currency:this._currencyPays.to_hex(),issuer:this._issuerPays},r.quality=n.to_text(),r.taker_gets_funded=r.TakerGets.value,r.taker_pays_funded=r.TakerPays.value,r.autobridged=!0,r.BookDirectory=f.convertOfferQualityToHex(n),r},o.prototype.unclampLegOneOwnerFunds=function(t){i(t,"Leg one offer is invalid"),t.initTakerGetsFunded=f.getOfferTakerGetsFunded(t),this.setLegOneTakerGetsFunded(t,f.getOfferTakerGets(t))},o.prototype.clampLegOneOwnerFunds=function(t){i(t,"Leg one offer is invalid");var e=f.getOfferTakerGets(t);if(e.compareTo(t.initTakerGetsFunded)>0)this.setLegOneTakerGetsFunded(t,t.initTakerGetsFunded);else{var r=t.initTakerGetsFunded.subtract(e);this.setLegOneTakerGetsFunded(t,e),this.addLeftoverOwnerFunds(t.Account,r)}},o.prototype.adjustLegOneFundedAmount=function(t){i(t,"Leg one offer is invalid"),a(!t.is_fully_funded,"Leg one offer cannot be fully funded");var e=f.getOfferTakerGetsFunded(t).add(this.getLeftoverOwnerFunds(t.Account));if(e.compareTo(f.getOfferTakerGets(t))>=0){var r=f.getOfferTakerGets(t),n=e.subtract(r);this.setLegOneTakerGetsFunded(t,r),this.setLeftoverOwnerFunds(t.Account,n)}else this.setLegOneTakerGetsFunded(t,e),this.resetOwnerFundsLeftover(t.Account)},o.prototype.setLegOneTakerGetsFunded=function(t,e){i(t,"Leg one offer is invalid"),a(e instanceof c,"Taker gets funded is invalid"),t.taker_gets_funded=e.to_text(),t.taker_pays_funded=e.multiply(f.getOfferQuality(t,this._currencyGets)).to_text(),t.taker_gets_funded===t.TakerGets.value&&(t.is_fully_funded=!0)},o.prototype.setLegOneTakerGets=function(t,e){i(t,"Leg one offer is invalid"),a(e instanceof c,"Taker gets funded is invalid");var r=f.getOfferQuality(t,this._currencyGets);t.TakerGets=e.to_text(),t.TakerPays=e.multiply(r)},t.exports=o},function(t,e,r){"use strict";function n(t,e){o(!i.isNull(t)&&!isNaN(t),e)}var i=r(42),o=r(38),s=r(13).SerializedObject,a=r(26),u=r(3).Amount,c="/000/rrrrrrrrrrrrrrrrrrrrrhoLvTp",f={};f.getOfferTakerGetsFunded=function(t){return n(t.taker_gets_funded,"Taker gets funded is invalid"),u.from_json(t.taker_gets_funded+c)},f.getOfferTakerPaysFunded=function(t){return n(t.taker_pays_funded,"Taker gets funded is invalid"),u.from_json(t.taker_pays_funded+c)},f.getOfferTakerGets=function(t){return o(typeof t,"object","Offer is invalid"),u.from_json(t.TakerGets+c)},f.getOfferQuality=function(t,e){var r;return r=e.has_interest()?u.from_json(t.TakerPays).ratio_human(t.TakerGets,{reference_date:new Date}):u.from_json(t.quality+c)},f.convertOfferQualityToHex=function(t){o(t instanceof u,"Quality is not an amount");var e=new s;return a.Quality.serialize(e,t.to_text()+c),e.to_hex()},f.normalizeAmount=function(t){return u.from_json(t+c)},t.exports=f},function(t,e,r){"use strict";var n=r(52);n.ecc.point.prototype.isValidPoint=function(){var t=this,e=t.curve.field.modulus;return t.isIdentity?!1:new n.bn(1).greaterEquals(t.x)&&!t.x.equals(1)||t.x.greaterEquals(e.sub(1))&&!t.x.equals(1)?!1:new n.bn(1).greaterEquals(t.y)&&!t.y.equals(1)||t.y.greaterEquals(e.sub(1))&&!t.y.equals(1)?!1:t.isOnCurve()?!0:!1},n.ecc.point.prototype.isOnCurve=function(){var t=this,e=t.curve.a,r=t.curve.b,n=t.curve.field.modulus,i=t.y.mul(t.y).mod(n),o=t.x.mul(t.x).mul(t.x).add(e.mul(t.x)).add(r).mod(n);return i.equals(o)},n.ecc.point.prototype.toString=function(){return"("+this.x.toString()+", "+this.y.toString()+")"},n.ecc.pointJac.prototype.toString=function(){return"("+this.x.toString()+", "+this.y.toString()+", "+this.z.toString()+")"}},function(t,e,r){"use strict";var n=r(52);n.ecc.point.prototype.toBytesCompressed=function(){var t="0x0"===this.y.mod(2).toString()?2:3;return[t].concat(n.codec.bytes.fromBits(this.x.toBits()))},n.ecc.pointJac.prototype.add=function(t){var e=this;if(e.curve!==t.curve)throw"sjcl.ecc.add(): Points must be on the same curve to add them!";if(e.isIdentity)return t.toJac();if(t.isIdentity)return e;var r=e.z.square(),i=t.x.mul(r).subM(e.x),o=t.y.mul(e.z).mul(r);if(i.equals(0))return e.y.equals(t.y.mul(r.mul(e.z)))?e.doubl():new n.ecc.pointJac(e.curve);var s=i.square(),a=s.copy().doubleM().doubleM(),u=i.mul(a),c=o.sub(e.y).doubleM(),f=e.x.mul(a),h=c.square().subM(u).subM(f.copy().doubleM()),l=c.mul(f.sub(h)).subM(e.y.mul(u).doubleM()),p=e.z.add(i).square().subM(r).subM(s);return new n.ecc.pointJac(this.curve,h,l,p)},n.ecc.pointJac.prototype.doubl=function(){if(this.isIdentity)return this;var t=this.x.square(),e=this.y.square(),r=e.square(),i=this.x.add(e).square().subM(t).subM(r).doubleM(),o=t.mul(3),s=o.square(),a=s.sub(i.copy().doubleM()),u=o.mul(i.sub(a)).subM(r.doubleM().doubleM().doubleM()),c=this.z.mul(this.y).doubleM();return new n.ecc.pointJac(this.curve,a,u,c)},n.ecc.curves.c256=n.ecc.curves.k256},function(t,e,r){"use strict";var n=r(52);n.bn.ZERO=new n.bn(0),n.bn.prototype.divRem=function(t){"object"!=typeof t&&(t=new this._class(t));var e=this.abs(),r=t.abs(),i=new this._class(0),o=0;if(!e.greaterEquals(r))return[new n.bn(0),this.copy()];if(e.equals(r))return[new n.bn(1),new n.bn(0)];for(;e.greaterEquals(r);o++)r.doubleM();for(;o>0;o--)i.doubleM(),r.halveM(),e.greaterEquals(r)&&(i.addM(1),e.subM(t).normalize());return[i,e]},n.bn.prototype.divRound=function(t){var e=this.divRem(t),r=e[0],n=e[1];return n.doubleM().greaterEquals(t)&&r.addM(1),r},n.bn.prototype.div=function(t){var e=this.divRem(t);return e[0]},n.bn.prototype.sign=function(){return this.greaterEquals(n.bn.ZERO)?1:-1},n.bn.prototype.neg=function(){return n.bn.ZERO.sub(this)},n.bn.prototype.abs=function(){return-1===this.sign()?this.neg():this},n.bn.prototype.shiftRight=function(t){if("number"!=typeof t)throw new Error("shiftRight expects a number");if(t=+t,0>t)return this.shiftLeft(t);for(var e=new n.bn(this);t>=this.radix;)e.limbs.shift(),t-=this.radix;for(;t--;)e.halveM();return e},n.bn.prototype.shiftLeft=function(t){if("number"!=typeof t)throw new Error("shiftLeft expects a number");if(t=+t,0>t)return this.shiftRight(t);for(var e=new n.bn(this);t>=this.radix;)e.limbs.unshift(0),t-=this.radix;for(;t--;)e.doubleM();return e},n.bn.prototype.toNumber=function(){return 0|this.limbs[0]},n.bn.prototype.testBit=function(t){var e=Math.floor(t/this.radix),r=t%this.radix;return e>=this.limbs.length?0:this.limbs[e]>>>r&1},n.bn.prototype.setBitM=function(t){for(var e=Math.floor(t/this.radix),r=t%this.radix;e>=this.limbs.length;)this.limbs.push(0);return this.limbs[e]|=1<<r,this.cnormalize(),this},n.bn.prototype.modInt=function(t){return this.toNumber()%t}},function(t,e,r){"use strict";var n=r(52);n.ecc.ecdsa.secretKey.prototype.sign=function(t,e,r){var i,o=this._curve.r,s=o.bitLength();i="object"==typeof r&&r.length>0&&"number"==typeof r[0]?r:"string"==typeof r&&/^[0-9a-fA-F]+$/.test(r)?n.bn.fromBits(n.codec.hex.toBits(r)):n.bn.random(o.sub(1),e).add(1);var a=this._curve.G.mult(i).x.mod(o),u=n.bn.fromBits(t).add(a.mul(this._exponent)).mul(i.inverseMod(o)).mod(o);return n.bitArray.concat(a.toBits(s),u.toBits(s))},n.ecc.ecdsa.publicKey.prototype.verify=function(t,e){var r=n.bitArray,i=this._curve.r,o=i.bitLength(),s=n.bn.fromBits(r.bitSlice(e,0,o)),a=n.bn.fromBits(r.bitSlice(e,o,2*o)),u=a.inverseMod(i),c=n.bn.fromBits(t).mul(u).mod(i),f=s.mul(u).mod(i),h=this._curve.G.mult2(c,f,this._point).x;if(s.equals(0)||a.equals(0)||s.greaterEquals(i)||a.greaterEquals(i)||!h.equals(s))throw new n.exception.corrupt("signature didn't check out");return!0}},function(t,e,r){"use strict";var n=r(52);n.ecc.ecdsa.secretKey.prototype.canonicalizeSignature=function(t){var e=n.bitArray,r=this._curve.r,i=r.bitLength(),o=n.bn.fromBits(e.bitSlice(t,0,i)),s=n.bn.fromBits(e.bitSlice(t,i,2*i));return r.copy().halveM().greaterEquals(s)||(s=r.sub(s)),e.concat(o.toBits(i),s.toBits(i))
}},function(t,e,r){"use strict";var n=r(52);n.ecc.ecdsa.secretKey.prototype.signDER=function(t,e){return this.encodeDER(this.sign(t,e))},n.ecc.ecdsa.secretKey.prototype.encodeDER=function(t){for(var e=n.bitArray,r=this._curve.r,i=r.bitLength(),o=n.codec.bytes.fromBits(e.bitSlice(t,0,i)),s=n.codec.bytes.fromBits(e.bitSlice(t,i,2*i));!o[0]&&o.length;)o.shift();for(;!s[0]&&s.length;)s.shift();128&o[0]&&o.unshift(0),128&s[0]&&s.unshift(0);var a=[].concat(48,4+o.length+s.length,2,o.length,o,2,s.length,s);return n.codec.bytes.toBits(a)}},function(t,e,r){"use strict";function n(t,e){var r=t.r.bitLength();return{r:a.bn.fromBits(a.bitArray.bitSlice(e,0,r)),s:a.bn.fromBits(a.bitArray.bitSlice(e,r,a.bitArray.bitLength(e)))}}function i(t,e,r,n,i){var o=t.r;if(new a.bn(1).greaterEquals(r)||r.greaterEquals(new a.bn(o)))return!1;if(new a.bn(1).greaterEquals(n)||n.greaterEquals(new a.bn(o)))return!1;var s=n.inverseMod(o),u=e.mul(s).mod(o),c=r.mul(s).mod(o),f=t.G.mult2(u,c,i);return r.equals(f.x.mod(o))}function o(t,e,r,n,o){var s=t.r,c=t.field.modulus,f=1&o,h=(2&o)>>1;u||(u=c.add(1).div(4));var l=void 0;l=h?e.add(s):e;var p=l.mul(l).mul(l).add(t.a.mul(l)).add(t.b).mod(c),d=p.powermod(u,c),_=void 0,g=d.mod(2).equals(0);_=g&&!f||!g&&f?d:c.sub(d);var y=new a.ecc.point(t,l,_);if(!y.isValidPoint())throw new a.exception.corrupt("point R. Not a valid point on the curve. Cannot recover public key");var v=a.bn.fromBits(n),m=new a.bn(0).sub(v).mod(s),b=e.inverseMod(s),w=y.mult2(r,m,t.G).mult(b);if(!w.isValidPoint())throw new a.exception.corrupt("public_key_point. Not a valid point on the curve. Cannot recover public key");if(!i(t,v,e,r,w))throw new a.exception.corrupt("cannot recover public key");return w}function s(t,e,r,n,i){for(var s=i.toBits(),u=0;4>u;u++){var c=void 0;try{c=o(t,e,r,n,u)}catch(f){continue}if(a.bitArray.equal(c.toBits(),s))return u}throw new a.exception.bug("unable to calculate recovery factor from signature")}var a=r(52),u=void 0;a.ecc.ecdsa.secretKey.prototype.signWithRecoverablePublicKey=function(t,e,r){var i=this,o=void 0;if(!("object"==typeof t&&t.length>0&&"number"==typeof t[0]))throw new a.exception.invalid("hash. Must be a bitArray");o=t;var u=i.sign(o,e,r),c=i.canonicalizeSignature(u),f=n(i._curve,c),h=i._curve.G.mult(a.bn.fromBits(i.get())),l=s(i._curve,f.r,f.s,o,h),p=l+27,d=a.bitArray.concat([p],c);return d},a.ecc.ecdsa.publicKey.recoverFromSignature=function(t,e){var r=arguments.length<=2||void 0===arguments[2]?a.ecc.curves.k256:arguments[2];if(!e||e instanceof a.ecc.curve)throw new a.exception.invalid("must supply hash and signature to recover public key");var i=void 0;if(!("object"==typeof t&&t.length>0&&"number"==typeof t[0]))throw new a.exception.invalid("hash. Must be a bitArray");i=t;var s=void 0;if(!("object"==typeof e&&e.length>0&&"number"==typeof e[0]))throw new a.exception.invalid("signature. Must be a bitArray");s=e;var u=s[0]-27;if(0>u||u>3)throw new a.exception.invalid("signature. Signature must be generated with algorithm that prepends the recovery factor in order to recover the public key");var c=n(r,s.slice(1)),f=c.r,h=c.s,l=o(r,f,h,i,u),p=new a.ecc.ecdsa.publicKey(r,l);return p}},function(t){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t){function e(){if(!o){o=!0;for(var t,e=i.length;e;){t=i,i=[];for(var r=-1;++r<e;)t[r]();e=i.length}o=!1}}function r(){}var n=t.exports={},i=[],o=!1;n.nextTick=function(t){i.push(t),o||setTimeout(e,0)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){var n;(function(t,i){!function(o){function s(t){throw RangeError(O[t])}function a(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function u(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(k,".");var i=t.split("."),o=a(i,e).join(".");return n+o}function c(t){for(var e,r,n=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function f(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=L(t>>>10&1023|55296),t=56320|1023&t),e+=L(t)}).join("")}function h(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:w}function l(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function p(t,e,r){var n=0;for(t=r?R(t/F):t>>1,t+=R(t/e);t>I*A>>1;n+=w)t=R(t/I);return R(n+(I+1)*t/(t+x))}function d(t){var e,r,n,i,o,a,u,c,l,d,_=[],g=t.length,y=0,v=B,m=C;for(r=t.lastIndexOf(S),0>r&&(r=0),n=0;r>n;++n)t.charCodeAt(n)>=128&&s("not-basic"),_.push(t.charCodeAt(n));for(i=r>0?r+1:0;g>i;){for(o=y,a=1,u=w;i>=g&&s("invalid-input"),c=h(t.charCodeAt(i++)),(c>=w||c>R((b-y)/a))&&s("overflow"),y+=c*a,l=m>=u?E:u>=m+A?A:u-m,!(l>c);u+=w)d=w-l,a>R(b/d)&&s("overflow"),a*=d;e=_.length+1,m=p(y-o,e,0==o),R(y/e)>b-v&&s("overflow"),v+=R(y/e),y%=e,_.splice(y++,0,v)}return f(_)}function _(t){var e,r,n,i,o,a,u,f,h,d,_,g,y,v,m,x=[];for(t=c(t),g=t.length,e=B,r=0,o=C,a=0;g>a;++a)_=t[a],128>_&&x.push(L(_));for(n=i=x.length,i&&x.push(S);g>n;){for(u=b,a=0;g>a;++a)_=t[a],_>=e&&u>_&&(u=_);for(y=n+1,u-e>R((b-r)/y)&&s("overflow"),r+=(u-e)*y,e=u,a=0;g>a;++a)if(_=t[a],e>_&&++r>b&&s("overflow"),_==e){for(f=r,h=w;d=o>=h?E:h>=o+A?A:h-o,!(d>f);h+=w)m=f-d,v=w-d,x.push(L(l(d+m%v,0))),f=R(m/v);x.push(L(l(f,0))),o=p(r,y,n==i),r=0,++n}++r,++e}return x.join("")}function g(t){return u(t,function(t){return D.test(t)?d(t.slice(4).toLowerCase()):t})}function y(t){return u(t,function(t){return T.test(t)?"xn--"+_(t):t})}var v=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof i&&i);(v.global===v||v.window===v||v.self===v)&&(o=v);var m,b=2147483647,w=36,E=1,A=26,x=38,F=700,C=72,B=128,S="-",D=/^xn--/,T=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-E,R=Math.floor,L=String.fromCharCode;m={version:"1.3.2",ucs2:{decode:c,encode:f},decode:d,encode:_,toASCII:y,toUnicode:g},n=function(){return m}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(65)(t),function(){return this}())},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=r?i-1:0,l=r?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+t[e+h],h+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+t[e+h],h+=l,f-=8);if(0===o)o=1-c;else{if(o===u)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,h=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,_=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?l/u:l*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*_}},function(t){var e=Array.isArray,r=Object.prototype.toString;t.exports=e||function(t){return!!t&&"[object Array]"==r.call(t)}},function(t,e,r){"use strict";e.decode=e.parse=r(74),e.encode=e.stringify=r(75)},function(t,e,r){r(76),t.exports=r(77).core.Object.keys},function(t,e,r){(function(t){function n(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function i(t,e){for(var r in t)e(t[r],r)}var o=r(78);e.createHash=r(79),e.createHmac=r(80),e.randomBytes=function(e,r){if(!r||!r.call)return new t(o(e));try{r.call(this,void 0,new t(o(e)))}catch(n){r(n)}},e.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var s=r(81)(e);e.pbkdf2=s.pbkdf2,e.pbkdf2Sync=s.pbkdf2Sync,i(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(t){e[t]=function(){n("sorry,",t,"is not implemented yet")}})}).call(e,r(43).Buffer)},function(t,e,r){(function(t,n){function i(t,e){this._id=t,this._clearFn=e}var o=r(83).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var r=c++,n=arguments.length<2?!1:a.call(arguments,1);return u[r]=!0,o(function(){u[r]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(r))}),r},e.clearImmediate="function"==typeof n?n:function(t){delete u[t]}}).call(e,r(71).setImmediate,r(71).clearImmediate)},function(t){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===h?62:e===a||e===l?63:u>e?-1:u+10>e?e-u+26+26:f+26>e?e-f:c+26>e?e-c+26:void 0}function n(t){function r(t){c[h++]=t}var n,i,s,a,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;u="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new o(3*t.length/4-u),s=u>0?t.length-4:t.length;var h=0;for(n=0,i=0;s>n;n+=4,i+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===u?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&a)):1===u&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(a>>8&255),r(255&a)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,u="";for(i=0,s=t.length-a;s>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0),h="-".charCodeAt(0),l="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}(e)},function(t){"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,r,n,i){r=r||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(r);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=t.length;a>0&&u>a&&(u=a);for(var c=0;u>c;++c){var f,h,l,p,d=t[c].replace(s,"%20"),_=d.indexOf(n);_>=0?(f=d.substr(0,_),h=d.substr(_+1)):(f=d,h=""),l=decodeURIComponent(f),p=decodeURIComponent(h),e(o,l)?Array.isArray(o[l])?o[l].push(p):o[l]=[o[l],p]:o[l]=p}return o}},function(t){"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,r,n,i){return r=r||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(e(i))+n;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(e(t))}).join(r):o+encodeURIComponent(e(t[i]))}).join(r):i?encodeURIComponent(e(i))+n+encodeURIComponent(e(t)):""}},function(t,e,r){var n=r(77),i=r(86),o=n.isObject,s=n.toObject;n.each.call("freeze,seal,preventExtensions,isFrozen,isSealed,isExtensible,getOwnPropertyDescriptor,getPrototypeOf,keys,getOwnPropertyNames".split(","),function(t,e){var a=(n.core.Object||{})[t]||Object[t],u=0,c={};c[t]=0==e?function(t){return o(t)?a(t):t}:1==e?function(t){return o(t)?a(t):t}:2==e?function(t){return o(t)?a(t):t}:3==e?function(t){return o(t)?a(t):!0}:4==e?function(t){return o(t)?a(t):!0}:5==e?function(t){return o(t)?a(t):!1}:6==e?function(t,e){return a(s(t),e)}:7==e?function(t){return a(Object(n.assertDefined(t)))}:8==e?function(t){return a(s(t))}:r(87).get;try{a("z")}catch(f){u=1}i(i.S+i.F*u,"Object",c)})},function(t,e,r){"use strict";function n(t){return isNaN(t=+t)?0:(t>0?_:d)(t)}function i(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function o(t,e,r){return t[e]=r,t}function s(t){return v?function(e,r,n){return b.setDesc(e,r,i(t,n))}:o}function a(t){return null!==t&&("object"==typeof t||"function"==typeof t)}function u(t){return"function"==typeof t}function c(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}var f="undefined"!=typeof self?self:Function("return this")(),h={},l=Object.defineProperty,p={}.hasOwnProperty,d=Math.ceil,_=Math.floor,g=Math.max,y=Math.min,v=!!function(){try{return 2==l({},"a",{get:function(){return 2}}).a}catch(t){}}(),m=s(1),b=t.exports=r(84)({g:f,core:h,html:f.document&&document.documentElement,isObject:a,isFunction:u,that:function(){return this},toInteger:n,toLength:function(t){return t>0?y(n(t),9007199254740991):0},toIndex:function(t,e){return t=n(t),0>t?g(t+e,0):y(t,e)},has:function(t,e){return p.call(t,e)},create:Object.create,getProto:Object.getPrototypeOf,DESC:v,desc:i,getDesc:Object.getOwnPropertyDescriptor,setDesc:l,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:c,ES5Object:Object,toObject:function(t){return b.ES5Object(c(t))},hide:m,def:s(0),set:f.Symbol?o:m,each:[].forEach});"undefined"!=typeof __e&&(__e=h),"undefined"!=typeof __g&&(__g=f)},function(t,e,r){(function(e,n){!function(){var i=("undefined"==typeof window?e:window)||{};_crypto=i.crypto||i.msCrypto||r(82),t.exports=function(t){if(_crypto.getRandomValues){var e=new n(t);return _crypto.getRandomValues(e),e}if(_crypto.randomBytes)return _crypto.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(e,function(){return this}(),r(43).Buffer)},function(t,e,r){(function(e){function n(t){return function(){var r=[],n={update:function(t,n){return e.isBuffer(t)||(t=new e(t,n)),r.push(t),this},digest:function(n){var i=e.concat(r),o=t(i);return r=null,n?o.toString(n):o}};return n}}var i=r(88),o=n(r(85)),s=n(r(91));t.exports=function(t){return"md5"===t?new o:"rmd160"===t?new s:i(t)}}).call(e,r(43).Buffer)},function(t,e,r){(function(e){function n(t,r){if(!(this instanceof n))return new n(t,r);this._opad=u,this._alg=t;var s="sha512"===t?128:64;r=this._key=e.isBuffer(r)?r:new e(r),r.length>s?r=i(t).update(r).digest():r.length<s&&(r=e.concat([r,o],s));for(var a=this._ipad=new e(s),u=this._opad=new e(s),c=0;s>c;c++)a[c]=54^r[c],u[c]=92^r[c];this._hash=i(t).update(a)}var i=r(79),o=new e(128);o.fill(0),t.exports=n,n.prototype.update=function(t,e){return this._hash.update(t,e),this},n.prototype.digest=function(t){var e=this._hash.digest();return i(this._alg).update(this._opad).update(e).digest(t)}}).call(e,r(43).Buffer)},function(t,e,r){var n=r(89);t.exports=function(t,e){e=e||{};var r=n(t);return e.pbkdf2=r.pbkdf2,e.pbkdf2Sync=r.pbkdf2Sync,e}},function(){},function(t){function e(){u=!1,o.length?a=o.concat(a):c=-1,a.length&&r()}function r(){if(!u){var t=setTimeout(e);u=!0;for(var r=a.length;r;){for(o=a,a=[];++c<r;)o[c].run();c=-1,r=a.length}o=null,u=!1,clearTimeout(t)}}function n(t,e){this.fun=t,this.array=e}function i(){}var o,s=t.exports={},a=[],u=!1,c=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.push(new n(t,e)),1!==a.length||u||setTimeout(r,0)},n.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t){t.exports=function(t){return t.FW=!1,t.path=t.core,t}},function(t,e,r){function n(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var r=1732584193,n=-271733879,i=-1732584194,f=271733878,h=0;h<t.length;h+=16){var l=r,p=n,d=i,_=f;r=o(r,n,i,f,t[h+0],7,-680876936),f=o(f,r,n,i,t[h+1],12,-389564586),i=o(i,f,r,n,t[h+2],17,606105819),n=o(n,i,f,r,t[h+3],22,-1044525330),r=o(r,n,i,f,t[h+4],7,-176418897),f=o(f,r,n,i,t[h+5],12,1200080426),i=o(i,f,r,n,t[h+6],17,-1473231341),n=o(n,i,f,r,t[h+7],22,-45705983),r=o(r,n,i,f,t[h+8],7,1770035416),f=o(f,r,n,i,t[h+9],12,-1958414417),i=o(i,f,r,n,t[h+10],17,-42063),n=o(n,i,f,r,t[h+11],22,-1990404162),r=o(r,n,i,f,t[h+12],7,1804603682),f=o(f,r,n,i,t[h+13],12,-40341101),i=o(i,f,r,n,t[h+14],17,-1502002290),n=o(n,i,f,r,t[h+15],22,1236535329),r=s(r,n,i,f,t[h+1],5,-165796510),f=s(f,r,n,i,t[h+6],9,-1069501632),i=s(i,f,r,n,t[h+11],14,643717713),n=s(n,i,f,r,t[h+0],20,-373897302),r=s(r,n,i,f,t[h+5],5,-701558691),f=s(f,r,n,i,t[h+10],9,38016083),i=s(i,f,r,n,t[h+15],14,-660478335),n=s(n,i,f,r,t[h+4],20,-405537848),r=s(r,n,i,f,t[h+9],5,568446438),f=s(f,r,n,i,t[h+14],9,-1019803690),i=s(i,f,r,n,t[h+3],14,-187363961),n=s(n,i,f,r,t[h+8],20,1163531501),r=s(r,n,i,f,t[h+13],5,-1444681467),f=s(f,r,n,i,t[h+2],9,-51403784),i=s(i,f,r,n,t[h+7],14,1735328473),n=s(n,i,f,r,t[h+12],20,-1926607734),r=a(r,n,i,f,t[h+5],4,-378558),f=a(f,r,n,i,t[h+8],11,-2022574463),i=a(i,f,r,n,t[h+11],16,1839030562),n=a(n,i,f,r,t[h+14],23,-35309556),r=a(r,n,i,f,t[h+1],4,-1530992060),f=a(f,r,n,i,t[h+4],11,1272893353),i=a(i,f,r,n,t[h+7],16,-155497632),n=a(n,i,f,r,t[h+10],23,-1094730640),r=a(r,n,i,f,t[h+13],4,681279174),f=a(f,r,n,i,t[h+0],11,-358537222),i=a(i,f,r,n,t[h+3],16,-722521979),n=a(n,i,f,r,t[h+6],23,76029189),r=a(r,n,i,f,t[h+9],4,-640364487),f=a(f,r,n,i,t[h+12],11,-421815835),i=a(i,f,r,n,t[h+15],16,530742520),n=a(n,i,f,r,t[h+2],23,-995338651),r=u(r,n,i,f,t[h+0],6,-198630844),f=u(f,r,n,i,t[h+7],10,1126891415),i=u(i,f,r,n,t[h+14],15,-1416354905),n=u(n,i,f,r,t[h+5],21,-57434055),r=u(r,n,i,f,t[h+12],6,1700485571),f=u(f,r,n,i,t[h+3],10,-1894986606),i=u(i,f,r,n,t[h+10],15,-1051523),n=u(n,i,f,r,t[h+1],21,-2054922799),r=u(r,n,i,f,t[h+8],6,1873313359),f=u(f,r,n,i,t[h+15],10,-30611744),i=u(i,f,r,n,t[h+6],15,-1560198380),n=u(n,i,f,r,t[h+13],21,1309151649),r=u(r,n,i,f,t[h+4],6,-145523070),f=u(f,r,n,i,t[h+11],10,-1120210379),i=u(i,f,r,n,t[h+2],15,718787259),n=u(n,i,f,r,t[h+9],21,-343485551),r=c(r,l),n=c(n,p),i=c(i,d),f=c(f,_)}return Array(r,n,i,f)}function i(t,e,r,n,i,o){return c(f(c(c(e,t),c(n,o)),i),r)}function o(t,e,r,n,o,s,a){return i(e&r|~e&n,t,e,o,s,a)}function s(t,e,r,n,o,s,a){return i(e&n|r&~n,t,e,o,s,a)}function a(t,e,r,n,o,s,a){return i(e^r^n,t,e,o,s,a)}function u(t,e,r,n,o,s,a){return i(r^(e|~n),t,e,o,s,a)}function c(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r}function f(t,e){return t<<e|t>>>32-e}var h=r(90);t.exports=function(t){return h.hash(t,n,16)}},function(t,e,r){function n(t,e){return function(){return t.apply(e,arguments)}}function i(t,e,r){var o,c,f,h,l=t&i.G,p=t&i.P,d=l?s:t&i.S?s[e]:(s[e]||{}).prototype,_=l?a:a[e]||(a[e]={});l&&(r=e);for(o in r)c=!(t&i.F)&&d&&o in d,c&&o in _||(f=c?d[o]:r[o],l&&!u(d[o])?h=r[o]:t&i.B&&c?h=n(f,s):t&i.W&&d[o]==f?!function(t){h=function(e){return this instanceof t?new t(e):t(e)},h.prototype=t.prototype}(f):h=p&&u(f)?n(Function.call,f):f,_[o]=h,p&&((_.prototype||(_.prototype={}))[o]=f))}var o=r(77),s=o.g,a=o.core,u=o.isFunction;i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,t.exports=i},function(t,e,r){function n(t){try{return s(t)}catch(e){return a.slice()}}var i=r(77),o={}.toString,s=i.getNames,a="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.get=function(t){return a&&"[object Window]"==o.call(t)?n(t):s(i.toObject(t))}},function(t,e,r){var e=t.exports=function(t){var r=e[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r},n=r(43).Buffer,i=r(92)(n);e.sha1=r(93)(n,i),e.sha256=r(94)(n,i),e.sha512=r(95)(n,i)},function(t,e,r){(function(e){t.exports=function(t){function r(t,e,r,i,o,s){if("function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=n(t,e,r,i,o)}catch(u){return s(u)}s(void 0,a)})}function n(r,n,i,o,s){if("number"!=typeof i)throw new TypeError("Iterations not a number");if(0>i)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(0>o)throw new TypeError("Bad key length");s=s||"sha1",e.isBuffer(r)||(r=new e(r)),e.isBuffer(n)||(n=new e(n));var a,u,c,f=1,h=new e(o),l=new e(n.length+4);n.copy(l,0,0,n.length);for(var p=1;f>=p;p++){l.writeUInt32BE(p,n.length);var d=t.createHmac(s,r).update(l).digest();if(!a&&(a=d.length,c=new e(a),f=Math.ceil(o/a),u=o-(f-1)*a,o>(Math.pow(2,32)-1)*a))throw new TypeError("keylen exceeds maximum length");d.copy(c,0,0,a);for(var _=1;i>_;_++){d=t.createHmac(s,r).update(d).digest();for(var g=0;a>g;g++)c[g]^=d[g]}var y=(p-1)*a,v=p==f?u:a;c.copy(h,y,0,v)}return h}return{pbkdf2:r,pbkdf2Sync:n}}}).call(e,r(43).Buffer)},function(t,e,r){(function(e){function r(t,r){if(t.length%o!==0){var n=t.length+(o-t.length%o);t=e.concat([t,s],n)}for(var i=[],a=r?t.readInt32BE:t.readInt32LE,u=0;u<t.length;u+=o)i.push(a.call(t,u));return i}function n(t,r,n){for(var i=new e(r),o=n?i.writeInt32BE:i.writeInt32LE,s=0;s<t.length;s++)o.call(i,t[s],4*s,!0);return i}function i(t,i,o,s){e.isBuffer(t)||(t=new e(t));var u=i(r(t,s),t.length*a);return n(u,o,s)}var o=4,s=new e(o);s.fill(0);var a=8;t.exports={hash:i}}).call(e,r(43).Buffer)},function(t,e,r){(function(e){function r(t,e,r){return t^e^r}function n(t,e,r){return t&e|~t&r}function i(t,e,r){return(t|~e)^r}function o(t,e,r){return t&r|e&~r}function s(t,e,r){return t^(e|~r)}function a(t,e){return t<<e|t>>>32-e}function u(t){var r=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var n=_(t),i=8*t.length,o=8*t.length;n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var s=0;s<n.length;s+=16)y(r,n,s);for(var s=0;5>s;s++){var a=r[s];r[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var u=g(r);return new e(u)}t.exports=u;var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0],_=function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},g=function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},y=function(t,e,u){for(var _=0;16>_;_++){var g=u+_,y=e[g];e[g]=16711935&(y<<8|y>>>24)|4278255360&(y<<24|y>>>8)}var v,m,b,w,E,A,x,F,C,B;A=v=t[0],x=m=t[1],F=b=t[2],C=w=t[3],B=E=t[4];for(var S,_=0;80>_;_+=1)S=v+e[u+c[_]]|0,S+=16>_?r(m,b,w)+p[0]:32>_?n(m,b,w)+p[1]:48>_?i(m,b,w)+p[2]:64>_?o(m,b,w)+p[3]:s(m,b,w)+p[4],S=0|S,S=a(S,h[_]),S=S+E|0,v=E,E=w,w=a(b,10),b=m,m=S,S=A+e[u+f[_]]|0,S+=16>_?s(x,F,C)+d[0]:32>_?o(x,F,C)+d[1]:48>_?i(x,F,C)+d[2]:64>_?n(x,F,C)+d[3]:r(x,F,C)+d[4],S=0|S,S=a(S,l[_]),S=S+B|0,A=B,B=C,C=a(F,10),F=x,x=S;S=t[1]+b+C|0,t[1]=t[2]+w+B|0,t[2]=t[3]+E+A|0,t[3]=t[4]+v+x|0,t[4]=t[0]+m+F|0,t[0]=S}}).call(e,r(43).Buffer)},function(t){t.exports=function(t){function e(e,r){this._block=new t(e),this._finalSize=r,this._blockSize=e,this._len=0,this._s=0}return e.prototype.init=function(){this._s=0,this._len=0},e.prototype.update=function(e,r){"string"==typeof e&&(r=r||"utf8",e=new t(e,r));for(var n=this._len+=e.length,i=this._s=this._s||0,o=0,s=this._block;n>i;){for(var a=Math.min(e.length,o+this._blockSize-i%this._blockSize),u=a-o,c=0;u>c;c++)s[i%this._blockSize+c]=e[c+o];i+=u,o+=u,i%this._blockSize===0&&this._update(s)}return this._s=i,this},e.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var r=this._update(this._block)||this._hash();return t?r.toString(t):r},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e}},function(t,e,r){var n=r(41).inherits;t.exports=function(t,e){function r(){return d.length?d.pop().init():this instanceof r?(this._w=p,e.call(this,64,56),this._h=null,void this.init()):new r}function i(t,e,r,n){return 20>t?e&r|~e&n:40>t?e^r^n:60>t?e&r|e&n|r&n:e^r^n}function o(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function s(t,e){return t+e|0}function a(t,e){return t<<e|t>>>32-e}var u=0,c=4,f=8,h=12,l=16,p=new("undefined"==typeof Int32Array?Array:Int32Array)(80),d=[];return n(r,e),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,e.prototype.init.call(this),this},r.prototype._POOL=d,r.prototype._update=function(t){var e,r,n,u,c,f,h,l,p,d;e=f=this._a,r=h=this._b,n=l=this._c,u=p=this._d,c=d=this._e;for(var _=this._w,g=0;80>g;g++){var y=_[g]=16>g?t.readInt32BE(4*g):a(_[g-3]^_[g-8]^_[g-14]^_[g-16],1),v=s(s(a(e,5),i(g,r,n,u)),s(s(c,y),o(g)));c=u,u=n,n=a(r,30),r=e,e=v}this._a=s(e,f),this._b=s(r,h),this._c=s(n,l),this._d=s(u,p),this._e=s(c,d)},r.prototype._hash=function(){d.length<100&&d.push(this);var e=new t(20);return e.writeInt32BE(0|this._a,u),e.writeInt32BE(0|this._b,c),e.writeInt32BE(0|this._c,f),e.writeInt32BE(0|this._d,h),e.writeInt32BE(0|this._e,l),e},r}},function(t,e,r){var n=r(41).inherits;t.exports=function(t,e){function r(){this.init(),this._w=p,e.call(this,64,56)}function i(t,e){return t>>>e|t<<32-e}function o(t,e){return t>>>e}function s(t,e,r){return t&e^~t&r}function a(t,e,r){return t&e^t&r^e&r}function u(t){return i(t,2)^i(t,13)^i(t,22)}function c(t){return i(t,6)^i(t,11)^i(t,25)}function f(t){return i(t,7)^i(t,18)^o(t,3)}function h(t){return i(t,17)^i(t,19)^o(t,10)}var l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);return n(r,e),r.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},r.prototype._update=function(t){var e,r,n,i,o,p,d,_,g,y,v=this._w;e=0|this._a,r=0|this._b,n=0|this._c,i=0|this._d,o=0|this._e,p=0|this._f,d=0|this._g,_=0|this._h;for(var m=0;64>m;m++){var b=v[m]=16>m?t.readInt32BE(4*m):h(v[m-2])+v[m-7]+f(v[m-15])+v[m-16];g=_+c(o)+s(o,p,d)+l[m]+b,y=u(e)+a(e,r,n),_=d,d=p,p=o,o=i+g,i=n,n=r,r=e,e=g+y}this._a=e+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0,this._f=p+this._f|0,this._g=d+this._g|0,this._h=_+this._h|0},r.prototype._hash=function(){var e=new t(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},r}},function(t,e,r){var n=r(41).inherits;t.exports=function(t,e){function r(){this.init(),this._w=u,e.call(this,128,112)}function i(t,e,r){return t>>>r|e<<32-r}function o(t,e,r){return t&e^~t&r}function s(t,e,r){return t&e^t&r^e&r}var a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);return n(r,e),r.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},r.prototype._update=function(t){var e,r,n,u,c,f,h,l,p,d,_,g,y,v,m,b,w=this._w;e=0|this._a,r=0|this._b,n=0|this._c,u=0|this._d,c=0|this._e,f=0|this._f,h=0|this._g,l=0|this._h,p=0|this._al,d=0|this._bl,_=0|this._cl,g=0|this._dl,y=0|this._el,v=0|this._fl,m=0|this._gl,b=0|this._hl;
for(var E=0;80>E;E++){var A,x,F=2*E;if(16>E)A=w[F]=t.readInt32BE(4*F),x=w[F+1]=t.readInt32BE(4*F+4);else{var C=w[F-30],B=w[F-30+1],S=i(C,B,1)^i(C,B,8)^C>>>7,D=i(B,C,1)^i(B,C,8)^i(B,C,7);C=w[F-4],B=w[F-4+1];var T=i(C,B,19)^i(B,C,29)^C>>>6,k=i(B,C,19)^i(C,B,29)^i(B,C,6),O=w[F-14],I=w[F-14+1],R=w[F-32],L=w[F-32+1];x=D+I,A=S+O+(D>>>0>x>>>0?1:0),x+=k,A=A+T+(k>>>0>x>>>0?1:0),x+=L,A=A+R+(L>>>0>x>>>0?1:0),w[F]=A,w[F+1]=x}var j=s(e,r,n),N=s(p,d,_),q=i(e,p,28)^i(p,e,2)^i(p,e,7),M=i(p,e,28)^i(e,p,2)^i(e,p,7),P=i(c,y,14)^i(c,y,18)^i(y,c,9),U=i(y,c,14)^i(y,c,18)^i(c,y,9),z=a[F],G=a[F+1],H=o(c,f,h),V=o(y,v,m),K=b+U,Y=l+P+(b>>>0>K>>>0?1:0);K+=V,Y=Y+H+(V>>>0>K>>>0?1:0),K+=G,Y=Y+z+(G>>>0>K>>>0?1:0),K+=x,Y=Y+A+(x>>>0>K>>>0?1:0);var X=M+N,$=q+j+(M>>>0>X>>>0?1:0);l=h,b=m,h=f,m=v,f=c,v=y,y=g+K|0,c=u+Y+(g>>>0>y>>>0?1:0)|0,u=n,g=_,n=r,_=d,r=e,d=p,p=K+X|0,e=Y+$+(K>>>0>p>>>0?1:0)|0}this._al=this._al+p|0,this._bl=this._bl+d|0,this._cl=this._cl+_|0,this._dl=this._dl+g|0,this._el=this._el+y|0,this._fl=this._fl+v|0,this._gl=this._gl+m|0,this._hl=this._hl+b|0,this._a=this._a+e+(this._al>>>0<p>>>0?1:0)|0,this._b=this._b+r+(this._bl>>>0<d>>>0?1:0)|0,this._c=this._c+n+(this._cl>>>0<_>>>0?1:0)|0,this._d=this._d+u+(this._dl>>>0<g>>>0?1:0)|0,this._e=this._e+c+(this._el>>>0<y>>>0?1:0)|0,this._f=this._f+f+(this._fl>>>0<v>>>0?1:0)|0,this._g=this._g+h+(this._gl>>>0<m>>>0?1:0)|0,this._h=this._h+l+(this._hl>>>0<b>>>0?1:0)|0},r.prototype._hash=function(){function e(t,e,n){r.writeInt32BE(t,n),r.writeInt32BE(e,n+4)}var r=new t(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),r},r}}]);